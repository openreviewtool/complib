(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{109:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return composer_PlayerContextProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return composer_Player})),__webpack_require__.d(__webpack_exports__,"d",(function(){return composer_Timeline})),__webpack_require__.d(__webpack_exports__,"a",(function(){return composer_PlayDeck}));__webpack_require__(20),__webpack_require__(84),__webpack_require__(4),__webpack_require__(105),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),core_PlayDeck=__webpack_require__(167).b;try{PlayDeck.displayName="PlayDeck",PlayDeck.__docgenInfo={description:"",displayName:"PlayDeck",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},playing:{defaultValue:null,description:"",name:"playing",required:!1,type:{name:"boolean"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},onSkipPrev:{defaultValue:null,description:"",name:"onSkipPrev",required:!1,type:{name:"(() => void)"}},disablePrev:{defaultValue:{value:"false"},description:"",name:"disablePrev",required:!1,type:{name:"boolean"}},onSkipNext:{defaultValue:null,description:"",name:"onSkipNext",required:!1,type:{name:"(() => void)"}},disableNext:{defaultValue:{value:"false"},description:"",name:"disableNext",required:!1,type:{name:"boolean"}},loopType:{defaultValue:null,description:"",name:"loopType",required:!1,type:{name:"enum",value:[{value:'"off"'},{value:'"loopCurrent"'},{value:'"loopAll"'}]}},onToggleLoop:{defaultValue:null,description:"",name:"onToggleLoop",required:!1,type:{name:"(() => void)"}},themeColor:{defaultValue:{value:"white"},description:"",name:"themeColor",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"undefined"},description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"medium"'},{value:'"small"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PlayDeck/index.tsx#PlayDeck"]={docgenInfo:PlayDeck.__docgenInfo,name:"PlayDeck",path:"src/component/core/PlayDeck/index.tsx#PlayDeck"})}catch(__react_docgen_typescript_loader_error){}var Timeline_Timeline=__webpack_require__(252),RPlayer=__webpack_require__(250),jsx_runtime=__webpack_require__(3),_excluded=["value"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var PlayerContext=react_default.a.createContext({mediaList:[],mediaIndex:0,setMediaIndex:function setMediaIndex(){},playing:!1,setPlaying:function setPlaying(){},seekTime:void 0,setSeekTime:function setSeekTime(){},playerState:{played:0,loaded:0},setPlayerState:function setPlayerState(){}}),composer_PlayerContextProvider=function PlayerContextProvider(_ref){var _ref$value=_ref.value,_ref$value$mediaList=_ref$value.mediaList,mediaList=void 0===_ref$value$mediaList?[]:_ref$value$mediaList,_ref$value$mediaIndex=_ref$value.mediaIndex,mediaIndex=void 0===_ref$value$mediaIndex?0:_ref$value$mediaIndex,_ref$value$setMediaIn=_ref$value.setMediaIndex,setMediaIndex=void 0===_ref$value$setMediaIn?function(){}:_ref$value$setMediaIn,props=_objectWithoutProperties(_ref,_excluded),_useState2=_slicedToArray(Object(react.useState)(),2),seekTime=_useState2[0],setSeekTime=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(!1),2),playing=_useState4[0],setPlaying=_useState4[1],_useState6=_slicedToArray(Object(react.useState)({played:0,loaded:0}),2),playerState=_useState6[0],setPlayerState=_useState6[1];return Object(jsx_runtime.jsx)(PlayerContext.Provider,{value:{mediaList:mediaList,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex,playing:playing,setPlaying:setPlaying,seekTime:seekTime,setSeekTime:setSeekTime,playerState:playerState,setPlayerState:setPlayerState},children:props.children})};composer_PlayerContextProvider.displayName="PlayerContextProvider";var composer_Player=function Player(){var ctx=react_default.a.useContext(PlayerContext);return Object(jsx_runtime.jsx)(RPlayer.a,{url:ctx.mediaList[ctx.mediaIndex].url,playing:ctx.playing,onPlay:function onPlay(){return ctx.setPlaying(!0)},onPause:function onPause(){return ctx.setPlaying(!1)},onProgressHiFi:function onProgressHiFi(s){ctx.setPlayerState(s)},seekTime:ctx.seekTime,onEnded:function onEnded(){return ctx.setPlaying(!1)}})};composer_Player.displayName="Player";var composer_Timeline=function Timeline(){var ctx=react_default.a.useContext(PlayerContext),showTimeline="number"==typeof ctx.playerState.loaded&&0!==ctx.playerState.loaded||"number"==typeof ctx.playerState.played&&0!==ctx.playerState.played;return Object(jsx_runtime.jsx)("div",{style:{display:showTimeline?void 0:"none"},children:Object(jsx_runtime.jsx)(Timeline_Timeline.a,{currentTime:ctx.playerState.played,duration:ctx.mediaList[ctx.mediaIndex].duration,onTimelineSeek:ctx.setSeekTime,onTimelineCaptured:function onTimelineCaptured(captured){captured||ctx.setSeekTime(void 0)}})})};composer_Timeline.displayName="Timeline";var composer_PlayDeck=function PlayDeck(){return Object(jsx_runtime.jsx)(PlayerContext.Consumer,{children:function children(ctx){return Object(jsx_runtime.jsx)(core_PlayDeck,{playing:ctx.playing,onPlay:function onPlay(){return ctx.setPlaying(!ctx.playing)},onSkipNext:function onSkipNext(){ctx.setMediaIndex((ctx.mediaIndex+1)%ctx.mediaList.length)},onSkipPrev:function onSkipPrev(){ctx.setMediaIndex((ctx.mediaIndex-1+ctx.mediaList.length)%ctx.mediaList.length)}})}})};composer_PlayDeck.displayName="PlayDeck";try{composer_PlayerContextProvider.displayName="PlayerContextProvider",composer_PlayerContextProvider.__docgenInfo={description:"",displayName:"PlayerContextProvider",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Partial<playerContextInteface>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/MediaPlayer/composer.tsx#PlayerContextProvider"]={docgenInfo:composer_PlayerContextProvider.__docgenInfo,name:"PlayerContextProvider",path:"src/component/core/MediaPlayer/composer.tsx#PlayerContextProvider"})}catch(__react_docgen_typescript_loader_error){}},166:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return sampleAnnotations}));__webpack_require__(10);var sampleRectElement={id:"rect1_id",etype:"Rect",transformMatrix:[1,0,0,1,100,100],fill:"",stroke:"pink",strokeWidth:3,width:100,height:100},sampleAnnotations=[sampleRectElement,Object.assign({},sampleRectElement,{id:"rect2_id",stroke:"Indigo",transformMatrix:[1,0,0,1,180,140],width:150,height:100}),{id:"circle_id",etype:"Circle",transformMatrix:[1,0,0,1,50,50],radius:30,fill:"",stroke:"MediumSeaGreen",strokeWidth:5},{id:"textbox_id",etype:"Textbox",transformMatrix:[1,0,0,1,150,200],text:"hello, world!",fontSize:25,fontFamily:"Times New Roman",fill:"rgba(255,255,122,0.8)",width:200},{id:"path_id",etype:"Path",transformMatrix:[1,0,0,1,290,150],stroke:"DodgerBlue",strokeWidth:3,fill:"",path:"M 0 0 L 200 100 L 170 200 z"}]},167:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LOOP_TYPE_LIST}));__webpack_require__(20),__webpack_require__(84),__webpack_require__(4),__webpack_require__(0);var _material_ui_icons_PlayArrow__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(513),_material_ui_icons_PlayArrow__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_material_ui_icons_PlayArrow__WEBPACK_IMPORTED_MODULE_4__),_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(512),_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_5__),_material_ui_icons_SkipNext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(514),_material_ui_icons_SkipNext__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_material_ui_icons_SkipNext__WEBPACK_IMPORTED_MODULE_6__),_material_ui_icons_SkipPrevious__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(511),_material_ui_icons_SkipPrevious__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_material_ui_icons_SkipPrevious__WEBPACK_IMPORTED_MODULE_7__),_material_ui_icons_Loop__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(517),_material_ui_icons_Loop__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_material_ui_icons_Loop__WEBPACK_IMPORTED_MODULE_8__),_material_ui_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(254),_material_ui_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(959),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__(939),__webpack_require__(3)),_excluded=["disablePrev","disableNext","themeColor","iconSize"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var LOOP_TYPE_LIST=["off","loopCurrent","loopAll"],PlayDeck=function PlayDeck(_ref){var _ref$disablePrev=_ref.disablePrev,disablePrev=void 0!==_ref$disablePrev&&_ref$disablePrev,_ref$disableNext=_ref.disableNext,disableNext=void 0!==_ref$disableNext&&_ref$disableNext,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"white":_ref$themeColor,_ref$iconSize=_ref.iconSize,iconSize=void 0===_ref$iconSize?void 0:_ref$iconSize,props=_objectWithoutProperties(_ref,_excluded);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"playDeck",children:[props.onSkipPrev&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{size:iconSize,onClick:props.onSkipPrev,disabled:disablePrev,style:{color:themeColor},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_icons_SkipPrevious__WEBPACK_IMPORTED_MODULE_7___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{size:iconSize,onClick:props.onPlay,style:{color:themeColor},children:props.playing?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_5___default.a,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_icons_PlayArrow__WEBPACK_IMPORTED_MODULE_4___default.a,{})}),props.onSkipNext&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{size:iconSize,onClick:props.onSkipNext,disabled:disableNext,style:{color:themeColor},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_icons_SkipNext__WEBPACK_IMPORTED_MODULE_6___default.a,{})}),props.onToggleLoop&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{size:"small",onClick:props.onToggleLoop,title:props.loopType,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.a,{badgeContent:"loopCurrent"===props.loopType?1:null,style:{color:"off"===props.loopType?void 0:themeColor},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_material_ui_icons_Loop__WEBPACK_IMPORTED_MODULE_8___default.a,{style:{fill:"off"===props.loopType?void 0:themeColor}})})})]})};PlayDeck.displayName="PlayDeck",__webpack_exports__.b=PlayDeck;try{PlayDeck.displayName="PlayDeck",PlayDeck.__docgenInfo={description:"",displayName:"PlayDeck",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},playing:{defaultValue:null,description:"",name:"playing",required:!1,type:{name:"boolean"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},onSkipPrev:{defaultValue:null,description:"",name:"onSkipPrev",required:!1,type:{name:"(() => void)"}},disablePrev:{defaultValue:{value:"false"},description:"",name:"disablePrev",required:!1,type:{name:"boolean"}},onSkipNext:{defaultValue:null,description:"",name:"onSkipNext",required:!1,type:{name:"(() => void)"}},disableNext:{defaultValue:{value:"false"},description:"",name:"disableNext",required:!1,type:{name:"boolean"}},loopType:{defaultValue:null,description:"",name:"loopType",required:!1,type:{name:"enum",value:[{value:'"off"'},{value:'"loopCurrent"'},{value:'"loopAll"'}]}},onToggleLoop:{defaultValue:null,description:"",name:"onToggleLoop",required:!1,type:{name:"(() => void)"}},themeColor:{defaultValue:{value:"white"},description:"",name:"themeColor",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"undefined"},description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"medium"'},{value:'"small"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PlayDeck/PlayDeck.tsx#PlayDeck"]={docgenInfo:PlayDeck.__docgenInfo,name:"PlayDeck",path:"src/component/core/PlayDeck/PlayDeck.tsx#PlayDeck"})}catch(__react_docgen_typescript_loader_error){}},195:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(84),__webpack_require__(4);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),fabric=__webpack_require__(99),defaults=(__webpack_require__(54),__webpack_require__(10),__webpack_require__(68),__webpack_require__(8),__webpack_require__(917),__webpack_require__(51),__webpack_require__(57)),baseAttrNames=(__webpack_require__(26),[].concat(["Rect","Circle","Ellipse","Path","Textbox"],["SVG"]),["fill","stroke","strokeWidth"]),fabricObjAttrsLookup={Rect:[].concat(baseAttrNames,["width","height"]),Circle:[].concat(baseAttrNames,["radius"]),Ellipse:[].concat(baseAttrNames,["rx","ry"]),Textbox:[].concat(baseAttrNames,["text","fontFamily","fontSize","width","height"]),Path:[].concat(baseAttrNames,["path"]),SVG:[]};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var utils_makeElement=function makeElement(fObj){var element=fabricObjAttrsLookup[fObj.etype].reduce((function(p,c){return p[c]=fObj[c],p}),{});return Object.assign({etype:fObj.etype,id:fObj.id,transformMatrix:fObj.calcTransformMatrix(),fabricObj:fObj},element)},makeFabricObj=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(props){var newFObj,fObjProps,t;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if((fObjProps=Object.assign({},props)).transformMatrix&&delete fObjProps.transformMatrix,fObjProps.etype&&fObjProps.id){_context.next=4;break}throw"Can not make extended fabric object without etype and id.";case 4:if("Textbox"!==props.etype){_context.next=8;break}newFObj=new fabric.fabric.Textbox("text",Object.assign({text:"Enter text...",fontFamily:"Times New Roman"},defaults.d,fObjProps)),_context.next=25;break;case 8:if("Path"!==props.etype){_context.next=12;break}newFObj=new fabric.fabric.Path(props.path,Object.assign({strokeLineCap:"round"},defaults.d,fObjProps)),_context.next=25;break;case 12:if("Rect"!==props.etype){_context.next=16;break}newFObj=new fabric.fabric.Rect(Object.assign({},defaults.d,fObjProps)),_context.next=25;break;case 16:if("Circle"!==props.etype){_context.next=20;break}newFObj=new fabric.fabric.Circle(Object.assign({},defaults.d,fObjProps)),_context.next=25;break;case 20:if("Ellipse"!==props.etype){_context.next=24;break}newFObj=new fabric.fabric.Ellipse(Object.assign({},defaults.d,fObjProps)),_context.next=25;break;case 24:throw Error('Failed to deserialize element of unsupported type "'+props.etype+'".');case 25:return props.transformMatrix&&(t=fabric.fabric.util.qrDecompose(props.transformMatrix),newFObj.set(t),newFObj.setPositionByOrigin({x:t.translateX,y:t.translateY},"center","center")),newFObj.setCoords(),_context.abrupt("return",newFObj);case 28:case"end":return _context.stop()}}),_callee)})));return function makeFabricObj(_x){return _ref.apply(this,arguments)}}(),setHoverStyle=function setHoverStyle(newElement,selected,config){newElement.cornerStyle="circle",newElement.transparentCorners=!1,newElement.cornerSize=12,newElement.borderDashArray=selected?void 0:[5,5],newElement.borderColor=null==config?void 0:config.selectionColor,newElement.cornerColor=null==config?void 0:config.selectionColor},utils_setSelectionControls=function setSelectionControls(newElement,elementType,config){newElement.cornerStyle="circle",newElement.transparentCorners=!1,newElement.cornerSize=12,newElement.borderDashArray=void 0,newElement.borderColor=null==config?void 0:config.selectionColor,newElement.cornerColor=null==config?void 0:config.selectionColor,defaults.e||newElement.setControlVisible("mtr",!1),"Textbox"===elementType&&(newElement.setControlVisible("tl",!1),newElement.setControlVisible("mt",!1),newElement.setControlVisible("tr",!1),newElement.setControlVisible("bl",!1),newElement.setControlVisible("mb",!1),newElement.setControlVisible("br",!1))},v4=__webpack_require__(978),SHAPES=["Ellipse","Rect","Circle","Triangle","Textbox"];var hooks_useDrawShapeHandler=function useDrawShapeHandler(fabricCanvasRef,uiState,onAddElement,disabled){var uiStateRef=react_default.a.useRef(uiState);react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;fcanvas.on("mouse:down",draw_shape_handle_pointer_down),fcanvas.on("mouse:move",draw_shape_handle_pointer_move),fcanvas.on("mouse:up",draw_shape_handle_pointer_up),fcanvas.on("path:created",handle_path_created),fcanvas.defaultCursor="crosshair"}),[]),react_default.a.useEffect((function(){uiStateRef.current=uiState}),[uiState]);var handle_path_created=function handle_path_created(meta){var k,fObj=meta.path;for(k in defaults.d)fObj.set(k,defaults.d[k]);fObj.etype="Path",fObj.id=Object(v4.a)(),null==onAddElement||onAddElement(utils_makeElement(fObj))};react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;if(uiState.mode){!function setPathDrawing(fcanvas,uiState){fcanvas.isDrawingMode="draw"===uiState.mode&&"Path"===uiState.shape;var brush=fcanvas.freeDrawingBrush;brush.width=uiState.strokeWidth||1,brush.color=uiState.color||"#fff",fcanvas.freeDrawingBrush=brush}(fcanvas,uiState);var isDrawingMode="draw"===uiState.mode;fcanvas.selection=!disabled&&!isDrawingMode,fcanvas.defaultCursor=isDrawingMode?"crosshair":"",fcanvas.skipTargetFind=isDrawingMode}}),[uiState.mode,uiState.shape,uiState.shape,disabled]);var currentShapeDrawnRef=react_default.a.useRef(null),draw_shape_handle_pointer_down=Object(react.useCallback)((function(opt){var _uiStateRef$current,_uiStateRef$current2;if("draw"===(null===(_uiStateRef$current=uiStateRef.current)||void 0===_uiStateRef$current?void 0:_uiStateRef$current.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current2=uiStateRef.current)||void 0===_uiStateRef$current2?void 0:_uiStateRef$current2.shape)){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_ref=[pointer.x,pointer.y],originX=_ref[0],originY=_ref[1],newElementDefaults=function getElementPropsFromUiState(uiState){var shape=uiState.shape;return Object.assign({},uiState,{etype:shape,fill:-1!==["Textbox","SVG"].indexOf(shape)?uiState.color:"",stroke:-1!==["Textbox","SVG"].indexOf(shape)?"":uiState.color,strokeWidth:-1!==["Textbox"].indexOf(shape)?0:uiState.strokeWidth})}(uiStateRef.current);makeFabricObj(Object.assign({},newElementDefaults,{id:Object(v4.a)(),transformMatrix:[1,0,0,1,originX,originY]})).then((function(shape){fcanvas.add(shape),currentShapeDrawnRef.current={originX:originX,originY:originY,newFObjExt:shape}}))}}),[]),draw_shape_handle_pointer_move=Object(react.useCallback)((function(opt){var _uiStateRef$current3,_uiStateRef$current4,isDrawinShape="draw"===(null===(_uiStateRef$current3=uiStateRef.current)||void 0===_uiStateRef$current3?void 0:_uiStateRef$current3.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current4=uiStateRef.current)||void 0===_uiStateRef$current4?void 0:_uiStateRef$current4.shape);if(null!==currentShapeDrawnRef.current&&isDrawinShape){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_currentShapeDrawnRef=currentShapeDrawnRef.current,originX=_currentShapeDrawnRef.originX,originY=_currentShapeDrawnRef.originY,fabObj=currentShapeDrawnRef.current.newFObjExt;"Textbox"===fabObj.etype?fabObj.set({left:pointer.x,top:pointer.y}):-1!==SHAPES.indexOf(fabObj.etype)?fabObj.set({left:Math.min(originX,pointer.x),top:Math.min(originY,pointer.y)}):fabObj.set({left:pointer.x,top:pointer.y}),"Ellipse"===fabObj.etype?(fabObj.set({rx:Math.abs(originX-pointer.x)/2}),fabObj.set({ry:Math.abs(originY-pointer.y)/2})):"Rect"===fabObj.etype&&(fabObj.set({width:Math.abs(originX-pointer.x)}),fabObj.set({height:Math.abs(originY-pointer.y)})),fabObj.setCoords(),fcanvas.requestRenderAll()}}),[]),draw_shape_handle_pointer_up=Object(react.useCallback)((function(_opt){var _uiStateRef$current5,_uiStateRef$current6,isDrawinShape="draw"===(null===(_uiStateRef$current5=uiStateRef.current)||void 0===_uiStateRef$current5?void 0:_uiStateRef$current5.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current6=uiStateRef.current)||void 0===_uiStateRef$current6?void 0:_uiStateRef$current6.shape),fcanvas=fabricCanvasRef.current;if(null!==currentShapeDrawnRef.current&&isDrawinShape){var newFObjExt=currentShapeDrawnRef.current.newFObjExt;-1!==SHAPES.indexOf(newFObjExt.etype)&&(newFObjExt.width<4||newFObjExt.height<4)?null==fcanvas||fcanvas.remove(newFObjExt):null==onAddElement||onAddElement(utils_makeElement(newFObjExt)),currentShapeDrawnRef.current=null}}),[])};__webpack_require__(137),__webpack_require__(36);var hooks_useCustomSelectCorners=function useCustomSelectCorners(fabricCanvasRef,selectionConfig){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",handle_selection),fabricCanvasRef.current.on("selection:updated",handle_selection),fabricCanvasRef.current.on("selection:cleared",handle_selection)}),[]);var handle_selection=function handle_selection(event){if(event.target){var fObj=event.target;if(utils_setSelectionControls(event.target,fObj.etype,selectionConfig),fObj._objects)fObj._objects.forEach((function(s){return utils_setSelectionControls(s,s.etype)}))}}};var hooks_useCustomHoverStyle=function useCustomHoverStyle(fabricCanvasRef,selectionConfig){react_default.a.useEffect((function(){null!=selectionConfig&&selectionConfig.hoverBoundingBox&&(fabricCanvasRef.current.on("object:added",handle_object_added),fabricCanvasRef.current.on("path:created",handle_object_added),fabricCanvasRef.current.on("selection:created",handle_selection),fabricCanvasRef.current.on("selection:updated",handle_selection),fabricCanvasRef.current.on("selection:cleared",handle_selection))}),[]);var handle_object_added=function handle_object_added(event){event.target&&(setHoverStyle(event.target,!1,selectionConfig),function bootstrapHoverHandler(newFObj){newFObj.on("mouseover",(function(){this._renderControls(this.canvas.contextTop,{hasControls:!1})})),newFObj.on("mousedown",(function(){this.canvas.clearContext(this.canvas.contextTop)})),newFObj.on("mouseout",(function(){this.canvas.clearContext(this.canvas.contextTop)}))}(event.target))},handle_selection=function handle_selection(event){var _event$selected,_event$deselected;null===(_event$selected=event.selected)||void 0===_event$selected||_event$selected.forEach((function(s){setHoverStyle(s,!0,selectionConfig)})),null===(_event$deselected=event.deselected)||void 0===_event$deselected||_event$deselected.forEach((function(s){setHoverStyle(s,!1,selectionConfig)}))}};var hooks_useModifyHandler=function useModifyHandler(fabricCanvasRef,onChangeElement){react_default.a.useEffect((function(){fabricCanvasRef.current.on("object:modified",handle_object_modified)}),[]);var handle_object_modified=function handle_object_modified(event){event.target&&(event.target.hasOwnProperty("_objects")?event.target._objects:[event.target]).forEach((function(obj){if(onChangeElement){var updates={transformMatrix:obj.calcTransformMatrix()},fObj=obj;"Textbox"===fObj.etype&&(updates.text=fObj.text,updates.width=fObj.width),onChangeElement(Object.assign({id:fObj.id},updates))}}))}};__webpack_require__(27);var hooks_useSyncSelection=function useSyncSelection(fabricCanvasRef,onSelection){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",(function(event){handle_selection_change(event.selected)})),fabricCanvasRef.current.on("selection:updated",(function(event){handle_selection_change(event.selected,event.deselected)})),fabricCanvasRef.current.on("selection:cleared",(function(event){handle_selection_change(event.selected,event.deselected)}))}),[]);var handle_selection_change=function handle_selection_change(added,removed){var s=fabricCanvasRef.current.getActiveObjects().map((function(e){return e.id})),a=null==added?void 0:added.map((function(e){return e.id})),r=null==removed?void 0:removed.map((function(e){return e.id}));onSelection&&onSelection(s,a||[],r||[])}};var jsx_runtime=__webpack_require__(3),_excluded=["width","height","backgroundColor","attrs"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var FabricCanvas=react_default.a.memo((function(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"LightSteelBlue":_ref$backgroundColor,_ref$attrs=_ref.attrs,attrs=void 0===_ref$attrs?defaults.a:_ref$attrs,props=_objectWithoutProperties(_ref,_excluded),nativeCanvasRef=react_default.a.useRef(null);return react_default.a.useEffect((function(){props.fabricCanvasRef.current.setWidth(width),props.fabricCanvasRef.current.setHeight(height)}),[width,height]),react_default.a.useEffect((function(){props.fabricCanvasRef.current.backgroundColor=backgroundColor}),[backgroundColor]),Object(react.useEffect)((function(){return null!==nativeCanvasRef.current&&(props.fabricCanvasRef.current=new fabric.fabric.Canvas(nativeCanvasRef.current.id,Object.assign({width:width,height:height,backgroundColor:backgroundColor},attrs))),function(){var _props$fabricCanvasRe;null===(_props$fabricCanvasRe=props.fabricCanvasRef.current)||void 0===_props$fabricCanvasRe||_props$fabricCanvasRe.dispose()}}),[]),Object(jsx_runtime.jsx)("canvas",{ref:nativeCanvasRef,id:"canvas_"+Object(v4.a)()})})),AnnotateCanvas_FabricCanvas=FabricCanvas;try{FabricCanvas.displayName="FabricCanvas",FabricCanvas.__docgenInfo={description:"",displayName:"FabricCanvas",props:{fabricCanvasRef:{defaultValue:null,description:"",name:"fabricCanvasRef",required:!0,type:{name:"MutableRefObject<Canvas>"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},attrs:{defaultValue:null,description:"",name:"attrs",required:!1,type:{name:"Record<string, string | number | boolean>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"]={docgenInfo:FabricCanvas.__docgenInfo,name:"FabricCanvas",path:"src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"})}catch(__react_docgen_typescript_loader_error){}var hooks_useRedrawElements=function useRedrawElements(fabricCanvasRef,backgroundColor,elements,redrawOnModify){var redrawCanvas=function redrawCanvas(fCanvas){fCanvas.clear(),fCanvas.backgroundColor=backgroundColor,elements.forEach((function(ele){makeFabricObj(ele).then((function(shape){fCanvas.add(shape),ele.fabricObj=shape}))}))};Object(react.useEffect)((function(){redrawOnModify&&redrawCanvas(fabricCanvasRef.current)}),[elements]),Object(react.useEffect)((function(){redrawOnModify||redrawCanvas(fabricCanvasRef.current)}),[])},hooks_usePanZoom=function usePanZoom(fabricCanvasRef,panZoom){react_default.a.useEffect((function(){panZoom&&fabricCanvasRef.current.setViewportTransform([panZoom.scale,0,0,panZoom.scale,panZoom.x,panZoom.y])}),[panZoom])},AnnotateCanvas_excluded=["elements","selection","width","height","backgroundColor","clearOnElementModify","uiState","selectionConfig","debugLogging","disabled"];function AnnotateCanvas_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AnnotateCanvas_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var EmptyCanvas=new fabric.fabric.Canvas(""),AnnotateCanvas=react_default.a.memo((function(_ref){var _ref$elements=_ref.elements,elements=void 0===_ref$elements?[]:_ref$elements,_ref$selection=_ref.selection,selection=void 0===_ref$selection?[]:_ref$selection,_ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"":_ref$backgroundColor,_ref$clearOnElementMo=_ref.clearOnElementModify,clearOnElementModify=void 0!==_ref$clearOnElementMo&&_ref$clearOnElementMo,_ref$uiState=_ref.uiState,uiState=void 0===_ref$uiState?defaults.c:_ref$uiState,_ref$selectionConfig=_ref.selectionConfig,selectionConfig=void 0===_ref$selectionConfig?defaults.b:_ref$selectionConfig,_ref$debugLogging=_ref.debugLogging,debugLogging=void 0!==_ref$debugLogging&&_ref$debugLogging,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,props=AnnotateCanvas_objectWithoutProperties(_ref,AnnotateCanvas_excluded),fcRef=react_default.a.useRef(EmptyCanvas);return hooks_useRedrawElements(fcRef,backgroundColor,elements,clearOnElementModify),hooks_useSyncSelection(fcRef,props.onSelection),hooks_useCustomSelectCorners(fcRef,selectionConfig),hooks_useCustomHoverStyle(fcRef,selectionConfig),hooks_useDrawShapeHandler(fcRef,uiState,props.onAddElement,disabled),hooks_useModifyHandler(fcRef,props.onChangeElement),hooks_usePanZoom(fcRef,props.panZoom),function useApplyAttrsToSelection(canvasRef,uiState,selectedIds,elements,onChangeElement){var updateSelectedElement=function updateSelectedElement(key,value){elements.forEach((function(element){if(-1!==selectedIds.indexOf(element.id)){var _onChangeElement,etype=element.etype,adjKey=key;if("Textbox"===etype&&"strokeWidth"===key)return;"color"===key&&(adjKey="Textbox"===etype?"fill":"stroke"),element.fabricObj&&element.fabricObj.set(adjKey,value),onChangeElement&&onChangeElement(((_onChangeElement={id:element.id})[adjKey]=value,_onChangeElement))}})),canvasRef.current.renderAll()};Object(react.useEffect)((function(){return updateSelectedElement("fontSize",uiState.fontSize)}),[uiState.fontSize]),Object(react.useEffect)((function(){return updateSelectedElement("strokeWidth",uiState.strokeWidth)}),[uiState.strokeWidth]),Object(react.useEffect)((function(){return updateSelectedElement("color",uiState.color)}),[uiState.color])}(fcRef,uiState,selection,elements,props.onChangeElement),function useCanvasDebugger(on,elements,selection,fCanvasRef){react_default.a.useEffect((function(){if(on&&null!=fCanvasRef&&fCanvasRef.current){console.log("All elements: ",elements),null!=fCanvasRef&&fCanvasRef.current&&console.log("All Fabric Objects: ",fCanvasRef.current.getObjects()),console.log("Selection Ids: ",selection);var elementSelection=elements.filter((function(e){return-1!==selection.indexOf(e.id)}));elementSelection.length&&console.log("Selected: ",function getUiStateFromElement(element){var uiState={shape:element.etype};return-1!==["Textbox"].indexOf(element.etype)&&(uiState.color=element.fill,uiState.fontSize=element.fontSize,uiState.fontFamily=element.fontFamily),-1!=["Rect","Circle","Triangle","Ellipse","Path"].indexOf(element.etype)&&(uiState.strokeWidth=element.strokeWidth,uiState.color=element.stroke),uiState}(elementSelection[0]))}}),[elements,selection])}(debugLogging,elements,selection,fcRef),Object(jsx_runtime.jsx)("div",{style:{pointerEvents:disabled?"none":void 0},children:Object(jsx_runtime.jsx)(AnnotateCanvas_FabricCanvas,{fabricCanvasRef:fcRef,width:width,height:height,backgroundColor:backgroundColor})})}));__webpack_exports__.a=AnnotateCanvas;try{AnnotateCanvas.displayName="AnnotateCanvas",AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"AnnotateElement[]"}},selection:{defaultValue:null,description:"",name:"selection",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},panZoom:{defaultValue:null,description:"",name:"panZoom",required:!1,type:{name:"{ x: number; y: number; scale: number; }"}},clearOnElementModify:{defaultValue:null,description:"",name:"clearOnElementModify",required:!1,type:{name:"boolean"}},onAddElement:{defaultValue:null,description:"",name:"onAddElement",required:!1,type:{name:"((element: AnnotateElement) => void)"}},onChangeElement:{defaultValue:null,description:"",name:"onChangeElement",required:!1,type:{name:"((element: Partial<AnnotateElement>) => void)"}},onSelection:{defaultValue:null,description:"",name:"onSelection",required:!1,type:{name:"((selected: string[], added: string[], removed: string[]) => void)"}},uiState:{defaultValue:null,description:"",name:"uiState",required:!1,type:{name:"UserControllerInputs"}},selectionConfig:{defaultValue:null,description:"",name:"selectionConfig",required:!1,type:{name:"UserSelectionConfig"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},debugLogging:{defaultValue:null,description:"",name:"debugLogging",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/AnnotateCanvas.tsx#AnnotateCanvas"]={docgenInfo:AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/core/AnnotateCanvas/AnnotateCanvas.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}},250:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(84),__webpack_require__(4),__webpack_require__(326),__webpack_require__(10);var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react_player__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(509),react_player__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_player__WEBPACK_IMPORTED_MODULE_6__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3),_excluded=["seekTime","onProgressHiFi"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var RPlayer=function RPlayer(_ref){var _ref$seekTime=_ref.seekTime,seekTime=void 0===_ref$seekTime?void 0:_ref$seekTime,_ref$onProgressHiFi=_ref.onProgressHiFi,onProgressHiFi=void 0===_ref$onProgressHiFi?void 0:_ref$onProgressHiFi,props=_objectWithoutProperties(_ref,_excluded),reactPlayerRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),syncTimeIdRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),lastBroadcastTimeRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);return Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){reactPlayerRef.current&&seekTime&&seekTime>=0&&("VIDEO"===reactPlayerRef.current.getInternalPlayer().nodeName?reactPlayerRef.current.getInternalPlayer().currentTime=seekTime:reactPlayerRef.current.seekTo(seekTime))}),[seekTime]),Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){return syncTimeIdRef.current&&(window.clearTimeout(syncTimeIdRef.current),syncTimeIdRef.current=null),onProgressHiFi&&reactPlayerRef.current&&(syncTimeIdRef.current=window.setInterval((function(){if(reactPlayerRef.current){var _lastBroadcastTimeRef,played=reactPlayerRef.current.getCurrentTime(),loaded=reactPlayerRef.current.getSecondsLoaded();played!==(null===(_lastBroadcastTimeRef=lastBroadcastTimeRef.current)||void 0===_lastBroadcastTimeRef?void 0:_lastBroadcastTimeRef.played)&&onProgressHiFi({loaded:loaded,played:played}),lastBroadcastTimeRef.current={played:played,loaded:loaded}}}),20)),function(){syncTimeIdRef.current&&window.clearInterval(syncTimeIdRef.current)}}),[reactPlayerRef.current]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_player__WEBPACK_IMPORTED_MODULE_6___default.a,Object.assign({ref:reactPlayerRef,style:{position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",overflow:"hidden"},width:"100%",height:"100%"},props))};RPlayer.displayName="RPlayer",__webpack_exports__.a=RPlayer;try{RPlayer.displayName="RPlayer",RPlayer.__docgenInfo={description:"",displayName:"RPlayer",props:{seekTime:{defaultValue:{value:"undefined"},description:"",name:"seekTime",required:!1,type:{name:"number"}},onProgressHiFi:{defaultValue:{value:"undefined"},description:"",name:"onProgressHiFi",required:!1,type:{name:"((s: PlayerState) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/MediaPlayer/RPlayer.tsx#RPlayer"]={docgenInfo:RPlayer.__docgenInfo,name:"RPlayer",path:"src/component/core/MediaPlayer/RPlayer.tsx#RPlayer"})}catch(__react_docgen_typescript_loader_error){}},252:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(84),__webpack_require__(4),__webpack_require__(105),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22),__webpack_require__(141),__webpack_require__(326);var react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__),classnames__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(518),classnames__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_16__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__=(__webpack_require__(942),__webpack_require__(3)),_excluded=["frameRange","useFrameDisplay","themeColor"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var Timeline=function Timeline(_ref){var frameRange=_ref.frameRange,_ref$useFrameDisplay=_ref.useFrameDisplay,useFrameDisplay=void 0!==_ref$useFrameDisplay&&_ref$useFrameDisplay,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"red":_ref$themeColor,props=_objectWithoutProperties(_ref,_excluded),progressDisplayTimeoutRef=Object(react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null),timelineRef=Object(react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_15__.useState)(0),2),seekPercentage=_useState2[0],setSeekPercentage=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_15__.useState)(!1),2),innerCaptured=_useState4[0],setInnerCaptured=_useState4[1],timelineCaptured=props.timelineCaptured||innerCaptured,onTimelineCaptured=props.onTimelineCaptured||setInnerCaptured,displayPlayPercentage=props.currentTime/props.duration,oneFramePercent=0,frameDuration=-1,frameIndex=-1;if(useFrameDisplay&&frameRange){oneFramePercent=1/(frameDuration=frameRange[1]-frameRange[0]+1),displayPlayPercentage=Math.min(displayPlayPercentage,1-oneFramePercent);var frameElapsed=Math.floor(displayPlayPercentage*frameDuration);frameIndex=frameElapsed+frameRange[0],displayPlayPercentage=Math.min(frameElapsed*oneFramePercent)}timelineCaptured&&(displayPlayPercentage=seekPercentage),react__WEBPACK_IMPORTED_MODULE_15___default.a.useEffect((function(){return function(){null!==progressDisplayTimeoutRef.current&&window.clearTimeout(progressDisplayTimeoutRef.current)}}),[]);var handleScrubStart=function handleScrubStart(event){handleScrubMove(event),onTimelineCaptured&&onTimelineCaptured(!0)},handleScrubEnd=function handleScrubEnd(event){handleScrubMoveFinish(event),onTimelineCaptured&&onTimelineCaptured(!1)},handleScrubMove=function handleScrubMove(e){var isPointerEvent=e.type&&e.type.startsWith("pointer"),isPointerMoveEvent=e.type&&"pointermove"===e.type,isPointerDownEvent=e.type&&"pointerdown"===e.type;if(!isPointerMoveEvent||(props.onPointerMove&&props.onPointerMove(e),0!==e.buttons)){e.stopPropagation(),isPointerDownEvent&&e.currentTarget.setPointerCapture(e.pointerId);var bounds=timelineRef.current.getBoundingClientRect(),totalWidth=bounds.width,offset=(isPointerEvent?e.pageX:e.touches[0].clientX)-bounds.left,_seekPercentage=(offset=Math.max(0,Math.min(offset,totalWidth)))/totalWidth;setSeekPercentage(_seekPercentage);var seekTime=_seekPercentage*props.duration,seekFrameIndex=-1;if(props.onTimelineSeek){if(progressDisplayTimeoutRef.current&&(window.clearTimeout(progressDisplayTimeoutRef.current),progressDisplayTimeoutRef.current=null),useFrameDisplay&&frameRange){var _frameDuration=frameRange[1]-frameRange[0]+1;seekFrameIndex=Math.floor(_seekPercentage*_frameDuration+frameRange[0])}progressDisplayTimeoutRef.current=window.setTimeout(props.onTimelineSeek,5,seekTime,seekFrameIndex)}}},handleScrubMoveFinish=function handleScrubMoveFinish(e){e.type&&e.type.startsWith("pointer")&&e.currentTarget.releasePointerCapture(e.pointerId)},playHead=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{className:"timeline__track__playhead",style:{left:100*(displayPlayPercentage+oneFramePercent)+"%",backgroundColor:""+themeColor}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{className:"timeline__track__playhead__text",style:{left:100*(displayPlayPercentage+oneFramePercent)+"%"},children:-1!==frameIndex?frameIndex:""})]});return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_16___default()("timeline",props.className),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{ref:timelineRef,className:"timeline__scrollzone",onPointerMove:handleScrubMove,onTouchMove:handleScrubMove,onPointerDown:handleScrubStart,onTouchStart:handleScrubStart,onPointerUp:handleScrubEnd,onTouchEnd:handleScrubEnd,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)("div",{className:"timeline__track",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{className:"timeline__track__progress",style:{background:themeColor,width:100*(displayPlayPercentage+oneFramePercent)+"%"}}),playHead]})})})};Timeline.displayName="Timeline",__webpack_exports__.a=Timeline;try{Timeline.displayName="Timeline",Timeline.__docgenInfo={description:"",displayName:"Timeline",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},currentTime:{defaultValue:null,description:"",name:"currentTime",required:!0,type:{name:"number"}},useFrameDisplay:{defaultValue:{value:"false"},description:"",name:"useFrameDisplay",required:!1,type:{name:"boolean"}},frameRange:{defaultValue:null,description:"",name:"frameRange",required:!1,type:{name:"[number, number]"}},timelineCaptured:{defaultValue:null,description:"",name:"timelineCaptured",required:!1,type:{name:"boolean"}},onTimelineSeek:{defaultValue:null,description:"",name:"onTimelineSeek",required:!1,type:{name:"((seekTime: number, seekFrameIndex?: number) => void)"}},onTimelineCaptured:{defaultValue:null,description:"",name:"onTimelineCaptured",required:!1,type:{name:"((captured: boolean) => void)"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"((e: any) => void)"}},themeColor:{defaultValue:{value:"red"},description:"",name:"themeColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/Timeline/Timeline.tsx#Timeline"]={docgenInfo:Timeline.__docgenInfo,name:"Timeline",path:"src/component/core/Timeline/Timeline.tsx#Timeline"})}catch(__react_docgen_typescript_loader_error){}},478:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"CustomControls",(function(){return CustomControls}));__webpack_require__(54),__webpack_require__(10),__webpack_require__(105),__webpack_require__(4),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22);var react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(0),_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(58),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45),_component_core_MediaPlayer_RPlayer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(250),_component_core_MediaPlayer_composer__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(109),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Default=function Default(){var mediaKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__.select)("Video",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b[0]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_component_core_MediaPlayer_RPlayer__WEBPACK_IMPORTED_MODULE_16__.a,{url:mediaKnob.url,controls:!0})};Default.displayName="Default";var CustomControls=function CustomControls(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(0),2),mediaIndex=_useState2[0],setMediaIndex=_useState2[1],mediaKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__.select)("Video",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b[mediaIndex]);return Object(react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){var index=_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b.reduce((function(a,c,i){return c.label===mediaKnob.label&&(a=i),a}),0);setMediaIndex(index)}),[mediaKnob]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_component_core_MediaPlayer_composer__WEBPACK_IMPORTED_MODULE_17__.c,{value:{mediaList:_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.b,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_component_core_MediaPlayer_composer__WEBPACK_IMPORTED_MODULE_17__.b,{}),";",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_component_core_MediaPlayer_composer__WEBPACK_IMPORTED_MODULE_17__.d,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_component_core_MediaPlayer_composer__WEBPACK_IMPORTED_MODULE_17__.a,{})]})]})})})};CustomControls.displayName="CustomControls",Default.parameters={layout:"fullscreen"},__webpack_exports__.default={title:"MediaPlayer"},Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const mediaKnob = select('Video', mediaList, mediaList[0]);\n  return <RPlayer url={mediaKnob.url} controls={true} />;\n}"}},Default.parameters),CustomControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [mediaIndex, setMediaIndex] = useState(0);\n  const mediaKnob = select('Video', mediaList, mediaList[mediaIndex]);\n\n  useEffect(() => {\n    const index = mediaList.reduce((a, c, i) => {\n      if (c.label === mediaKnob.label) a = i;\n      return a;\n    }, 0);\n    setMediaIndex(index);\n  }, [mediaKnob]);\n\n  return (\n    <div>\n      <playerComposer.PlayerContextProvider\n        value={{ mediaList, mediaIndex, setMediaIndex }}\n      >\n        <div>\n          <playerComposer.Player />;\n          <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\n            <playerComposer.Timeline />\n            <playerComposer.PlayDeck />\n          </div>\n        </div>\n      </playerComposer.PlayerContextProvider>\n    </div>\n  );\n}"}},CustomControls.parameters)},483:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return PanZoomPinch_stories_Default})),__webpack_require__.d(__webpack_exports__,"WithAnnotationImage",(function(){return PanZoomPinch_stories_WithAnnotationImage})),__webpack_require__.d(__webpack_exports__,"WithAnnotationOembed",(function(){return PanZoomPinch_stories_WithAnnotationOembed}));__webpack_require__(10),__webpack_require__(54),__webpack_require__(105),__webpack_require__(4),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(45),getAbsoluteCoords=(__webpack_require__(20),__webpack_require__(84),__webpack_require__(412),__webpack_require__(143),__webpack_require__(27),function getAbsoluteCoords(coords,boundingRect){return{x:coords.clientX-boundingRect.left,y:coords.clientY-boundingRect.top}}),getDistance=function getDistance(points){return Math.sqrt(Math.pow(points[0].x-points[1].x,2)+Math.pow(points[0].y-points[1].y,2))},getMidPoint=function getMidPoint(points){return[(points[0].x+points[1].x)/2,(points[0].y+points[1].y)/2]},getTouchCoords=function getTouchCoords(evt){return Array.from(evt.touches).map((function(t){return getAbsoluteCoords(t,evt.currentTarget.getBoundingClientRect())}))},normalizeScale=function normalizeScale(contentSize,scale,resolution){return Math.max(contentSize.width/resolution,contentSize.height/resolution)*scale},normalizeSize=function normalizeSize(contentSize,resolution){return contentSize.width/resolution>contentSize.height/resolution?{width:resolution,height:contentSize.height/contentSize.width*resolution}:{height:resolution,width:contentSize.width/contentSize.height*resolution}};function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getNewPosition=function getNewPosition(posOri,pointerPosOri,scaleOri,pointerPosNow,scaleNow){return pointerPosNow-(pointerPosOri-posOri)/scaleOri*scaleNow},jsx_runtime=(__webpack_require__(944),__webpack_require__(3)),_excluded=["disabled","zoomBounds"],_excluded2=["inProgress"],_excluded3=["inProgress"];function PanZoom_slicedToArray(arr,i){return function PanZoom_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PanZoom_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PanZoom_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PanZoom_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PanZoom_arrayLikeToArray(o,minLen)}(arr,i)||function PanZoom_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PanZoom_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var PanZoomContext=react_default.a.createContext({inProgress:!1,contentSize:{width:10,height:10},setContentSize:function setContentSize(_s){},containerSize:{width:10,height:10},panZoom:{x:0,y:0,scale:1}}),PanZoom_PanZoomOverlay=function PanZoomOverlay(props){var ctx=Object(react.useContext)(PanZoomContext);return Object(jsx_runtime.jsx)("div",{className:"panzoom_overlay",style:{pointerEvents:props.pointerEventPassthrough?"none":void 0},children:props.render(ctx.panZoom,ctx.contentSize,ctx.containerSize,ctx.inProgress)})};PanZoom_PanZoomOverlay.displayName="PanZoomOverlay";var PanZoom_PanZoomContent=function PanZoomContent(props){var ctx=Object(react.useContext)(PanZoomContext);return Object(jsx_runtime.jsx)("div",{style:Object.assign({transformOrigin:"left top",transform:"translate("+ctx.panZoom.x+"px, "+ctx.panZoom.y+"px) scale("+ctx.panZoom.scale+")",position:"relative"},ctx.contentSize),children:props.normalizeRes?props.render((function(s){ctx.setContentSize(normalizeSize(s,props.normalizeRes))})):props.render(ctx.setContentSize)})};PanZoom_PanZoomContent.displayName="PanZoomContent";var PanZoom_PanZoom=function PanZoom(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$zoomBounds=_ref.zoomBounds,zoomBounds=void 0===_ref$zoomBounds?{min:.5,max:5}:_ref$zoomBounds,props=_objectWithoutProperties(_ref,_excluded),_useState2=PanZoom_slicedToArray(Object(react.useState)({x:0,y:0,scale:1}),2),panZoomState=_useState2[0],setPanZoomState=_useState2[1],contentFitSpecRef=Object(react.useRef)({fitSpec:{x:0,y:0,scale:1},min:1,max:1}),topContainerRef=react_default.a.useRef(null);!function usePreventDefaultBrowserTouch(ref){Object(react.useEffect)((function(){var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.addEventListener("touchstart",(function(evt){evt.preventDefault()}),!1)}),[])}(topContainerRef),function usePreventDefaultBrowserWheel(ref){Object(react.useEffect)((function(){var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.addEventListener("wheel",(function(evt){evt.preventDefault()}),!1)}),[])}(topContainerRef);var containerSize=function useMonitorResizable(ref){var _React$useState2=_slicedToArray(react_default.a.useState({width:10,height:10}),2),containerSize=_React$useState2[0],setContainerSize=_React$useState2[1];return react_default.a.useEffect((function(){var ro=new ResizeObserver((function(entries){entries.length>0&&setContainerSize({width:entries[0].contentRect.width,height:entries[0].contentRect.height})})),element=ref.current;return element&&ro.observe(element),function(){return ro.disconnect()}}),[ref]),containerSize}(topContainerRef),_useState4=PanZoom_slicedToArray(Object(react.useState)({width:10,height:10}),2),contentSize=_useState4[0],setContentSize=_useState4[1];Object(react.useEffect)((function(){var fitSpec=function getContentFitSpec(content,container){var viewerAspect=container.width/container.height,contentAspect=content.width/content.height,ratioWidth=container.width/content.width,ratioHeight=container.height/content.height,scale=viewerAspect>contentAspect?ratioHeight:ratioWidth;return{x:Math.abs(container.width-content.width*scale)/2,y:Math.abs(container.height-content.height*scale)/2,scale:scale}}(contentSize,containerSize);contentFitSpecRef.current=Object.assign({fitSpec:fitSpec},zoomBounds),setPanZoomState(fitSpec)}),[contentSize,containerSize]);var _useTouchPanZoom=function useTouchPanZoom(panZoomState,setPanZoomState,contentFitSpec,disabled){var touchState=Object(react.useRef)(),_useState2=_slicedToArray(Object(react.useState)(!1),2),inProgress=_useState2[0],setInProgress=_useState2[1];return{onTouchStart:function onTouchStart(evt){disabled||(touchState.current={start:getTouchCoords(evt),oriPanZoom:Object.assign({},panZoomState)})},onTouchEnd:function onTouchEnd(evt){0===evt.touches.length&&(touchState.current=void 0,setInProgress(!1))},onTouchMove:function handleTouchMove(evt){if(2===evt.touches.length&&touchState.current){setInProgress(!0);var oriPanZoom=touchState.current.oriPanZoom,touchesStart=touchState.current.start,touchesNow=getTouchCoords(evt),startMid=getMidPoint([touchesStart[0],touchesStart[1]]),nowMid=getMidPoint(touchesNow),distancePrev=getDistance([touchesStart[0],touchesStart[1]]),scale=getDistance(touchesNow)/distancePrev*oriPanZoom.scale;scale=Math.min(contentFitSpec.current.max*contentFitSpec.current.fitSpec.scale,Math.max(contentFitSpec.current.min*contentFitSpec.current.fitSpec.scale,scale));var x=getNewPosition(oriPanZoom.x,startMid[0],oriPanZoom.scale,nowMid[0],scale),y=getNewPosition(oriPanZoom.y,startMid[1],oriPanZoom.scale,nowMid[1],scale);setPanZoomState({x:x,y:y,scale:scale})}},inProgress:inProgress}}(panZoomState,setPanZoomState,contentFitSpecRef),touchCaptured=_useTouchPanZoom.inProgress,touchHandlers=_objectWithoutProperties(_useTouchPanZoom,_excluded2),wheelHandler=function useWheelZoom(panZoomState,setPanZoomState,contentFitSpec,disabled){return{onWheel:function handleWheel(evt){if(!disabled){var coords=getAbsoluteCoords(evt,evt.currentTarget.getBoundingClientRect()),scaleDelta=-.01*evt.deltaY,scale=panZoomState.scale+scaleDelta;scale=Math.min(contentFitSpec.current.max*contentFitSpec.current.fitSpec.scale,Math.max(contentFitSpec.current.min*contentFitSpec.current.fitSpec.scale,scale));var x=getNewPosition(panZoomState.x,coords.x,panZoomState.scale,coords.x,scale),y=getNewPosition(panZoomState.y,coords.y,panZoomState.scale,coords.y,scale);0!==evt.deltaX||Number.isInteger(evt.deltaY)||setPanZoomState({x:x,y:y,scale:scale})}}}}(panZoomState,setPanZoomState,contentFitSpecRef,disabled),_usePointerPan=function usePointerPan(panZoomState,setPanZoomState,disabled){var pointerState=Object(react.useRef)(),_useState4=_slicedToArray(Object(react.useState)(!1),2),inProgress=_useState4[0],setInProgress=_useState4[1];return{onPointerDown:function onPointerDown(evt){if(!disabled&&2!==evt.button){var coords=getAbsoluteCoords(evt,evt.currentTarget.getBoundingClientRect());setInProgress(!0),pointerState.current={start:coords,oriPanZoom:Object.assign({},panZoomState)}}},onPointerUp:function onPointerUp(){pointerState.current=void 0,setInProgress(!1)},onPointerMove:function onPointerMove(evt){if(!disabled){var coords=getAbsoluteCoords(evt,evt.currentTarget.getBoundingClientRect());if(pointerState.current){var x=getNewPosition(pointerState.current.oriPanZoom.x,pointerState.current.start.x,pointerState.current.oriPanZoom.scale,coords.x,panZoomState.scale),y=getNewPosition(pointerState.current.oriPanZoom.y,pointerState.current.start.y,pointerState.current.oriPanZoom.scale,coords.y,panZoomState.scale);setPanZoomState({x:x,y:y,scale:panZoomState.scale})}}},inProgress:inProgress}}(panZoomState,setPanZoomState,disabled||touchCaptured),pointerHandler=(_usePointerPan.inProgress,_objectWithoutProperties(_usePointerPan,_excluded3));return Object(react.useEffect)((function(){props.onPanZoom&&props.onPanZoom(panZoomState)}),[panZoomState]),Object(jsx_runtime.jsx)("div",Object.assign({ref:topContainerRef,className:"panzoom_top_container"},touchHandlers,wheelHandler,pointerHandler,{children:Object(jsx_runtime.jsx)(PanZoomContext.Provider,{value:{panZoom:panZoomState,inProgress:touchCaptured,containerSize:containerSize,contentSize:contentSize,setContentSize:setContentSize},children:props.children})}))},core_PanZoom_PanZoom=PanZoom_PanZoom;try{PanZoom_PanZoomOverlay.displayName="PanZoomOverlay",PanZoom_PanZoomOverlay.__docgenInfo={description:"",displayName:"PanZoomOverlay",props:{render:{defaultValue:null,description:"",name:"render",required:!0,type:{name:"(panZoom: PanZoomSpec, contentSize: RectSize, containerSize: RectSize, inProgress: boolean) => Element"}},pointerEventPassthrough:{defaultValue:null,description:"",name:"pointerEventPassthrough",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoomOverlay"]={docgenInfo:PanZoom_PanZoomOverlay.__docgenInfo,name:"PanZoomOverlay",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoomOverlay"})}catch(__react_docgen_typescript_loader_error){}try{PanZoom_PanZoomContent.displayName="PanZoomContent",PanZoom_PanZoomContent.__docgenInfo={description:"",displayName:"PanZoomContent",props:{render:{defaultValue:null,description:"",name:"render",required:!0,type:{name:"(setContentSize: (s: RectSize) => void) => Element"}},normalizeRes:{defaultValue:null,description:"",name:"normalizeRes",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoomContent"]={docgenInfo:PanZoom_PanZoomContent.__docgenInfo,name:"PanZoomContent",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoomContent"})}catch(__react_docgen_typescript_loader_error){}try{PanZoom_PanZoom.displayName="PanZoom",PanZoom_PanZoom.__docgenInfo={description:"",displayName:"PanZoom",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},zoomBounds:{defaultValue:{value:"{ min: 0.5, max: 5 }"},description:"",name:"zoomBounds",required:!1,type:{name:"{ min: number; max: number; }"}},onPanZoom:{defaultValue:null,description:"",name:"onPanZoom",required:!1,type:{name:"((p: PanZoomSpec) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoom"]={docgenInfo:PanZoom_PanZoom.__docgenInfo,name:"PanZoom",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoom"})}catch(__react_docgen_typescript_loader_error){}var core_PanZoom=core_PanZoom_PanZoom;try{PanZoom.displayName="PanZoom",PanZoom.__docgenInfo={description:"",displayName:"PanZoom",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},zoomBounds:{defaultValue:{value:"{ min: 0.5, max: 5 }"},description:"",name:"zoomBounds",required:!1,type:{name:"{ min: number; max: number; }"}},onPanZoom:{defaultValue:null,description:"",name:"onPanZoom",required:!1,type:{name:"((p: PanZoomSpec) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/index.tsx#PanZoom"]={docgenInfo:PanZoom.__docgenInfo,name:"PanZoom",path:"src/component/core/PanZoom/index.tsx#PanZoom"})}catch(__react_docgen_typescript_loader_error){}var AnnotateCanvas=__webpack_require__(195),annotationSamples=__webpack_require__(166),mediaSamples=__webpack_require__(58),utils_excluded=["hint","width"];function utils_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function utils_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var utils_StoryHint=function StoryHint(_ref){var _ref$hint=_ref.hint,hint=void 0===_ref$hint?"Some description about this story.":_ref$hint,props=(_ref.width,utils_objectWithoutProperties(_ref,utils_excluded)),displayHintKnob=Object(dist.boolean)("Show Hint",!0);return Object(jsx_runtime.jsxs)("div",{style:{display:"flex",flexFlow:"row wrap",height:"100vh"},children:[Object(jsx_runtime.jsx)("div",{id:"side_panel",style:{background:"gray",width:displayHintKnob?150:0,height:"100%",transition:"0.25s",overflow:"hidden",transitionTimingFunction:"ease-out"},children:Object(jsx_runtime.jsx)("div",{style:{width:150,boxSizing:"border-box",padding:5},children:hint})}),Object(jsx_runtime.jsx)("div",{style:{flexGrow:1,position:"relative"},children:props.children})]})};utils_StoryHint.displayName="StoryHint";var utils_getAnnotateKnobs=function getAnnotateKnobs(){return{resolutionKnob:Object(dist.select)("Annotate resolution",[800,1280,1920],800),modeKnob:Object(dist.optionsKnob)("Mode",{PanZoom:"panZoom",Selection:"selection",Annotate:"draw"},"panZoom",{display:"inline-radio"})}};try{utils_StoryHint.displayName="StoryHint",utils_StoryHint.__docgenInfo={description:"",displayName:"StoryHint",props:{hint:{defaultValue:{value:"Some description about this story."},description:"",name:"hint",required:!1,type:{name:"Element"}},width:{defaultValue:{value:"150"},description:"",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/component/utils.tsx#StoryHint"]={docgenInfo:utils_StoryHint.__docgenInfo,name:"StoryHint",path:"src/stories/component/utils.tsx#StoryHint"})}catch(__react_docgen_typescript_loader_error){}var composer=__webpack_require__(109),defaults=__webpack_require__(57);function PanZoomPinch_stories_slicedToArray(arr,i){return function PanZoomPinch_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PanZoomPinch_stories_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PanZoomPinch_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PanZoomPinch_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PanZoomPinch_stories_arrayLikeToArray(o,minLen)}(arr,i)||function PanZoomPinch_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PanZoomPinch_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hintsDefault=Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h3",{children:"PanZoom"}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Tablet"}),": pan and zoom using two fingers"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Laptop"}),": zoom using mouse wheel or using two finger gesture on trackpad"]})]}),hintsAnnotateMedia=Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h4",{children:"Annotation"}),Object(jsx_runtime.jsx)("p",{children:"Annotate on the media of your choice; switch the content using the media selector."}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"PanZoom"}),": panning and zooming the content"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Selection"}),": select the annotation"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Annotate"}),": annotate on the content"]})]}),hintsAnnotateOembed=Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h4",{children:"Annotate oEmbed"}),"oEmbed allows webapps to embed media from YouTube, Vimeo, Sound Cloud, etc. You can annotate on these. WIP: per frame annotation.",Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"PanZoom"}),": panning and zooming the content"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Selection"}),": select the annotation"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Annotate"}),": annotate on the content"]})]}),PanZoomPinch_stories_Default=function Default(){var videoUrlKnob=Object(dist.select)("Media URL",mediaSamples.a,mediaSamples.a[0]),disabled=Object(dist.boolean)("Disabled",!1);return Object(jsx_runtime.jsx)(utils_StoryHint,{hint:Object(jsx_runtime.jsx)("div",{children:hintsDefault}),children:Object(jsx_runtime.jsx)(core_PanZoom,{disabled:disabled,children:Object(jsx_runtime.jsx)(PanZoom_PanZoomContent,{render:function render(setContentSize){return Object(jsx_runtime.jsx)("img",{style:{pointerEvents:"none",userSelect:"none"},src:videoUrlKnob,onLoad:function onLoad(e){setContentSize({width:e.currentTarget.width,height:e.currentTarget.height})}})}})})})};PanZoomPinch_stories_Default.displayName="Default";var PanZoomPinch_stories_WithAnnotationImage=function WithAnnotationImage(){var videoUrlKnob=Object(dist.select)("Media URL",mediaSamples.a,mediaSamples.a[0]),_getAnnotateKnobs=utils_getAnnotateKnobs(),modeKnob=_getAnnotateKnobs.modeKnob,resolutionKnob=_getAnnotateKnobs.resolutionKnob;return Object(jsx_runtime.jsx)(utils_StoryHint,{hint:Object(jsx_runtime.jsx)("div",{children:hintsAnnotateMedia}),children:Object(jsx_runtime.jsxs)(core_PanZoom,{disabled:"panZoom"!==modeKnob,children:[Object(jsx_runtime.jsx)(PanZoom_PanZoomContent,{render:function render(setContentSize){return Object(jsx_runtime.jsx)("img",{style:{pointerEvents:"none",userSelect:"none"},src:videoUrlKnob,onLoad:function onLoad(e){setContentSize({width:e.currentTarget.width,height:e.currentTarget.height})}})}}),Object(jsx_runtime.jsx)(PanZoom_PanZoomOverlay,{pointerEventPassthrough:"panZoom"===modeKnob,render:function render(panZoom,contentSize,containerSize){return Object(jsx_runtime.jsx)(AnnotateCanvas.a,{elements:annotationSamples.a,width:containerSize.width,height:containerSize.height,panZoom:Object.assign({},panZoom,{scale:normalizeScale(contentSize,panZoom.scale,resolutionKnob)}),uiState:Object.assign({},defaults.c,{mode:modeKnob,shape:"Path"}),disabled:"panZoom"===modeKnob})}})]})})};PanZoomPinch_stories_WithAnnotationImage.displayName="WithAnnotationImage";var PanZoomPinch_stories_WithAnnotationOembed=function WithAnnotationOembed(){var _useState2=PanZoomPinch_stories_slicedToArray(Object(react.useState)(0),2),mediaIndex=_useState2[0],setMediaIndex=_useState2[1],mediaKnob=Object(dist.select)("Video",mediaSamples.b,mediaSamples.b[mediaIndex]),_getAnnotateKnobs2=utils_getAnnotateKnobs(),modeKnob=_getAnnotateKnobs2.modeKnob,resolutionKnob=_getAnnotateKnobs2.resolutionKnob;return Object(react.useEffect)((function(){var index=mediaSamples.b.reduce((function(a,c,i){return c.label===mediaKnob.label&&(a=i),a}),0);setMediaIndex(index)}),[mediaKnob]),Object(jsx_runtime.jsx)(utils_StoryHint,{hint:Object(jsx_runtime.jsx)("div",{children:hintsAnnotateOembed}),children:Object(jsx_runtime.jsx)(composer.c,{value:{mediaList:mediaSamples.b,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex},children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(core_PanZoom,{disabled:"panZoom"!==modeKnob,children:[Object(jsx_runtime.jsx)(PanZoom_PanZoomContent,{render:function render(setContentSize){return Object(react.useEffect)((function(){setContentSize(mediaSamples.b[mediaIndex])}),[mediaIndex]),Object(jsx_runtime.jsx)(composer.b,{})},normalizeRes:1e3}),Object(jsx_runtime.jsx)(PanZoom_PanZoomOverlay,{render:function render(panZoom,contentSize,containerSize){return Object(jsx_runtime.jsx)(AnnotateCanvas.a,{elements:annotationSamples.a,width:containerSize.width,height:containerSize.height,panZoom:Object.assign({},panZoom,{scale:normalizeScale(contentSize,panZoom.scale,resolutionKnob)}),uiState:Object.assign({},defaults.c,{mode:modeKnob,shape:"Path"}),disabled:"panZoom"===modeKnob})}})]}),Object(jsx_runtime.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0},children:[Object(jsx_runtime.jsx)(composer.d,{}),Object(jsx_runtime.jsx)(composer.a,{})]})]})})})};PanZoomPinch_stories_WithAnnotationOembed.displayName="WithAnnotationOembed",PanZoomPinch_stories_Default.parameters={layout:"fullscreen"},PanZoomPinch_stories_WithAnnotationImage.parameters={layout:"fullscreen"},PanZoomPinch_stories_WithAnnotationOembed.parameters={layout:"fullscreen"};__webpack_exports__.default={title:"PanZoom"};PanZoomPinch_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const videoUrlKnob = select('Media URL', artUrls, artUrls[0]);\n  const disabled = boolean('Disabled', false);\n\n  return (\n    <StoryHint hint={<div>{hintsDefault}</div>}>\n      <PanZoom disabled={disabled}>\n        <PanZoomContent\n          render={(setContentSize) => (\n            <img\n              style={{ pointerEvents: 'none', userSelect: 'none' }}\n              src={videoUrlKnob}\n              onLoad={(e: React.SyntheticEvent<HTMLImageElement>) => {\n                setContentSize({\n                  width: e.currentTarget.width,\n                  height: e.currentTarget.height,\n                });\n              }}\n            />\n          )}\n        />\n      </PanZoom>\n    </StoryHint>\n  );\n}"}},PanZoomPinch_stories_Default.parameters),PanZoomPinch_stories_WithAnnotationImage.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const videoUrlKnob = select('Media URL', artUrls, artUrls[0]);\n  const { modeKnob, resolutionKnob } = getAnnotateKnobs();\n\n  return (\n    <StoryHint hint={<div>{hintsAnnotateMedia}</div>}>\n      <PanZoom disabled={modeKnob !== 'panZoom'}>\n        <PanZoomContent\n          render={(setContentSize) => (\n            <img\n              style={{ pointerEvents: 'none', userSelect: 'none' }}\n              src={videoUrlKnob}\n              onLoad={(e: React.SyntheticEvent<HTMLImageElement>) => {\n                setContentSize({\n                  width: e.currentTarget.width,\n                  height: e.currentTarget.height,\n                });\n              }}\n            />\n          )}\n        />\n        <PanZoomOverlay\n          pointerEventPassthrough={modeKnob === 'panZoom'}\n          render={(panZoom, contentSize, containerSize) => {\n            return (\n              <AnnotateCanvas\n                elements={sampleAnnotations}\n                width={containerSize.width}\n                height={containerSize.height}\n                panZoom={{\n                  ...panZoom,\n                  scale: normalizeScale(\n                    contentSize,\n                    panZoom.scale,\n                    resolutionKnob,\n                  ),\n                }}\n                uiState={{ ...DEFAULT_UI_ATTRS, mode: modeKnob, shape: 'Path' }}\n                disabled={modeKnob === 'panZoom'}\n              />\n            );\n          }}\n        />\n      </PanZoom>\n    </StoryHint>\n  );\n}"}},PanZoomPinch_stories_WithAnnotationImage.parameters),PanZoomPinch_stories_WithAnnotationOembed.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [mediaIndex, setMediaIndex] = useState(0);\n  const mediaKnob = select('Video', mediaList, mediaList[mediaIndex]);\n  const { modeKnob, resolutionKnob } = getAnnotateKnobs();\n\n  useEffect(() => {\n    const index = mediaList.reduce((a, c, i) => {\n      if (c.label === mediaKnob.label) a = i;\n      return a;\n    }, 0);\n    setMediaIndex(index);\n  }, [mediaKnob]);\n\n  return (\n    <StoryHint hint={<div>{hintsAnnotateOembed}</div>}>\n      <playerComposer.PlayerContextProvider\n        value={{ mediaList, mediaIndex, setMediaIndex }}\n      >\n        <div>\n          <PanZoom disabled={modeKnob !== 'panZoom'}>\n            <PanZoomContent\n              render={(setContentSize) => {\n                useEffect(() => {\n                  setContentSize(mediaList[mediaIndex]);\n                }, [mediaIndex]);\n                return <playerComposer.Player />;\n              }}\n              normalizeRes={1000}\n            />\n            <PanZoomOverlay\n              render={(panZoom, contentSize, containerSize) => {\n                return (\n                  <AnnotateCanvas\n                    elements={sampleAnnotations}\n                    width={containerSize.width}\n                    height={containerSize.height}\n                    panZoom={{\n                      ...panZoom,\n                      scale: normalizeScale(\n                        contentSize,\n                        panZoom.scale,\n                        resolutionKnob,\n                      ),\n                    }}\n                    uiState={{\n                      ...DEFAULT_UI_ATTRS,\n                      mode: modeKnob,\n                      shape: 'Path',\n                    }}\n                    disabled={modeKnob === 'panZoom'}\n                  />\n                );\n              }}\n            />\n          </PanZoom>\n          <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\n            <playerComposer.Timeline />\n            <playerComposer.PlayDeck />\n          </div>\n        </div>\n      </playerComposer.PlayerContextProvider>\n    </StoryHint>\n  );\n}"}},PanZoomPinch_stories_WithAnnotationOembed.parameters)},486:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return AnnotateCanvas_stories_Default})),__webpack_require__.d(__webpack_exports__,"Edit",(function(){return AnnotateCanvas_stories_Edit}));__webpack_require__(10),__webpack_require__(105),__webpack_require__(4),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(45),core_AnnotateCanvas=__webpack_require__(195).a;try{AnnotateCanvas.displayName="AnnotateCanvas",AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"AnnotateElement[]"}},selection:{defaultValue:null,description:"",name:"selection",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},panZoom:{defaultValue:null,description:"",name:"panZoom",required:!1,type:{name:"{ x: number; y: number; scale: number; }"}},clearOnElementModify:{defaultValue:null,description:"",name:"clearOnElementModify",required:!1,type:{name:"boolean"}},onAddElement:{defaultValue:null,description:"",name:"onAddElement",required:!1,type:{name:"((element: AnnotateElement) => void)"}},onChangeElement:{defaultValue:null,description:"",name:"onChangeElement",required:!1,type:{name:"((element: Partial<AnnotateElement>) => void)"}},onSelection:{defaultValue:null,description:"",name:"onSelection",required:!1,type:{name:"((selected: string[], added: string[], removed: string[]) => void)"}},uiState:{defaultValue:null,description:"",name:"uiState",required:!1,type:{name:"UserControllerInputs"}},selectionConfig:{defaultValue:null,description:"",name:"selectionConfig",required:!1,type:{name:"UserSelectionConfig"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},debugLogging:{defaultValue:null,description:"",name:"debugLogging",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"]={docgenInfo:AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(26),__webpack_require__(27),__webpack_require__(54),__webpack_require__(84),__webpack_require__(137),__webpack_require__(36),__webpack_require__(920),__webpack_require__(321);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function elementsActionReducer(state,action){switch(action.type){case"addElement":if(!action.newElement.id)throw Error("Unexpected add element with no new id: "+action.newElement);return[].concat(_toConsumableArray(state),[action.newElement]);case"changeElement":return state.map((function(element){return element.id===action.elementUpdates.id?Object.assign({},element,action.elementUpdates):element}));case"removeElement":var removeIndex=state.reduce((function(a,c,index){return-1!==action.removeIds.indexOf(c.id)&&a.push(index),a}),[]),updatedElements=_toConsumableArray(state);return removeIndex.reverse().forEach((function(removeIndex){updatedElements.splice(removeIndex,1)})),updatedElements}}var annotationSamples=__webpack_require__(166),jsx_runtime=__webpack_require__(3);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AnnotateCanvas_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AnnotateCanvas_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AnnotateCanvas_stories_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AnnotateCanvas_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AnnotateCanvas_stories_Default=function Default(){return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:annotationSamples.a,width:480,height:480,backgroundColor:"SlateGray"})})};AnnotateCanvas_stories_Default.displayName="Default";var AnnotateCanvas_stories_Edit=function Edit(){var shapeKnob=Object(dist.optionsKnob)("Shape",{Ellipse:"Ellipse",Rect:"Rect",Textbox:"Textbox",Path:"Path"},"Rect",{display:"inline-radio"}),canvasModeKnob=Object(dist.optionsKnob)("Canvas Mode",{draw:"draw",selection:"selection"},"draw",{display:"inline-radio"}),fontSizeKnob=Object(dist.number)("Attr/Font Size",24,{range:!0,min:6,max:50,step:1}),colorKnob=Object(dist.color)("Stroke","#11ff33"),strokeWidthKnob=Object(dist.number)("Stroke Width",3,{range:!0,min:1,max:10,step:1}),_useState2=_slicedToArray(Object(react.useState)([]),2),selection=_useState2[0],setSelection=_useState2[1],_React$useReducer2=_slicedToArray(react_default.a.useReducer(elementsActionReducer,annotationSamples.a),2),elementsState=_React$useReducer2[0],elementsDispatcher=_React$useReducer2[1],uiState={mode:canvasModeKnob,shape:shapeKnob,fontSize:fontSizeKnob,color:colorKnob,strokeWidth:strokeWidthKnob,fontFamily:"Times New Roman"};return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:elementsState,selection:selection,uiState:uiState,width:480,height:480,backgroundColor:"SlateGray",onChangeElement:function onChangeElement(elementUpdates){return elementsDispatcher({type:"changeElement",elementUpdates:elementUpdates})},onAddElement:function onAddElement(newElement){elementsDispatcher({type:"addElement",newElement:newElement})},onSelection:function onSelection(selection){setSelection(selection)},clearOnElementModify:!1,debugLogging:!1})})};AnnotateCanvas_stories_Edit.displayName="Edit";__webpack_exports__.default={title:"AnnotateCanvas"};AnnotateCanvas_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  return (\n    <div>\n      <AnnotateCanvas\n        elements={sampleAnnotations}\n        width={480}\n        height={480}\n        backgroundColor={'SlateGray'}\n      />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_Default.parameters),AnnotateCanvas_stories_Edit.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const shapeKnob = optionsKnob(\n    'Shape',\n    {\n      Ellipse: 'Ellipse',\n      Rect: 'Rect',\n      Textbox: 'Textbox',\n      Path: 'Path',\n    },\n    'Rect',\n    { display: 'inline-radio' },\n  );\n  const canvasModeKnob = optionsKnob(\n    'Canvas Mode',\n    { draw: 'draw', selection: 'selection' },\n    'draw',\n    { display: 'inline-radio' },\n  );\n  const fontSizeKnob = number('Attr/Font Size', 24, {\n    range: true,\n    min: 6,\n    max: 50,\n    step: 1,\n  });\n  const colorKnob = color('Stroke', '#11ff33');\n  const strokeWidthKnob = number('Stroke Width', 3, {\n    range: true,\n    min: 1,\n    max: 10,\n    step: 1,\n  });\n\n  const [selection, setSelection] = useState<string[]>([]);\n  const [elementsState, elementsDispatcher] = React.useReducer(\n    elementsActionReducer,\n    sampleAnnotations,\n  );\n\n  const uiState: UserControllerInputs = {\n    mode: canvasModeKnob,\n    shape: shapeKnob,\n    fontSize: fontSizeKnob,\n    color: colorKnob,\n    strokeWidth: strokeWidthKnob,\n    fontFamily: 'Times New Roman',\n  };\n\n  return (\n    <div>\n      <AnnotateCanvas\n        elements={elementsState}\n        selection={selection}\n        uiState={uiState}\n        width={480}\n        height={480}\n        backgroundColor={'SlateGray'}\n        onChangeElement={(elementUpdates) =>\n          elementsDispatcher({ type: 'changeElement', elementUpdates })\n        }\n        onAddElement={(newElement) => {\n          elementsDispatcher({ type: 'addElement', newElement });\n        }}\n        onSelection={(selection) => {\n          setSelection(selection);\n        }}\n        clearOnElementModify={false}\n        debugLogging={false}\n      />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_Edit.parameters)},487:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return StopWatch_stories_Default}));__webpack_require__(10);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),jsx_runtime=(__webpack_require__(946),__webpack_require__(326),__webpack_require__(449),__webpack_require__(105),__webpack_require__(4),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22),__webpack_require__(3));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StopWatch_StopWatch=function StopWatch(_ref){var text=_ref.text,color=_ref.color,displayTimeInputRef=_ref.displayTimeInputRef,_React$useState2=_slicedToArray(react_default.a.useState(""),2),displayTime=_React$useState2[0],setDisplayTime=_React$useState2[1],displayTimer=react_default.a.useRef(null),startTime=react_default.a.useRef(null);react_default.a.useEffect((function(){return toggleClock(),function(){null!==displayTimer.current&&window.clearInterval(displayTimer.current)}}),[]);var toggleClock=function toggleClock(){null!==displayTimer.current?(window.clearInterval(displayTimer.current),setDisplayTime("0"),displayTimer.current=null):(startTime.current=new Date,displayTimer.current=window.setInterval((function(){setDisplayTime((((new Date).getTime()-startTime.current.getTime())/1e3).toFixed(2))}),100))};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{style:{color:color},children:text}),Object(jsx_runtime.jsx)("input",{ref:displayTimeInputRef,type:"text",defaultValue:displayTime}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(e){return toggleClock()},children:"0"===displayTime?"Start":"Pause"})]})},experiment_StopWatch=StopWatch_StopWatch;try{StopWatch_StopWatch.displayName="StopWatch",StopWatch_StopWatch.__docgenInfo={description:"",displayName:"StopWatch",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},displayTimeInputRef:{defaultValue:null,description:"",name:"displayTimeInputRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/experiment/StopWatch/index.tsx#StopWatch"]={docgenInfo:StopWatch_StopWatch.__docgenInfo,name:"StopWatch",path:"src/component/experiment/StopWatch/index.tsx#StopWatch"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__(45),StopWatch_stories_Default=function Default(){var stopWatchTimeDisplayInputRef=react_default.a.useRef(null);return Object(dist.button)("Tell time using Ref",(function(){var _stopWatchTimeDisplay;alert(null===(_stopWatchTimeDisplay=stopWatchTimeDisplayInputRef.current)||void 0===_stopWatchTimeDisplay?void 0:_stopWatchTimeDisplay.value)})),Object(jsx_runtime.jsx)(experiment_StopWatch,{displayTimeInputRef:stopWatchTimeDisplayInputRef,text:"hello, world",color:"#00ff00"})};StopWatch_stories_Default.displayName="Default",StopWatch_stories_Default.parameters=Object.assign({storySource:{source:'(): JSX.Element => {\n  const stopWatchTimeDisplayInputRef = React.useRef<HTMLInputElement|null>(null);\n\n  button(\'Tell time using Ref\', () => {\n    alert(stopWatchTimeDisplayInputRef.current?.value);\n  });\n\n  return (\n    <StopWatch\n      displayTimeInputRef={stopWatchTimeDisplayInputRef}\n      text="hello, world"\n      color="#00ff00"\n    />\n  );\n}'}},StopWatch_stories_Default.parameters)},488:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Timeline_stories_Default})),__webpack_require__.d(__webpack_exports__,"UseFrames",(function(){return Timeline_stories_UseFrames})),__webpack_require__.d(__webpack_exports__,"WithPlayControls",(function(){return Timeline_stories_WithPlayControls}));__webpack_require__(10),__webpack_require__(105),__webpack_require__(4),__webpack_require__(9),__webpack_require__(8),__webpack_require__(17),__webpack_require__(11),__webpack_require__(12),__webpack_require__(14),__webpack_require__(13),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),PlayDeck=__webpack_require__(167),core_Timeline=__webpack_require__(252).a;try{Timeline.displayName="Timeline",Timeline.__docgenInfo={description:"",displayName:"Timeline",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},currentTime:{defaultValue:null,description:"",name:"currentTime",required:!0,type:{name:"number"}},useFrameDisplay:{defaultValue:{value:"false"},description:"",name:"useFrameDisplay",required:!1,type:{name:"boolean"}},frameRange:{defaultValue:null,description:"",name:"frameRange",required:!1,type:{name:"[number, number]"}},timelineCaptured:{defaultValue:null,description:"",name:"timelineCaptured",required:!1,type:{name:"boolean"}},onTimelineSeek:{defaultValue:null,description:"",name:"onTimelineSeek",required:!1,type:{name:"((seekTime: number, seekFrameIndex?: number) => void)"}},onTimelineCaptured:{defaultValue:null,description:"",name:"onTimelineCaptured",required:!1,type:{name:"((captured: boolean) => void)"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"((e: any) => void)"}},themeColor:{defaultValue:{value:"red"},description:"",name:"themeColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/Timeline/index.tsx#Timeline"]={docgenInfo:Timeline.__docgenInfo,name:"Timeline",path:"src/component/core/Timeline/index.tsx#Timeline"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__(3);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Timeline"};var Timeline_stories_Default=function Default(){var _useState2=_slicedToArray(Object(react.useState)(.25),2),currentTime=_useState2[0],setCurrentTime=_useState2[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:1,onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_Default.displayName="Default";var Timeline_stories_UseFrames=function UseFrames(){var _useState4=_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState4[0],setCurrentTime=_useState4[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,110],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_UseFrames.displayName="UseFrames";var Timeline_stories_WithPlayControls=function WithPlayControls(){var _useState6=_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState6[0],setCurrentTime=_useState6[1],_useState8=_slicedToArray(Object(react.useState)(!0),2),playing=_useState8[0],setPlaying=_useState8[1],_useState10=_slicedToArray(Object(react.useState)(0),2),loopTypeIndex=_useState10[0],setLoopTypeIndex=_useState10[1],playDeck=Object(jsx_runtime.jsx)(PlayDeck.b,{playing:playing,onPlay:function onPlay(){setPlaying((function(p){return!p}))},onSkipNext:function onSkipNext(){console.log("Play Next")},onSkipPrev:function onSkipPrev(){console.log("Play Previous")},loopType:PlayDeck.a[loopTypeIndex],onToggleLoop:function onToggleLoop(){setLoopTypeIndex((loopTypeIndex+1)%PlayDeck.a.length)}});return Object(jsx_runtime.jsx)("div",{id:"mainWindow",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsxs)("div",{id:"playControlPanel",style:{position:"relative",width:"100%"},children:[Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,148],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}}),playDeck]})})};Timeline_stories_WithPlayControls.displayName="WithPlayControls",Timeline_stories_Default.parameters={layout:"fullscreen"},Timeline_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.25);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline currentTime={currentTime} duration={1} onTimelineSeek={handleTimelineSeek} />\n    </div>\n  );\n}"}},Timeline_stories_Default.parameters),Timeline_stories_UseFrames.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline\n        currentTime={currentTime}\n        duration={2}\n        useFrameDisplay={true}\n        frameRange={[101, 110]}\n        onTimelineSeek={handleTimelineSeek}\n      />\n    </div>\n  );\n}"}},Timeline_stories_UseFrames.parameters),Timeline_stories_WithPlayControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n  const [playing, setPlaying] = useState(true);\n\n  const [loopTypeIndex, setLoopTypeIndex] = useState<number>(0);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  const playDeck = (\n    <PlayDeck\n      playing={playing}\n      onPlay={() => {\n        setPlaying((p) => !p);\n      }}\n      onSkipNext={() => {\n        console.log('Play Next');\n      }}\n      onSkipPrev={() => {\n        console.log('Play Previous');\n      }}\n      loopType={LOOP_TYPE_LIST[loopTypeIndex]}\n      onToggleLoop={() => {\n        setLoopTypeIndex((loopTypeIndex + 1) % LOOP_TYPE_LIST.length);\n      }}\n    />\n  );\n\n  return (\n    <div\n      id=\"mainWindow\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <div id=\"playControlPanel\" style={{ position: 'relative', width: '100%' }}>\n        <Timeline\n          currentTime={currentTime}\n          duration={2}\n          useFrameDisplay={true}\n          frameRange={[101, 148]}\n          onTimelineSeek={handleTimelineSeek}\n        />\n        {playDeck}\n      </div>\n    </div>\n  );\n}"}},Timeline_stories_WithPlayControls.parameters)},541:function(module,exports,__webpack_require__){__webpack_require__(542),__webpack_require__(700),__webpack_require__(701),__webpack_require__(949),__webpack_require__(950),__webpack_require__(893),__webpack_require__(956),__webpack_require__(955),__webpack_require__(952),__webpack_require__(957),__webpack_require__(953),__webpack_require__(954),__webpack_require__(958),module.exports=__webpack_require__(907)},57:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULT_UI_ATTRS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_CANVAS_ATTRS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_SELECTION_CONFIG})),__webpack_require__.d(__webpack_exports__,"d",(function(){return FabricObjectDefaults})),__webpack_require__.d(__webpack_exports__,"e",(function(){return HAS_ROTATE_HANDLE}));var DEFAULT_UI_ATTRS={mode:"selection",shape:"Rect",fontSize:12,color:"blue",strokeWidth:3,fontFamily:"Times New Roman"},DEFAULT_CANVAS_ATTRS={uniformScaling:!1,preserveObjectStacking:!0,targetFindTolerance:10},DEFAULT_SELECTION_CONFIG={perPixelSelection:!1,selectionColor:"Azure",hoverBoundingBox:!0},FabricObjectDefaults={noScaleCache:!1,strokeUniform:!0},HAS_ROTATE_HANDLE=!0},58:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return artUrls})),__webpack_require__.d(__webpack_exports__,"b",(function(){return mediaSamplesWithLabel}));__webpack_require__(54),__webpack_require__(10);var artUrls=["https://upload.wikimedia.org/wikipedia/commons/9/9c/Claude_Monet_-_Nymph%C3%A9as%2C_effet_du_soir_W1504_-_Mus%C3%A9e_Marmottan-Monet.jpg","https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Tsunami_by_hokusai_19th_century.jpg/1024px-Tsunami_by_hokusai_19th_century.jpg"],mediaSamplesWithLabel=[{provider_name:"Vimeo",type:"video",url:"https://vimeo.com/channels/staffpicks/539430817",width:640,height:360,thumbnail_url:"https://i.vimeocdn.com/video/1116774666_640.jpg",title:"The Pitch Song",author_url:"https://vimeo.com/giantant",duration:94.59},{provider_name:"YouTube",type:"video",url:"https://www.youtube.com/watch?v=KMX_FuOLoCI",width:200,height:150,duration:56.121,thumbnail_url:"https://i.ytimg.com/vi/KMX_FuOLoCI/hqdefault.jpg",title:"Steve Jobs Makes Fun of DOS in 1992",author_url:"https://www.youtube.com/c/AriWeinstein"},{provider_name:"YouTube",type:"video",url:"https://www.youtube.com/watch?v=-SGrRkUP0b0",width:200,height:113,duration:583.521,thumbnail_url:"https://i.ytimg.com/vi/-SGrRkUP0b0/hqdefault.jpg",title:"NETS at RAPTORS | FULL GAME HIGHLIGHTS | April 27, 2021",author_url:"https://www.youtube.com/c/AriWeinstein"},{provider_name:"",type:"video",url:"https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/720/Big_Buck_Bunny_720_10s_2MB.mp4",title:"Big_Buck_Bunny_720_10s_2MB.mp4",width:1280,height:720,duration:10},{provider_name:"SoundCloud",type:"audio",url:"https://soundcloud.com/miami-nights-1984/accelerated",width:800,height:450,duration:236.43,title:"MIAMI NIGHTS 1984"},{provider_name:"",type:"video",url:"https://cdn.videvo.net/videvo_files/video/free/2019-02/small_watermarked/181004_10_LABORATORIES-SCIENCE_12_preview.webm",title:"181004_10_LABORATORIES-SCIENCE_12_preview.webm",width:428,height:240,duration:8.563}].reduce((function(a,c){return a.push(Object.assign({},c,{label:c.title})),a}),[])},609:function(module,exports){},701:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(382)},907:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(382).configure)([__webpack_require__(908),__webpack_require__(909),__webpack_require__(947),__webpack_require__(948)],module,!1)}).call(this,__webpack_require__(183)(module))},908:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=908},909:function(module,exports,__webpack_require__){var map={"./stories/component/AnnotateCanvas.stories.tsx":486,"./stories/component/MediaPlayer.stories.tsx":478,"./stories/component/PanZoomPinch.stories.tsx":483,"./stories/component/StopWatch.stories.tsx":487,"./stories/component/Timeline.stories.tsx":488};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=909},914:function(module,exports){},915:function(module,exports){},916:function(module,exports){},939:function(module,exports,__webpack_require__){var api=__webpack_require__(327),content=__webpack_require__(940);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},940:function(module,exports,__webpack_require__){(exports=__webpack_require__(328)(!1)).push([module.i,"/*\n.playDeck .MuiSvgIcon-root {\n  fill: #fff;\n  filter: drop-shadow( 2px 2px 4px rgba(0,0,0,0.6));\n}\n\n.playDeck .MuiIconButton-root:hover .MuiSvgIcon-root {\n  filter: drop-shadow( 2px 2px 5px rgba(0,0,0,0.8));\n}\n\n.playDeck  .Mui-disabled  .MuiSvgIcon-root { \n  fill: #fff5;\n}\n */\n",""]),module.exports=exports},942:function(module,exports,__webpack_require__){var api=__webpack_require__(327),content=__webpack_require__(943);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},943:function(module,exports,__webpack_require__){(exports=__webpack_require__(328)(!1)).push([module.i,".timeline {\n  position: relative;\n  display: flex;\n  flex-flow: row nowrap;\n  align-content: space-between;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.timeline__scrollzone {\n  position: absolute;\n  /* width: 100%; */\n  height: 40px;\n  bottom: 0px;\n  cursor: pointer;\n  left: 12px;\n  right: 12px;\n}\n\n.timeline__track {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 4px;\n  /* transform: translateY(-50%); */\n  background-color: rgb(170, 170, 170);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n\n  pointer-events: none;\n  touch-action: none;\n}\n\n.timeline__scrollzone:hover .timeline__track {\n  height: 8px;\n  transition: height 0.25s;\n}\n\n.timeline__track__progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  touch-action: none;\n  /* background-color: indigo; */\n  /* border-right: solid 1px white; */\n}\n\n.timeline__track__playhead {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n\n  -webkit-user-select: none;\n\n     -moz-user-select: none;\n\n      -ms-user-select: none;\n\n          user-select: none;\n  pointer-events: none;\n\n  width: 0px;\n  height: 0px;\n  border-radius: 50%;\n  border-width: 0px;\n  margin: auto;\n\n  transform: translateX(-50%);\n  background: indigo;\n}\n\n.timeline__scrollzone:hover .timeline__track__playhead {\n  height: 16px;\n  width: 16px;\n  transition: width 0.25s;\n  transition: height 0.25s;\n}\n\n\n.timeline__track__playhead__text {\n  font-family: sans-serif;\n  font-size: 12px;\n  position: absolute;\n  top: -1.5em;\n  color: white;\n  transform: translateX(-50%);\n}",""]),module.exports=exports},944:function(module,exports,__webpack_require__){var api=__webpack_require__(327),content=__webpack_require__(945);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},945:function(module,exports,__webpack_require__){(exports=__webpack_require__(328)(!1)).push([module.i,".panzoom_top_container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}\n\n.panzoom_overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}",""]),module.exports=exports},947:function(module,exports,__webpack_require__){var map={"./AnnotateCanvas.stories.tsx":486,"./MediaPlayer.stories.tsx":478,"./PanZoomPinch.stories.tsx":483,"./StopWatch.stories.tsx":487,"./Timeline.stories.tsx":488};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=947},948:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=948},958:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__(20),__webpack_require__(4),__webpack_require__(51),__webpack_require__(467),__webpack_require__(137),__webpack_require__(36),__webpack_require__(905),__webpack_require__(906),__webpack_require__(466);var client_api=__webpack_require__(66),esm=__webpack_require__(6),parameters={controls:{disabled:!0},actions:{disabled:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[541,2,3]]]);