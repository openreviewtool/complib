(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{465:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return AnnotateCanvas_stories_Default}));__webpack_require__(9),__webpack_require__(178),__webpack_require__(4),__webpack_require__(8),__webpack_require__(7),__webpack_require__(17),__webpack_require__(10),__webpack_require__(11),__webpack_require__(14),__webpack_require__(13),__webpack_require__(6),__webpack_require__(26);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(114),fabric=(__webpack_require__(23),__webpack_require__(120),__webpack_require__(93)),v4=(__webpack_require__(59),__webpack_require__(63),__webpack_require__(900),__webpack_require__(50),__webpack_require__(941)),DEFAULT_UI_ATTRS={mode:"draw",shape:"Rect",fontSize:12,color:"blue",strokeWidth:3,fontFamily:"Times New Roman"},DEFAULT_CANVAS_ATTRS={uniformScaling:!1,preserveObjectStacking:!0,targetFindTolerance:10},FabricObjectDefaults={noScaleCache:!1,strokeUniform:!0},baseAttrNames=(__webpack_require__(25),[].concat(["Rect","Circle","Ellipse","Path","Textbox"],["SVG"]),["fill","stroke","strokeWidth"]),fabricObjAttrsLookup={Rect:[].concat(baseAttrNames,["width","height"]),Circle:[].concat(baseAttrNames,["radius"]),Ellipse:[].concat(baseAttrNames,["rx","ry"]),Textbox:[].concat(baseAttrNames,["text","fontFamily","fontSize","width","height"]),Path:[].concat(baseAttrNames,["path"]),SVG:[]};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var makeFabricObj=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(props){var newFObj,t;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("Textbox"!==props.etype){_context.next=4;break}newFObj=new fabric.fabric.Textbox("text",Object.assign({text:"Enter text...",fontFamily:"Times New Roman"},FabricObjectDefaults,props)),_context.next=21;break;case 4:if("Path"!==props.etype){_context.next=8;break}newFObj=new fabric.fabric.Path(props.path,Object.assign({strokeLineCap:"round"},FabricObjectDefaults,props)),_context.next=21;break;case 8:if("Rect"!==props.etype){_context.next=12;break}newFObj=new fabric.fabric.Rect(Object.assign({},FabricObjectDefaults,props)),_context.next=21;break;case 12:if("Circle"!==props.etype){_context.next=16;break}newFObj=new fabric.fabric.Circle(Object.assign({},FabricObjectDefaults,props)),_context.next=21;break;case 16:if("Ellipse"!==props.etype){_context.next=20;break}newFObj=new fabric.fabric.Ellipse(Object.assign({},FabricObjectDefaults,props)),_context.next=21;break;case 20:throw Error('Failed to deserialize element of unsupported type "'+props.etype+'".');case 21:return props.transformMatrix&&(t=fabric.fabric.util.qrDecompose(props.transformMatrix),newFObj.set(t),newFObj.setPositionByOrigin({x:t.translateX,y:t.translateY},"center","center")),newFObj.setCoords(),newFObj.on("mouseover",(function(){this._renderControls(this.canvas.contextTop,{hasControls:!1})})),newFObj.on("mousedown",(function(){this.canvas.clearContext(this.canvas.contextTop)})),newFObj.on("mouseout",(function(){this.canvas.clearContext(this.canvas.contextTop)})),_context.abrupt("return",newFObj);case 27:case"end":return _context.stop()}}),_callee)})));return function makeFabricObj(_x){return _ref.apply(this,arguments)}}(),SHAPES=["Ellipse","Rect","Circle","Triangle","Textbox"];var AnnotateCanvas_useDrawShapeHandler=function useDrawShapeHandler(fabricCanvasRef,uiState,onAddElement){var uiStateRef=react_default.a.useRef(uiState);react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;fcanvas.on("mouse:down",draw_shape_handle_pointer_down),fcanvas.on("mouse:move",draw_shape_handle_pointer_move),fcanvas.on("mouse:up",draw_shape_handle_pointer_up),fcanvas.on("path:created",handle_path_created),fcanvas.defaultCursor="crosshair"}),[]),react_default.a.useEffect((function(){uiStateRef.current=uiState}),[uiState]);var handle_path_created=function handle_path_created(meta){var k,fObj=meta.path;for(k in FabricObjectDefaults)fObj.set(k,FabricObjectDefaults[k]);null==onAddElement||onAddElement("Path",fObj)};react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;if(uiState.mode){!function setPathDrawing(fcanvas,uiState){fcanvas.isDrawingMode="draw"===uiState.mode&&"Path"===uiState.shape;var brush=fcanvas.freeDrawingBrush;brush.width=uiState.strokeWidth||1,brush.color=uiState.color||"#fff",fcanvas.freeDrawingBrush=brush}(fcanvas,uiState);var isDrawingMode="draw"===uiState.mode;fcanvas.selection=!isDrawingMode,fcanvas.defaultCursor=isDrawingMode?"crosshair":"",fcanvas.skipTargetFind=isDrawingMode}}),[uiState.mode,uiState.shape,uiState.shape]);var currentShapeDrawnRef=react_default.a.useRef(null),draw_shape_handle_pointer_down=Object(react.useCallback)((function(opt){var _uiStateRef$current,_uiStateRef$current2;if("draw"===(null===(_uiStateRef$current=uiStateRef.current)||void 0===_uiStateRef$current?void 0:_uiStateRef$current.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current2=uiStateRef.current)||void 0===_uiStateRef$current2?void 0:_uiStateRef$current2.shape)){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_ref=[pointer.x,pointer.y],originX=_ref[0],originY=_ref[1],newElementDefaults=function getElementPropsFromUiState(uiState){var shape=uiState.shape;return Object.assign({},uiState,{etype:shape,fill:-1!==["Textbox","SVG"].indexOf(shape)?uiState.color:"",stroke:-1!==["Textbox","SVG"].indexOf(shape)?"":uiState.color,strokeWidth:-1!==["Textbox"].indexOf(shape)?0:uiState.strokeWidth})}(uiStateRef.current);makeFabricObj(Object.assign({},newElementDefaults,{transformMatrix:[1,0,0,1,originX,originY]})).then((function(shape){fcanvas.add(shape),currentShapeDrawnRef.current={etype:newElementDefaults.etype,originX:originX,originY:originY,fabObj:shape}}))}}),[]),draw_shape_handle_pointer_move=Object(react.useCallback)((function(opt){var _uiStateRef$current3,_uiStateRef$current4,isDrawinShape="draw"===(null===(_uiStateRef$current3=uiStateRef.current)||void 0===_uiStateRef$current3?void 0:_uiStateRef$current3.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current4=uiStateRef.current)||void 0===_uiStateRef$current4?void 0:_uiStateRef$current4.shape);if(null!==currentShapeDrawnRef.current&&isDrawinShape){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_currentShapeDrawnRef=currentShapeDrawnRef.current,originX=_currentShapeDrawnRef.originX,originY=_currentShapeDrawnRef.originY,fabObj=currentShapeDrawnRef.current.fabObj;-1!==SHAPES.indexOf(fabObj.etype)?fabObj.set({left:Math.min(originX,pointer.x),top:Math.min(originY,pointer.y)}):fabObj.set({left:pointer.x,top:pointer.y}),"Ellipse"===fabObj.etype?(fabObj.set({rx:Math.abs(originX-pointer.x)/2}),fabObj.set({ry:Math.abs(originY-pointer.y)/2})):"Rect"===fabObj.etype&&(fabObj.set({width:Math.abs(originX-pointer.x)}),fabObj.set({height:Math.abs(originY-pointer.y)})),fcanvas.renderAll()}}),[]),draw_shape_handle_pointer_up=Object(react.useCallback)((function(_opt){var _uiStateRef$current5,_uiStateRef$current6,isDrawinShape="draw"===(null===(_uiStateRef$current5=uiStateRef.current)||void 0===_uiStateRef$current5?void 0:_uiStateRef$current5.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current6=uiStateRef.current)||void 0===_uiStateRef$current6?void 0:_uiStateRef$current6.shape),fcanvas=fabricCanvasRef.current;if(null!==currentShapeDrawnRef.current&&isDrawinShape){var newShape=currentShapeDrawnRef.current;-1!==SHAPES.indexOf(newShape.etype)&&(newShape.fabObj.width<4||newShape.fabObj.height<4)?null==fcanvas||fcanvas.remove(newShape.fabObj):(null==onAddElement||onAddElement(newShape.etype,newShape.fabObj),fcanvas.setActiveObject(newShape.fabObj),fcanvas.requestRenderAll()),currentShapeDrawnRef.current=null}}),[])};__webpack_require__(148),__webpack_require__(36);function useCustomSelectCorners(fabricCanvasRef){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",handle_selection_created),fabricCanvasRef.current.on("selection:updated",handle_selection_created)}),[]);var handle_selection_created=function handle_selection_created(event){if(event.target){var fObj=event.target;if(setSelectionControls(event.target,fObj.etype),event.target.hasOwnProperty("_objects"))fObj._objects.forEach((function(s){return setSelectionControls(s,s.etype)}))}}}var setSelectionControls=function setSelectionControls(newElement,elementType){newElement.cornerStyle="circle",newElement.cornerStrokeColor="white",newElement.cornerSize=10,newElement.borderDashArray=[5,5],newElement.borderColor="Pink","Textbox"===elementType&&(newElement.setControlVisible("tl",!1),newElement.setControlVisible("mt",!1),newElement.setControlVisible("tr",!1),newElement.setControlVisible("bl",!1),newElement.setControlVisible("mb",!1),newElement.setControlVisible("br",!1))},AnnotateCanvas_useCustomSelectCorners=useCustomSelectCorners;try{useCustomSelectCorners.displayName="useCustomSelectCorners",useCustomSelectCorners.__docgenInfo={description:"",displayName:"useCustomSelectCorners",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/useCustomSelectCorners.tsx#useCustomSelectCorners"]={docgenInfo:useCustomSelectCorners.__docgenInfo,name:"useCustomSelectCorners",path:"src/component/core/AnnotateCanvas/useCustomSelectCorners.tsx#useCustomSelectCorners"})}catch(__react_docgen_typescript_loader_error){}var AnnotateCanvas_useModifyHandler=function useModifyHandler(fabricCanvasRef,onChangeElement){react_default.a.useEffect((function(){fabricCanvasRef.current.on("object:modified",handle_object_modified)}),[]);var handle_object_modified=function handle_object_modified(event){event.target&&(event.target.hasOwnProperty("_objects")?event.target._objects:[event.target]).forEach((function(obj){if(onChangeElement){var updates={transformMatrix:obj.calcTransformMatrix()},fObj=obj;"Textbox"===fObj.etype&&(updates.text=fObj.text,updates.width=fObj.width),onChangeElement(Object.assign({id:fObj.id},updates))}}))}};__webpack_require__(27);var AnnotateCanvas_useSyncSelection=function useSyncSelection(fabricCanvasRef,onSelection){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",(function(event){handle_selection_change(event.selected)})),fabricCanvasRef.current.on("selection:updated",(function(event){handle_selection_change(event.selected,event.deselected)})),fabricCanvasRef.current.on("selection:cleared",(function(event){handle_selection_change(event.selected,event.deselected)}))}),[]);var handle_selection_change=function handle_selection_change(added,removed){var s=fabricCanvasRef.current.getActiveObjects().map((function(e){return e.id})),a=null==added?void 0:added.map((function(e){return e.id})),r=null==removed?void 0:removed.map((function(e){return e.id}));onSelection&&onSelection(s,a||[],r||[])}};var jsx_runtime=__webpack_require__(21),_excluded=["width","height","backgroundColor","attrs"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var FabricCanvas_FabricCanvas=function FabricCanvas(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"LightSteelBlue":_ref$backgroundColor,_ref$attrs=_ref.attrs,attrs=void 0===_ref$attrs?DEFAULT_CANVAS_ATTRS:_ref$attrs,props=_objectWithoutProperties(_ref,_excluded),nativeCanvasRef=react_default.a.useRef(null);return react_default.a.useEffect((function(){props.fabricCanvasRef.current.setWidth(width),props.fabricCanvasRef.current.setHeight(height)}),[width,height]),react_default.a.useEffect((function(){props.fabricCanvasRef.current.backgroundColor=backgroundColor}),[backgroundColor]),Object(react.useEffect)((function(){return null!==nativeCanvasRef.current&&(props.fabricCanvasRef.current=new fabric.fabric.Canvas(nativeCanvasRef.current.id,Object.assign({width:width,height:height,backgroundColor:backgroundColor},attrs))),function(){var _props$fabricCanvasRe;null===(_props$fabricCanvasRe=props.fabricCanvasRef.current)||void 0===_props$fabricCanvasRe||_props$fabricCanvasRe.dispose()}}),[]),Object(jsx_runtime.jsx)("canvas",{ref:nativeCanvasRef,id:"canvas_"+Object(v4.a)()})};FabricCanvas_FabricCanvas.displayName="FabricCanvas";var AnnotateCanvas_FabricCanvas=FabricCanvas_FabricCanvas;try{FabricCanvas_FabricCanvas.displayName="FabricCanvas",FabricCanvas_FabricCanvas.__docgenInfo={description:"",displayName:"FabricCanvas",props:{fabricCanvasRef:{defaultValue:null,description:"",name:"fabricCanvasRef",required:!0,type:{name:"MutableRefObject<Canvas>"}},width:{defaultValue:{value:"100"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"100"},description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:{value:"LightSteelBlue"},description:"",name:"backgroundColor",required:!1,type:{name:"string"}},attrs:{defaultValue:{value:"{\n  uniformScaling: false,\n  preserveObjectStacking: true,\n  targetFindTolerance: 10,\n  // note: currently, canvas group selection only the selection rect with shape bounds.\n  // ref: https://github.com/fabricjs/fabric.js/issues/3773\n  // So next best thing is to require user's selection rect to contain the entire object.\n  // selectionFullyContained: true,\n}"},description:"",name:"attrs",required:!1,type:{name:"Record<string, string | number | boolean>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"]={docgenInfo:FabricCanvas_FabricCanvas.__docgenInfo,name:"FabricCanvas",path:"src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"})}catch(__react_docgen_typescript_loader_error){}var AnnotateCanvas_useRedrawElements=function useRedrawElements(fabricCanvasRef,backgroundColor,elements,redrawOnModify){var redrawCanvas=function redrawCanvas(fCanvas){fCanvas.clear(),fCanvas.backgroundColor=backgroundColor,elements.forEach((function(ele){makeFabricObj(ele).then((function(shape){fCanvas.add(shape),ele.fabricObj=shape}))}))};Object(react.useEffect)((function(){redrawOnModify&&redrawCanvas(fabricCanvasRef.current)}),[elements]),Object(react.useEffect)((function(){redrawOnModify||redrawCanvas(fabricCanvasRef.current)}),[])},AnnotateCanvas_excluded=["elements","selection","width","height","backgroundColor","clearOnElementModify","uiState","selectionConfig","debugLogging"];function AnnotateCanvas_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AnnotateCanvas_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var AnnotateCanvas_AnnotateCanvas=function AnnotateCanvas(_ref){var _ref$elements=_ref.elements,elements=void 0===_ref$elements?[]:_ref$elements,_ref$selection=_ref.selection,selection=void 0===_ref$selection?[]:_ref$selection,_ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"":_ref$backgroundColor,_ref$clearOnElementMo=_ref.clearOnElementModify,clearOnElementModify=void 0!==_ref$clearOnElementMo&&_ref$clearOnElementMo,_ref$uiState=_ref.uiState,uiState=void 0===_ref$uiState?DEFAULT_UI_ATTRS:_ref$uiState,_ref$debugLogging=(_ref.selectionConfig,_ref.debugLogging),debugLogging=void 0!==_ref$debugLogging&&_ref$debugLogging,props=AnnotateCanvas_objectWithoutProperties(_ref,AnnotateCanvas_excluded),fabricCanvasRef=react_default.a.useRef(new fabric.fabric.Canvas(""));return AnnotateCanvas_useRedrawElements(fabricCanvasRef,backgroundColor,elements,clearOnElementModify),AnnotateCanvas_useSyncSelection(fabricCanvasRef,props.onSelection),AnnotateCanvas_useCustomSelectCorners(fabricCanvasRef),AnnotateCanvas_useDrawShapeHandler(fabricCanvasRef,uiState,props.onAddElement),AnnotateCanvas_useModifyHandler(fabricCanvasRef,props.onChangeElement),function useApplyAttrsToSelection(canvasRef,uiState,selectedIds,elements,onChangeElement){var updateSelectedElement=function updateSelectedElement(key,value){elements.forEach((function(element){if(-1!==selectedIds.indexOf(element.id)){var _onChangeElement,etype=element.etype,adjKey=key;if("Textbox"===etype&&"strokeWidth"===key)return;"color"===key&&(adjKey="Textbox"===etype?"fill":"stroke"),element.fabricObj&&element.fabricObj.set(adjKey,value),onChangeElement&&onChangeElement(((_onChangeElement={id:element.id})[adjKey]=value,_onChangeElement))}})),canvasRef.current.renderAll()};Object(react.useEffect)((function(){return updateSelectedElement("fontSize",uiState.fontSize)}),[uiState.fontSize]),Object(react.useEffect)((function(){return updateSelectedElement("strokeWidth",uiState.strokeWidth)}),[uiState.strokeWidth]),Object(react.useEffect)((function(){return updateSelectedElement("color",uiState.color)}),[uiState.color])}(fabricCanvasRef,uiState,selection,elements,props.onChangeElement),function useCanvasDebugger(on,elements,selection){react_default.a.useEffect((function(){if(on){console.log("All elements: ",elements),console.log("All selections: ",selection);var elementSelection=elements.filter((function(e){return-1!==selection.indexOf(e.id)}));elementSelection.length&&console.log("Selected: ",function getUiStateFromElement(element){var uiState={shape:element.etype};return-1!==["Textbox"].indexOf(element.etype)&&(uiState.color=element.fill,uiState.fontSize=element.fontSize,uiState.fontFamily=element.fontFamily),-1!=["Rect","Circle","Triangle","Ellipse","Path"].indexOf(element.etype)&&(uiState.strokeWidth=element.strokeWidth,uiState.color=element.stroke),uiState}(elementSelection[0]))}}),[elements,selection])}(debugLogging,elements,selection),Object(jsx_runtime.jsx)(AnnotateCanvas_FabricCanvas,{fabricCanvasRef:fabricCanvasRef,width:width,height:height,backgroundColor:backgroundColor})};AnnotateCanvas_AnnotateCanvas.displayName="AnnotateCanvas";var core_AnnotateCanvas=AnnotateCanvas_AnnotateCanvas;try{AnnotateCanvas_AnnotateCanvas.displayName="AnnotateCanvas",AnnotateCanvas_AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{elements:{defaultValue:{value:"[]"},description:"",name:"elements",required:!1,type:{name:"AnnotateElement[]"}},selection:{defaultValue:{value:"[]"},description:"",name:"selection",required:!1,type:{name:"string[]"}},width:{defaultValue:{value:"100"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"100"},description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:{value:""},description:"",name:"backgroundColor",required:!1,type:{name:"string"}},clearOnElementModify:{defaultValue:{value:"false"},description:"",name:"clearOnElementModify",required:!1,type:{name:"boolean"}},onAddElement:{defaultValue:null,description:"",name:"onAddElement",required:!1,type:{name:"((etype: AnnotateElementType, element: Object) => void)"}},onChangeElement:{defaultValue:null,description:"",name:"onChangeElement",required:!1,type:{name:"((element: Partial<AnnotateElement>) => void)"}},onSelection:{defaultValue:null,description:"",name:"onSelection",required:!1,type:{name:"((selected: string[], added: string[], removed: string[]) => void)"}},uiState:{defaultValue:{value:"{\n  mode: 'draw',\n  shape: 'Rect',\n  fontSize: 12,\n  color: 'blue',\n  strokeWidth: 3,\n  fontFamily: 'Times New Roman',\n}"},description:"",name:"uiState",required:!1,type:{name:"UserControllerInputs"}},selectionConfig:{defaultValue:{value:"{\n  perPixelSelection: false,\n  selectionColor: 'MintCream',\n  hoverBoundingBox: true,\n}"},description:"",name:"selectionConfig",required:!1,type:{name:"UserSelectionConfig"}},debugLogging:{defaultValue:{value:"false"},description:"",name:"debugLogging",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"]={docgenInfo:AnnotateCanvas_AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(903),__webpack_require__(310);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function elementsActionReducer(state,action){switch(action.type){case"addElement":if(!action.newElement.id)throw Error("Unexpected add element with no new id: "+action.newElement);return[].concat(_toConsumableArray(state),[action.newElement]);case"changeElement":return state.map((function(element){return element.id===action.elementUpdates.id?Object.assign({},element,action.elementUpdates):element}));case"removeElement":var removeIndex=state.reduce((function(a,c,index){return-1!==action.removeIds.indexOf(c.id)&&a.push(index),a}),[]),updatedElements=_toConsumableArray(state);return removeIndex.reverse().forEach((function(removeIndex){updatedElements.splice(removeIndex,1)})),updatedElements}}var sampleRectElement={id:"rect1_id",etype:"Rect",transformMatrix:[1,0,0,1,100,100],fill:"",stroke:"pink",strokeWidth:3,width:100,height:100},sampleAnnotations=[sampleRectElement,Object.assign({},sampleRectElement,{id:"rect2_id",stroke:"Indigo",transformMatrix:[1,0,0,1,180,140],width:150,height:100}),{id:"circle_id",etype:"Circle",transformMatrix:[1,0,0,1,50,50],radius:30,fill:"",stroke:"MediumSeaGreen",strokeWidth:5},{id:"textbox_id",etype:"Textbox",transformMatrix:[1,0,0,1,200,200],text:"hello, world!",fontSize:25,fontFamily:"Times New Roman",fill:"rgba(255,255,122,0.8)",width:200},{id:"path_id",etype:"Path",transformMatrix:[1,0,0,1,200,200],stroke:"DodgerBlue",strokeWidth:3,fill:"",path:"M 0 0 L 200 100 L 170 200 z"}];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AnnotateCanvas_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AnnotateCanvas_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AnnotateCanvas_stories_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AnnotateCanvas_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AnnotateCanvas_stories_Default=function Default(){var shapeKnob=Object(dist.optionsKnob)("Shape",{Ellipse:"Ellipse",Rect:"Rect",Textbox:"Textbox",Path:"Path"},"Rect",{display:"inline-radio"}),canvasModeKnob=Object(dist.optionsKnob)("Canvas Mode",{draw:"draw",selection:"selection"},"draw",{display:"inline-radio"}),fontSizeKnob=Object(dist.number)("Attr/Font Size",12,{range:!0,min:6,max:50,step:1}),colorKnob=Object(dist.color)("Stroke","#11ff33"),strokeWidthKnob=Object(dist.number)("Stroke Width",3,{range:!0,min:1,max:10,step:1}),_useState2=_slicedToArray(Object(react.useState)([]),2),selection=_useState2[0],setSelection=_useState2[1],_React$useReducer2=_slicedToArray(react_default.a.useReducer(elementsActionReducer,sampleAnnotations),2),elementsState=_React$useReducer2[0],elementsDispatcher=_React$useReducer2[1],uiState={mode:canvasModeKnob,shape:shapeKnob,fontSize:fontSizeKnob,color:colorKnob,strokeWidth:strokeWidthKnob,fontFamily:"Times New Roman"};return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:elementsState,selection:selection,uiState:uiState,width:480,height:480,backgroundColor:"SlateGray",onChangeElement:function onChangeElement(elementUpdates){return elementsDispatcher({type:"changeElement",elementUpdates:elementUpdates})},onAddElement:function onAddElement(etype,newThing){var newElement=function makeElement(etype,fObj){var element=fabricObjAttrsLookup[etype].reduce((function(p,c){return p[c]=fObj[c],p}),{});return element.transformMatrix=fObj.calcTransformMatrix(),Object.assign({etype:etype,id:Object(v4.a)()},element)}(etype,newThing);elementsDispatcher({type:"addElement",newElement:newElement})},onSelection:function onSelection(selection){setSelection(selection)}})})};AnnotateCanvas_stories_Default.displayName="Default";__webpack_exports__.default={title:"AnnotateCanvas"};AnnotateCanvas_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const shapeKnob = optionsKnob(\n    'Shape',\n    {\n      Ellipse: 'Ellipse',\n      Rect: 'Rect',\n      Textbox: 'Textbox',\n      Path: 'Path',\n    },\n    'Rect',\n    { display: 'inline-radio' },\n  );\n  const canvasModeKnob = optionsKnob(\n    'Canvas Mode',\n    { draw: 'draw', selection: 'selection'},\n    'draw',\n    { display: 'inline-radio' },\n  );\n  const fontSizeKnob = number('Attr/Font Size', 12, {\n    range: true,\n    min: 6,\n    max: 50,\n    step: 1,\n  });\n  const colorKnob = color('Stroke', '#11ff33');\n  const strokeWidthKnob = number('Stroke Width', 3, {\n    range: true,\n    min: 1,\n    max: 10,\n    step: 1,\n  });\n\n  const [selection, setSelection] = useState<string[]>([]);\n  const [elementsState, elementsDispatcher] = React.useReducer(\n    elementsActionReducer,\n    sampleAnnotations,\n  );\n\n  const uiState: UserControllerInputs = {\n    mode: canvasModeKnob,\n    shape: shapeKnob,\n    fontSize: fontSizeKnob,\n    color: colorKnob,\n    strokeWidth: strokeWidthKnob,\n    fontFamily: 'Times New Roman',\n  };\n\n  return (\n    <div>\n      <AnnotateCanvas\n        elements={elementsState}\n        selection={selection}\n        uiState={uiState}\n        width={480}\n        height={480}\n        backgroundColor={'SlateGray'}\n        onChangeElement={(elementUpdates) =>\n          elementsDispatcher({ type: 'changeElement', elementUpdates })\n        }\n        onAddElement={(etype, newThing) => {\n          const newElement = makeElement(etype, newThing);\n          elementsDispatcher({ type: 'addElement', newElement });\n        }}\n        onSelection={(selection) => {\n          setSelection(selection);\n        }}\n      />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_Default.parameters)},470:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Timeline_stories_Default})),__webpack_require__.d(__webpack_exports__,"UseFrames",(function(){return Timeline_stories_UseFrames})),__webpack_require__.d(__webpack_exports__,"WithPlayControls",(function(){return Timeline_stories_WithPlayControls}));__webpack_require__(9),__webpack_require__(178),__webpack_require__(4),__webpack_require__(8),__webpack_require__(7),__webpack_require__(17),__webpack_require__(10),__webpack_require__(11),__webpack_require__(14),__webpack_require__(13),__webpack_require__(6),__webpack_require__(26);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),PlayArrow=(__webpack_require__(23),__webpack_require__(120),__webpack_require__(495)),PlayArrow_default=__webpack_require__.n(PlayArrow),Pause=__webpack_require__(494),Pause_default=__webpack_require__.n(Pause),SkipNext=__webpack_require__(496),SkipNext_default=__webpack_require__.n(SkipNext),SkipPrevious=__webpack_require__(493),SkipPrevious_default=__webpack_require__.n(SkipPrevious),Loop=__webpack_require__(499),Loop_default=__webpack_require__.n(Loop),IconButton=__webpack_require__(940),Badge=__webpack_require__(942),jsx_runtime=(__webpack_require__(905),__webpack_require__(21)),_excluded=["disablePrev","disableNext","themeColor"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var LOOP_TYPE_LIST=["off","loopCurrent","loopAll"],PlayDeck_PlayDeck=function PlayDeck(_ref){var _ref$disablePrev=_ref.disablePrev,disablePrev=void 0!==_ref$disablePrev&&_ref$disablePrev,_ref$disableNext=_ref.disableNext,disableNext=void 0!==_ref$disableNext&&_ref$disableNext,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"indigo":_ref$themeColor,props=_objectWithoutProperties(_ref,_excluded);return Object(jsx_runtime.jsxs)("div",{className:"playDeck",children:[props.onSkipPrev&&Object(jsx_runtime.jsx)(IconButton.a,{size:"medium",onClick:props.onSkipPrev,disabled:disablePrev,children:Object(jsx_runtime.jsx)(SkipPrevious_default.a,{})}),Object(jsx_runtime.jsx)(IconButton.a,{size:"medium",onClick:props.onPlay,children:props.playing?Object(jsx_runtime.jsx)(Pause_default.a,{}):Object(jsx_runtime.jsx)(PlayArrow_default.a,{})}),props.onSkipNext&&Object(jsx_runtime.jsx)(IconButton.a,{size:"medium",onClick:props.onSkipNext,disabled:disableNext,children:Object(jsx_runtime.jsx)(SkipNext_default.a,{})}),props.onToggleLoop&&Object(jsx_runtime.jsx)(IconButton.a,{size:"small",onClick:props.onToggleLoop,title:props.loopType,children:Object(jsx_runtime.jsx)(Badge.a,{badgeContent:"loopCurrent"===props.loopType?1:null,style:{color:"off"===props.loopType?void 0:themeColor},children:Object(jsx_runtime.jsx)(Loop_default.a,{style:{fill:"off"===props.loopType?void 0:themeColor}})})})]})};PlayDeck_PlayDeck.displayName="PlayDeck";var ui_PlayDeck=PlayDeck_PlayDeck;try{PlayDeck_PlayDeck.displayName="PlayDeck",PlayDeck_PlayDeck.__docgenInfo={description:"",displayName:"PlayDeck",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},playing:{defaultValue:null,description:"",name:"playing",required:!1,type:{name:"boolean"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},onSkipPrev:{defaultValue:null,description:"",name:"onSkipPrev",required:!1,type:{name:"(() => void)"}},disablePrev:{defaultValue:{value:"false"},description:"",name:"disablePrev",required:!1,type:{name:"boolean"}},onSkipNext:{defaultValue:null,description:"",name:"onSkipNext",required:!1,type:{name:"(() => void)"}},disableNext:{defaultValue:{value:"false"},description:"",name:"disableNext",required:!1,type:{name:"boolean"}},loopType:{defaultValue:null,description:"",name:"loopType",required:!1,type:{name:"enum",value:[{value:'"off"'},{value:'"loopCurrent"'},{value:'"loopAll"'}]}},onToggleLoop:{defaultValue:null,description:"",name:"onToggleLoop",required:!1,type:{name:"(() => void)"}},themeColor:{defaultValue:{value:"indigo"},description:"",name:"themeColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/ui/PlayDeck/index.tsx#PlayDeck"]={docgenInfo:PlayDeck_PlayDeck.__docgenInfo,name:"PlayDeck",path:"src/component/ui/PlayDeck/index.tsx#PlayDeck"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(134),__webpack_require__(462);var classnames=__webpack_require__(500),classnames_default=__webpack_require__.n(classnames),Timeline_excluded=(__webpack_require__(908),["frameRange","useFrameDisplay","themeColor"]);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Timeline_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function Timeline_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var Timeline_Timeline=function Timeline(_ref){var frameRange=_ref.frameRange,_ref$useFrameDisplay=_ref.useFrameDisplay,useFrameDisplay=void 0!==_ref$useFrameDisplay&&_ref$useFrameDisplay,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"indigo":_ref$themeColor,props=Timeline_objectWithoutProperties(_ref,Timeline_excluded),progressDisplayTimeoutRef=Object(react.useRef)(null),timelineRef=react_default.a.createRef(),_useState2=_slicedToArray(Object(react.useState)(!1),2),innerCaptured=_useState2[0],setInnerCaptured=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(0),2),seekPercentage=_useState4[0],setSeekPercentage=_useState4[1],displayPlayPercentage=props.currentTime/props.duration,oneFramePercent=0,frameDuration=-1,frameIndex=-1;if(useFrameDisplay&&frameRange){oneFramePercent=1/(frameDuration=frameRange[1]-frameRange[0]+1),displayPlayPercentage=Math.min(displayPlayPercentage,1-oneFramePercent);var frameElapsed=Math.floor(displayPlayPercentage*frameDuration);frameIndex=frameElapsed+frameRange[0],displayPlayPercentage=Math.min(frameElapsed*oneFramePercent)}innerCaptured&&(displayPlayPercentage=seekPercentage),react_default.a.useEffect((function(){return function(){null!==progressDisplayTimeoutRef.current&&window.clearTimeout(progressDisplayTimeoutRef.current)}}),[]);var handleScrubStart=function handleScrubStart(event){handleScrubMove(event),props.onTimelineCapture&&(props.onTimelineCapture(!0),setInnerCaptured(!0))},handleScrubEnd=function handleScrubEnd(event){handleScrubMoveFinish(event),props.onTimelineCapture&&(props.onTimelineCapture(!1),setInnerCaptured(!1))},handleScrubMove=function handleScrubMove(e){var isPointerEvent=e.type&&e.type.startsWith("pointer"),isPointerMoveEvent=e.type&&"pointermove"===e.type,isPointerDownEvent=e.type&&"pointerdown"===e.type;if(!isPointerMoveEvent||(props.onPointerMove&&props.onPointerMove(e),0!==e.buttons)){e.stopPropagation(),isPointerDownEvent&&e.currentTarget.setPointerCapture(e.pointerId);var bounds=timelineRef.current.getBoundingClientRect(),totalWidth=bounds.width,offset=(isPointerEvent?e.pageX:e.touches[0].clientX)-bounds.left,_seekPercentage=(offset=Math.max(0,Math.min(offset,totalWidth)))/totalWidth;setSeekPercentage(_seekPercentage);var seekTime=_seekPercentage*props.duration,seekFrameIndex=-1;if(props.onTimelineSeek){if(progressDisplayTimeoutRef.current&&(window.clearTimeout(progressDisplayTimeoutRef.current),progressDisplayTimeoutRef.current=null),useFrameDisplay&&frameRange){var _frameDuration=frameRange[1]-frameRange[0]+1;seekFrameIndex=Math.floor(_seekPercentage*_frameDuration+frameRange[0])}progressDisplayTimeoutRef.current=window.setTimeout(props.onTimelineSeek,5,seekTime,seekFrameIndex)}}},handleScrubMoveFinish=function handleScrubMoveFinish(e){e.type&&e.type.startsWith("pointer")&&e.currentTarget.releasePointerCapture(e.pointerId)},playHead=Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",{className:"timeline__track__playhead__text",style:{left:100*(displayPlayPercentage+oneFramePercent)+"%"},children:-1!==frameIndex?frameIndex:""})});return Object(jsx_runtime.jsx)("div",{className:classnames_default()("timeline",props.className),children:Object(jsx_runtime.jsx)("div",{ref:timelineRef,className:"timeline__scrollzone",onPointerMove:handleScrubMove,onTouchMove:handleScrubMove,onPointerDown:handleScrubStart,onTouchStart:handleScrubStart,onPointerUp:handleScrubEnd,onTouchEnd:handleScrubEnd,children:Object(jsx_runtime.jsxs)("div",{className:"timeline__track",children:[Object(jsx_runtime.jsx)("div",{className:"timeline__track__progress",style:{background:themeColor,width:100*(displayPlayPercentage+oneFramePercent)+"%"}}),playHead]})})})};Timeline_Timeline.displayName="Timeline";var core_Timeline=Timeline_Timeline;try{Timeline_Timeline.displayName="Timeline",Timeline_Timeline.__docgenInfo={description:"",displayName:"Timeline",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},currentTime:{defaultValue:null,description:"",name:"currentTime",required:!0,type:{name:"number"}},useFrameDisplay:{defaultValue:{value:"false"},description:"",name:"useFrameDisplay",required:!1,type:{name:"boolean"}},frameRange:{defaultValue:null,description:"",name:"frameRange",required:!1,type:{name:"[number, number]"}},onTimelineSeek:{defaultValue:null,description:"",name:"onTimelineSeek",required:!1,type:{name:"((seekTime: number, seekFrameIndex?: number) => void)"}},onTimelineCapture:{defaultValue:null,description:"",name:"onTimelineCapture",required:!1,type:{name:"((captured: boolean) => void)"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"((e: any) => void)"}},themeColor:{defaultValue:{value:"indigo"},description:"",name:"themeColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/Timeline/index.tsx#Timeline"]={docgenInfo:Timeline_Timeline.__docgenInfo,name:"Timeline",path:"src/component/core/Timeline/index.tsx#Timeline"})}catch(__react_docgen_typescript_loader_error){}function Timeline_stories_slicedToArray(arr,i){return function Timeline_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Timeline_stories_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Timeline_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Timeline_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Timeline_stories_arrayLikeToArray(o,minLen)}(arr,i)||function Timeline_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Timeline_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Timeline"};var Timeline_stories_Default=function Default(){var _useState2=Timeline_stories_slicedToArray(Object(react.useState)(.25),2),currentTime=_useState2[0],setCurrentTime=_useState2[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:1,onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_Default.displayName="Default";var Timeline_stories_UseFrames=function UseFrames(){var _useState4=Timeline_stories_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState4[0],setCurrentTime=_useState4[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,110],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_UseFrames.displayName="UseFrames";var Timeline_stories_WithPlayControls=function WithPlayControls(){var _useState6=Timeline_stories_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState6[0],setCurrentTime=_useState6[1],_useState8=Timeline_stories_slicedToArray(Object(react.useState)(!0),2),playing=_useState8[0],setPlaying=_useState8[1],_useState10=Timeline_stories_slicedToArray(Object(react.useState)(0),2),loopTypeIndex=_useState10[0],setLoopTypeIndex=_useState10[1],playDeck=Object(jsx_runtime.jsx)(ui_PlayDeck,{playing:playing,onPlay:function onPlay(){setPlaying((function(p){return!p}))},onSkipNext:function onSkipNext(){console.log("Play Next")},onSkipPrev:function onSkipPrev(){console.log("Play Previous")},loopType:LOOP_TYPE_LIST[loopTypeIndex],onToggleLoop:function onToggleLoop(){setLoopTypeIndex((loopTypeIndex+1)%LOOP_TYPE_LIST.length)}});return Object(jsx_runtime.jsx)("div",{id:"mainWindow",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsxs)("div",{id:"playControlPanel",style:{position:"relative",width:"100%"},children:[Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,148],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}}),playDeck]})})};Timeline_stories_WithPlayControls.displayName="WithPlayControls",Timeline_stories_Default.parameters={layout:"fullscreen"},Timeline_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.25);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline currentTime={currentTime} duration={1} onTimelineSeek={handleTimelineSeek} />\n    </div>\n  );\n}"}},Timeline_stories_Default.parameters),Timeline_stories_UseFrames.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline\n        currentTime={currentTime}\n        duration={2}\n        useFrameDisplay={true}\n        frameRange={[101, 110]}\n        onTimelineSeek={handleTimelineSeek}\n      />\n    </div>\n  );\n}"}},Timeline_stories_UseFrames.parameters),Timeline_stories_WithPlayControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n  const [playing, setPlaying] = useState(true);\n\n  const [loopTypeIndex, setLoopTypeIndex] = useState<number>(0);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  const playDeck = (\n    <PlayDeck\n      playing={playing}\n      onPlay={() => {\n        setPlaying((p) => !p);\n      }}\n      onSkipNext={() => {\n        console.log('Play Next');\n      }}\n      onSkipPrev={() => {\n        console.log('Play Previous');\n      }}\n      loopType={LOOP_TYPE_LIST[loopTypeIndex]}\n      onToggleLoop={() => {\n        setLoopTypeIndex((loopTypeIndex + 1) % LOOP_TYPE_LIST.length);\n      }}\n    />\n  );\n\n  return (\n    <div\n      id=\"mainWindow\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <div id=\"playControlPanel\" style={{ position: 'relative', width: '100%' }}>\n        <Timeline\n          currentTime={currentTime}\n          duration={2}\n          useFrameDisplay={true}\n          frameRange={[101, 148]}\n          onTimelineSeek={handleTimelineSeek}\n        />\n        {playDeck}\n      </div>\n    </div>\n  );\n}"}},Timeline_stories_WithPlayControls.parameters)},471:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return StopWatch_stories_Default}));__webpack_require__(9);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),jsx_runtime=(__webpack_require__(904),__webpack_require__(462),__webpack_require__(433),__webpack_require__(178),__webpack_require__(4),__webpack_require__(8),__webpack_require__(7),__webpack_require__(17),__webpack_require__(10),__webpack_require__(11),__webpack_require__(14),__webpack_require__(13),__webpack_require__(6),__webpack_require__(26),__webpack_require__(21));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StopWatch_StopWatch=function StopWatch(_ref){var text=_ref.text,color=_ref.color,displayTimeInputRef=_ref.displayTimeInputRef,_React$useState2=_slicedToArray(react_default.a.useState(""),2),displayTime=_React$useState2[0],setDisplayTime=_React$useState2[1],displayTimer=react_default.a.useRef(null),startTime=react_default.a.useRef(null);react_default.a.useEffect((function(){return toggleClock(),function(){null!==displayTimer.current&&window.clearInterval(displayTimer.current)}}),[]);var toggleClock=function toggleClock(){null!==displayTimer.current?(window.clearInterval(displayTimer.current),setDisplayTime("0"),displayTimer.current=null):(startTime.current=new Date,displayTimer.current=window.setInterval((function(){setDisplayTime((((new Date).getTime()-startTime.current.getTime())/1e3).toFixed(2))}),100))};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{style:{color:color},children:text}),Object(jsx_runtime.jsx)("input",{ref:displayTimeInputRef,type:"text",defaultValue:displayTime}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(e){return toggleClock()},children:"0"===displayTime?"Start":"Pause"})]})},core_StopWatch=StopWatch_StopWatch;try{StopWatch_StopWatch.displayName="StopWatch",StopWatch_StopWatch.__docgenInfo={description:"",displayName:"StopWatch",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},displayTimeInputRef:{defaultValue:null,description:"",name:"displayTimeInputRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/StopWatch/index.tsx#StopWatch"]={docgenInfo:StopWatch_StopWatch.__docgenInfo,name:"StopWatch",path:"src/component/core/StopWatch/index.tsx#StopWatch"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__(114),StopWatch_stories_Default=function Default(){var stopWatchTimeDisplayInputRef=react_default.a.createRef();return Object(dist.button)("Tell time using Ref",(function(){var _stopWatchTimeDisplay;alert(null===(_stopWatchTimeDisplay=stopWatchTimeDisplayInputRef.current)||void 0===_stopWatchTimeDisplay?void 0:_stopWatchTimeDisplay.value)})),Object(jsx_runtime.jsx)(core_StopWatch,{displayTimeInputRef:stopWatchTimeDisplayInputRef,text:"hello, world",color:"#00ff00"})};StopWatch_stories_Default.displayName="Default",StopWatch_stories_Default.parameters=Object.assign({storySource:{source:'(): JSX.Element => {\n  const stopWatchTimeDisplayInputRef = React.createRef<HTMLInputElement>();\n\n  button(\'Tell time using Ref\', () => {\n    alert(stopWatchTimeDisplayInputRef.current?.value);\n  });\n\n  return (\n    <StopWatch\n      displayTimeInputRef={stopWatchTimeDisplayInputRef}\n      text="hello, world"\n      color="#00ff00"\n    />\n  );\n}'}},StopWatch_stories_Default.parameters)},523:function(module,exports,__webpack_require__){__webpack_require__(524),__webpack_require__(682),__webpack_require__(683),__webpack_require__(912),__webpack_require__(913),__webpack_require__(876),__webpack_require__(919),__webpack_require__(918),__webpack_require__(915),__webpack_require__(920),__webpack_require__(916),__webpack_require__(917),__webpack_require__(921),module.exports=__webpack_require__(890)},591:function(module,exports){},683:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(367)},890:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(367).configure)([__webpack_require__(891),__webpack_require__(892),__webpack_require__(910),__webpack_require__(911)],module,!1)}).call(this,__webpack_require__(175)(module))},891:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=891},892:function(module,exports,__webpack_require__){var map={"./stories/component/AnnotateCanvas.stories.tsx":465,"./stories/component/StopWatch.stories.tsx":471,"./stories/component/Timeline.stories.tsx":470};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=892},897:function(module,exports){},898:function(module,exports){},899:function(module,exports){},905:function(module,exports,__webpack_require__){var api=__webpack_require__(463),content=__webpack_require__(906);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},906:function(module,exports,__webpack_require__){(exports=__webpack_require__(464)(!1)).push([module.i,".playDeck .MuiSvgIcon-root {\n  fill: #fff;\n  filter: drop-shadow( 2px 2px 4px rgba(0,0,0,0.6));\n}\n\n.playDeck .MuiIconButton-root:hover .MuiSvgIcon-root {\n  filter: drop-shadow( 2px 2px 5px rgba(0,0,0,0.8));\n}\n\n.playDeck  .Mui-disabled  .MuiSvgIcon-root { \n  fill: #fff5;\n}\n\n",""]),module.exports=exports},908:function(module,exports,__webpack_require__){var api=__webpack_require__(463),content=__webpack_require__(909);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},909:function(module,exports,__webpack_require__){(exports=__webpack_require__(464)(!1)).push([module.i,".timeline {\n  position: relative;\n  display: flex;\n  flex-flow: row nowrap;\n  align-content: space-between;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.timeline__scrollzone {\n  position: absolute;\n  /* width: 100%; */\n  height: 40px;\n  bottom: 0px;\n  cursor: pointer;\n  left: 12px;\n  right: 12px;\n}\n\n.timeline__track {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 4px;\n  /* transform: translateY(-50%); */\n  background-color: rgb(170, 170, 170);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n\n  pointer-events: none;\n  touch-action: none;\n}\n\n.timeline__scrollzone:hover .timeline__track {\n  height: 8px;\n  transition: height 0.25s;\n}\n\n.timeline__track__progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  touch-action: none;\n  background-color: indigo;\n  /* border-right: solid 1px white; */\n}\n\n.timeline__track__playhead {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n\n  -webkit-user-select: none;\n\n     -moz-user-select: none;\n\n      -ms-user-select: none;\n\n          user-select: none;\n  pointer-events: none;\n\n  width: 0px;\n  height: 0px;\n  border-radius: 50%;\n  border-width: 0px;\n  margin: auto;\n\n  transform: translateX(-50%);\n  background: indigo;\n}\n\n.timeline__scrollzone:hover .timeline__track__playhead {\n  height: 16px;\n  width: 16px;\n  transition: width 0.25s;\n  transition: height 0.25s;\n}\n\n\n.timeline__track__playhead__text {\n  font-family: sans-serif;\n  font-size: 12px;\n  position: absolute;\n  top: -1.5em;\n  color: white;\n  transform: translateX(-50%);\n}",""]),module.exports=exports},910:function(module,exports,__webpack_require__){var map={"./AnnotateCanvas.stories.tsx":465,"./StopWatch.stories.tsx":471,"./Timeline.stories.tsx":470};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=910},911:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=911},921:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__(23),__webpack_require__(4),__webpack_require__(50),__webpack_require__(451),__webpack_require__(148),__webpack_require__(36),__webpack_require__(888),__webpack_require__(889),__webpack_require__(450);var client_api=__webpack_require__(62),esm=__webpack_require__(5),parameters={controls:{disabled:!0},actions:{disabled:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[523,2,3]]]);