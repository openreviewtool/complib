(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1010:function(module,exports,__webpack_require__){var api=__webpack_require__(268),content=__webpack_require__(1011);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1011:function(module,exports,__webpack_require__){(exports=__webpack_require__(269)(!1)).push([module.i,".panzoom_top_container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}\n\n.panzoom_overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}",""]),module.exports=exports},1019:function(module,exports,__webpack_require__){var api=__webpack_require__(268),content=__webpack_require__(1020);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1020:function(module,exports,__webpack_require__){(exports=__webpack_require__(269)(!1)).push([module.i,".playDeck svg {\n  filter: drop-shadow(2px 2px 2.5px #0007);\n}\n/*\n.playDeck .MuiSvgIcon-root {\n  fill: #fff;\n  filter: drop-shadow( 2px 2px 4px rgba(0,0,0,0.6));\n}\n\n.playDeck .MuiIconButton-root:hover .MuiSvgIcon-root {\n  filter: drop-shadow( 2px 2px 5px rgba(0,0,0,0.8));\n}\n\n.playDeck  .Mui-disabled  .MuiSvgIcon-root { \n  fill: #fff5;\n}\n */\n",""]),module.exports=exports},1021:function(module,exports,__webpack_require__){var api=__webpack_require__(268),content=__webpack_require__(1022);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1022:function(module,exports,__webpack_require__){(exports=__webpack_require__(269)(!1)).push([module.i,".timeline {\n  position: relative;\n  display: flex;\n  flex-flow: row nowrap;\n  align-content: space-between;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.timeline__scrollzone {\n  position: absolute;\n  /* width: 100%; */\n  height: 40px;\n  bottom: 0px;\n  cursor: pointer;\n  left: 12px;\n  right: 12px;\n}\n\n.timeline__track {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 4px;\n  /* transform: translateY(-50%); */\n  /* background-color: rgb(170, 170, 170); */\n  background-color: #bbb;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n\n  pointer-events: none;\n  touch-action: none;\n}\n\n.timeline__scrollzone:hover .timeline__track {\n  height: 8px;\n  transition: height 0.25s;\n}\n\n.timeline__track__progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  touch-action: none;\n  /* background-color: indigo; */\n  /* border-right: solid 1px white; */\n}\n\n.timeline__track__playhead {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n\n  -webkit-user-select: none;\n\n     -moz-user-select: none;\n\n      -ms-user-select: none;\n\n          user-select: none;\n  pointer-events: none;\n\n  width: 0px;\n  height: 0px;\n  border-radius: 50%;\n  border-width: 0px;\n  margin: auto;\n\n  transform: translateX(-50%);\n  background: indigo;\n}\n\n.timeline__scrollzone:hover .timeline__track__playhead {\n  height: 16px;\n  width: 16px;\n  transition: width 0.25s;\n  transition: height 0.25s;\n}\n\n\n.timeline__track__playhead__text {\n  font-family: sans-serif;\n  font-size: 12px;\n  position: absolute;\n  top: -1.5em;\n  color: white;\n  transform: translateX(-50%);\n}\n\n.timeline__track__marker_dot {\n  background: #eeea;\n  border: solid 1px #eeea;\n  bottom: 0px;\n  position: absolute;\n  top: 0px;\n  width: 0px;\n  /* transform: translateX(-50%) */\n}\n\n.timeline__scrollzone:hover .timeline__track__marker_dot {\n  background: #fff;\n  border: solid 1px #fff;\n}\n\n.timeline__track__cache_gauge {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  bottom: 0px;\n  background-color: #999a;\n}\n\n.timeline__scrollzone:hover .timeline__track__cache_gauge {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  bottom: 0px;\n  background-color: #888;\n}",""]),module.exports=exports},1041:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Test2",(function(){return Test2}));__webpack_require__(67),__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(0),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(46),_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(157),_component_core_AnnotateCanvas_AnnotateCanvas__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(158),_testdata_annotationSamples__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(127),_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(75),_component_core_PanZoom_utils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(66),_component_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(144),_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(59),_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(121),_component_core_AnnotateCanvas_defaults__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(48),_component_core_AnnotateCanvas_UI_BrushTools__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(155),_component_core_AnnotateCanvas_UI_EditTools__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(156),_component_core_MediaPlayer_PlayerContext__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(94),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Test2=function Test2(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(0),2),mediaIndex=_useState2[0],setMediaIndex=_useState2[1],mediaKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_14__.select)("Video",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__.c,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__.c[mediaIndex]);Object(react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){var index=_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__.c.reduce((function(a,c,i){return c.label===mediaKnob.label&&(a=i),a}),0);setMediaIndex(index)}),[mediaKnob]);var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(_component_core_AnnotateCanvas_defaults__WEBPACK_IMPORTED_MODULE_23__.d),2),uiState=_useState4[0],setUiState=_useState4[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_utils__WEBPACK_IMPORTED_MODULE_20__.a,{hint:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{children:"for experiment only"}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_MediaPlayer_PlayerContext__WEBPACK_IMPORTED_MODULE_26__.b,{value:{mediaList:_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__.c,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_15__.a,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_18__.a,{render:function render(setContentSize){return Object(react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){setContentSize(_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_21__.c[mediaIndex])}),[mediaIndex]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_22__.c,{})},normalizeRes:1e3}),uiState.showAnnotation&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_18__.c,{render:function render(panZoom,contentSize,containerSize){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_AnnotateCanvas_AnnotateCanvas__WEBPACK_IMPORTED_MODULE_16__.a,{elements:_testdata_annotationSamples__WEBPACK_IMPORTED_MODULE_17__.a,width:containerSize.width,height:containerSize.height,panZoom:Object.assign({},panZoom,{scale:Object(_component_core_PanZoom_utils__WEBPACK_IMPORTED_MODULE_19__.f)(contentSize,panZoom.scale,1e3)}),uiState:uiState,setUiState:setUiState,disabled:"panZoom"===uiState.mode})}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_22__.d,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_22__.a,{})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_AnnotateCanvas_UI_BrushTools__WEBPACK_IMPORTED_MODULE_24__.a,{uiState:uiState,setUIState:setUiState}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_component_core_AnnotateCanvas_UI_EditTools__WEBPACK_IMPORTED_MODULE_25__.a,{uiState:uiState,setUIState:setUiState})]})})})};Test2.displayName="Test2",Test2.parameters={layout:"fullscreen"},Test2.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [mediaIndex, setMediaIndex] = useState(0);\n  const mediaKnob = select('Video', mediaList, mediaList[mediaIndex]);\n\n  useEffect(() => {\n    const index = mediaList.reduce((a, c, i) => {\n      if (c.label === mediaKnob.label) a = i;\n      return a;\n    }, 0);\n    setMediaIndex(index);\n  }, [mediaKnob]);\n\n  const [uiState, setUiState] =\n    useState<UserControllerInputs>(DEFAULT_UI_ATTRS);\n\n  return (\n    <StoryHint hint={<div>for experiment only</div>}>\n      <PlayerContextProvider  \n        value={{ mediaList, mediaIndex, setMediaIndex }}\n      >\n        <div>\n          <PanZoom>\n             {/* disabled={uiState.mode !== 'panZoom'}> */}\n            <PanZoomContent\n              render={(setContentSize) => {\n                useEffect(() => {\n                  setContentSize(mediaList[mediaIndex]);\n                }, [mediaIndex]);\n                return <playerComposer.Player />;\n              }}\n              normalizeRes={1000}\n            />\n            {uiState.showAnnotation && (\n              <PanZoomOverlay\n                render={(panZoom, contentSize, containerSize) => {\n                  return (\n                    <AnnotateCanvas\n                      elements={sampleAnnotations}\n                      width={containerSize.width}\n                      height={containerSize.height}\n                      panZoom={{\n                        ...panZoom,\n                        scale: normalizeScale(contentSize, panZoom.scale, 1000),\n                      }}\n                      uiState={uiState}\n                      setUiState={setUiState}\n                      disabled={uiState.mode === 'panZoom'}\n                    />\n                  );\n                }}\n              />\n            )}\n          </PanZoom>\n          <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\n            <playerComposer.Timeline />\n            <playerComposer.PlayDeck />\n          </div>\n          <BrushTools uiState={uiState} setUIState={setUiState} />\n          <EditTools uiState={uiState} setUIState={setUiState} />\n        </div>\n      </PlayerContextProvider>\n    </StoryHint>\n  );\n}"}},Test2.parameters)},1042:function(module,exports,__webpack_require__){var map={"./AnnotateCanvas.stories.tsx":543,"./CombinedPanzoomAnnotateImage.stories.tsx":534,"./CombinedPanzoomAnnotateOembed.stories.tsx":544,"./MediaPlayer.stories.tsx":537,"./PanZoomPinch.stories.tsx":538,"./StopWatch.stories.tsx":545,"./Timeline.stories.tsx":546};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1042},1043:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=1043},1053:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__(25),__webpack_require__(4),__webpack_require__(54),__webpack_require__(519),__webpack_require__(154),__webpack_require__(43),__webpack_require__(979),__webpack_require__(980),__webpack_require__(518);var client_api=__webpack_require__(88),esm=__webpack_require__(10),parameters={controls:{disabled:!0},actions:{disabled:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))},121:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return playerComposer_Player})),__webpack_require__.d(__webpack_exports__,"d",(function(){return playerComposer_Timeline})),__webpack_require__.d(__webpack_exports__,"a",(function(){return playerComposer_PlayDeck})),__webpack_require__.d(__webpack_exports__,"b",(function(){return playerComposer_PlayDeckWithTimeline}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),MediaAnnotateContext=__webpack_require__(160),utils=__webpack_require__(42),PanZoom=__webpack_require__(75),PanZoom_utils=__webpack_require__(66),core_PlayDeck=__webpack_require__(204).b;try{PlayDeck.displayName="PlayDeck",PlayDeck.__docgenInfo={description:"",displayName:"PlayDeck",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},playing:{defaultValue:null,description:"",name:"playing",required:!1,type:{name:"boolean"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},onSkipPrev:{defaultValue:null,description:"",name:"onSkipPrev",required:!1,type:{name:"(() => void)"}},disablePrev:{defaultValue:{value:"false"},description:"",name:"disablePrev",required:!1,type:{name:"boolean"}},onSkipNext:{defaultValue:null,description:"",name:"onSkipNext",required:!1,type:{name:"(() => void)"}},disableNext:{defaultValue:{value:"false"},description:"",name:"disableNext",required:!1,type:{name:"boolean"}},loopType:{defaultValue:null,description:"",name:"loopType",required:!1,type:{name:"enum",value:[{value:'"off"'},{value:'"loopCurrent"'},{value:'"loopAll"'}]}},onToggleLoop:{defaultValue:null,description:"",name:"onToggleLoop",required:!1,type:{name:"(() => void)"}},themeColor:{defaultValue:{value:"white"},description:"",name:"themeColor",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"undefined"},description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'}]}},onPrevAnnotation:{defaultValue:null,description:"",name:"onPrevAnnotation",required:!1,type:{name:"(() => void)"}},onNextAnnotation:{defaultValue:null,description:"",name:"onNextAnnotation",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PlayDeck/index.tsx#PlayDeck"]={docgenInfo:PlayDeck.__docgenInfo,name:"PlayDeck",path:"src/component/core/PlayDeck/index.tsx#PlayDeck"})}catch(__react_docgen_typescript_loader_error){}var Timeline_Timeline=__webpack_require__(292),PlayerContext=__webpack_require__(94),RPlayer=__webpack_require__(293),jsx_runtime=__webpack_require__(1),playerComposer_Player=function Player(props){var ctx=react_default.a.useContext(PlayerContext.a),setContentSize=react_default.a.useContext(PanZoom.b).setContentSize,_ctx$mediaList$ctx$me=ctx.mediaList[ctx.mediaIndex],mediaType=_ctx$mediaList$ctx$me.type;_ctx$mediaList$ctx$me.provider_name;Object(react.useEffect)((function(){setContentSize(Object(PanZoom_utils.g)(ctx.mediaList[ctx.mediaIndex],1e3))}),[ctx.mediaIndex]);var onPlayHandle=Object(react.useCallback)((function(){return ctx.setPlaying(!0)}),[]),onPauseHandle=Object(react.useCallback)((function(){return ctx.setPlaying(!1)}),[]);return"image"===mediaType?Object(jsx_runtime.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"contain",pointerEvents:"none",userSelect:"none"},src:ctx.mediaList[ctx.mediaIndex].url}):Object(jsx_runtime.jsx)(RPlayer.a,{url:ctx.mediaList[ctx.mediaIndex].url,playing:ctx.playing,onPlay:onPlayHandle,onPause:onPauseHandle,onProgressHiFi:ctx.setPlayerState,seekTime:ctx.seekTime,onEnded:onPauseHandle,controls:props.controls})},configZeroClamp={clipDuration:30,threshold:1},playerComposer_Timeline=function Timeline(){var ctx=react_default.a.useContext(PlayerContext.a),mediaAnnCtx=react_default.a.useContext(MediaAnnotateContext.a),duration=ctx.mediaList[ctx.mediaIndex].duration;return Object(jsx_runtime.jsx)("div",{style:{display:ctx.seekTimeReady?void 0:"none"},children:!!duration&&Object(jsx_runtime.jsx)(Timeline_Timeline.a,{currentTime:ctx.playerState.played,currentCached:ctx.playerState.loaded,duration:duration,onTimelineSeek:ctx.setSeekTime,timelineCaptured:ctx.seeking,onTimelineCaptured:ctx.setSeeking,zeroClamp:configZeroClamp,markerList:mediaAnnCtx.annotateTimeList})})};playerComposer_Timeline.displayName="Timeline";var playerComposer_PlayDeck=function PlayDeck(){var ctx=react_default.a.useContext(PlayerContext.a),markerList=react_default.a.useContext(MediaAnnotateContext.a).annotateTimeList||[];return Object(jsx_runtime.jsx)(core_PlayDeck,{iconSize:"large",playing:ctx.playing,onPlay:function onPlay(){return ctx.setPlaying(!ctx.playing)},onSkipNext:function onSkipNext(){ctx.setMediaIndex((ctx.mediaIndex+1)%ctx.mediaList.length)},onSkipPrev:function onSkipPrev(){ctx.setMediaIndex((ctx.mediaIndex-1+ctx.mediaList.length)%ctx.mediaList.length)},onNextAnnotation:ctx.seekTimeReady?function(){var nextKey=Object(utils.b)(markerList,ctx.playerState.played);null!==nextKey&&ctx.setSeekTime(nextKey)}:void 0,onPrevAnnotation:function onPrevAnnotation(){var prevKey=Object(utils.c)(markerList,ctx.playerState.played);null!==prevKey&&ctx.setSeekTime(prevKey)}})};playerComposer_PlayDeck.displayName="PlayDeck";var playerComposer_PlayDeckWithTimeline=function PlayDeckWithTimeline(){return Object(jsx_runtime.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0},children:[Object(jsx_runtime.jsx)(playerComposer_Timeline,{}),Object(jsx_runtime.jsx)(playerComposer_PlayDeck,{})]})};playerComposer_PlayDeckWithTimeline.displayName="PlayDeckWithTimeline";try{playerComposer_Player.displayName="Player",playerComposer_Player.__docgenInfo={description:"",displayName:"Player",props:{controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/composer/playerComposer.tsx#Player"]={docgenInfo:playerComposer_Player.__docgenInfo,name:"Player",path:"src/component/composer/playerComposer.tsx#Player"})}catch(__react_docgen_typescript_loader_error){}},127:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return sampleAnnotations})),__webpack_require__.d(__webpack_exports__,"b",(function(){return sampleMediaAnnotateList}));__webpack_require__(14);var sampleRectElement={id:"rect1_id",etype:"Rect",transformMatrix:[1,0,0,1,100,100],fill:"",stroke:"pink",strokeWidth:7,width:100,height:100},sampleRectElement2=Object.assign({},sampleRectElement,{id:"rect2_id",stroke:"Indigo",strokeWidth:9,transformMatrix:[1,0,0,1,180,140],width:150,height:100}),samplePathElement={id:"path_id",etype:"Path",transformMatrix:[1,0,0,1,290,150],stroke:"DodgerBlue",strokeWidth:7,fill:"",path:"M 0 0 L 200 100 L 170 200 z"},sampleCircleElement={id:"circle_id",etype:"Circle",transformMatrix:[1,0,0,1,400,200],radius:150,fill:"",stroke:"MediumSeaGreen",strokeWidth:8},sampleTextboxElement={id:"textbox_id",etype:"Textbox",transformMatrix:[1,0,0,1,300,200],text:"hello, world!",fontSize:50,fontFamily:"Times New Roman",fill:"rgba(255,200,100,1)",width:200},sampleAnnotations=[sampleRectElement,sampleRectElement2,sampleCircleElement,sampleTextboxElement,samplePathElement],mediaAnnotate=[{time:0,id:"sketch_0",sketch:[sampleCircleElement,Object.assign({},sampleTextboxElement,{text:"Annotate!"})]},{time:1100,id:"sketch_1",sketch:[samplePathElement,Object.assign({},sampleTextboxElement,{text:"1100"})]},{time:3600,id:"sketch_2",sketch:[sampleRectElement2,Object.assign({},sampleTextboxElement,{text:"3600"})]}],mediaAnnotate3=[{time:0,id:"sketch_0",sketch:[sampleCircleElement,Object.assign({},sampleTextboxElement,{text:"Dance!"})]},{time:4500,id:"sketch_1",sketch:[samplePathElement,Object.assign({},sampleTextboxElement,{text:"4500"})]},{time:9050,id:"sketch_3",sketch:[sampleRectElement2,Object.assign({},sampleTextboxElement,{text:"9050"})]}],sampleMediaAnnotateList=[mediaAnnotate,[{time:0,id:"sketch_0",sketch:[sampleCircleElement,Object.assign({},sampleTextboxElement,{text:"Draw!"})]},{time:1100,id:"sketch_1",sketch:[samplePathElement,Object.assign({},sampleTextboxElement,{text:"1100"})]},{time:2e3,id:"sketch_2",sketch:[sampleRectElement2,Object.assign({},sampleTextboxElement,{text:"2000"})]}],mediaAnnotate3,[{time:0,id:"sketch_0",sketch:[sampleCircleElement,Object.assign({},sampleTextboxElement,{text:"Scribble!"})]},{time:1100,id:"sketch_1",sketch:[samplePathElement,Object.assign({},sampleTextboxElement,{text:"1100"})]},{time:5e3,id:"sketch_2",sketch:[sampleRectElement2,Object.assign({},sampleTextboxElement,{text:"5000"})]}],[{time:1e3,id:"sketch_0",sketch:[sampleCircleElement,Object.assign({},sampleTextboxElement,{text:"Listen!"})]},{time:2100,id:"sketch_1",sketch:[samplePathElement,Object.assign({},sampleTextboxElement,{text:"1100"})]},{time:5e3,id:"sketch_2",sketch:[sampleRectElement2,Object.assign({},sampleTextboxElement,{text:"5000"})]}]]},143:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return usePreventDefaultBrowserTouch})),__webpack_require__.d(__webpack_exports__,"c",(function(){return usePreventDefaultBrowserWheel})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isTablet}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),usePreventDefaultBrowserTouch=function usePreventDefaultBrowserTouch(ref,event){Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.addEventListener(event||"touchstart",(function(evt){evt.preventDefault()}),!1)}),[])},usePreventDefaultBrowserWheel=function usePreventDefaultBrowserWheel(ref){Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.addEventListener("wheel",(function(evt){evt.preventDefault()}),!1)}),[])};var userAgent=navigator.userAgent.toLowerCase(),isTablet=function isTablet(){return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent)||function isIOS(){return navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Mac/.test(navigator.userAgent)}()}},144:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StoryHint})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAnnotateKnobs}));__webpack_require__(25),__webpack_require__(97),__webpack_require__(4);var _storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46),_component_utils_browser__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(0),__webpack_require__(143)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1),_excluded=["hint","width"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var StoryHint=function StoryHint(_ref){var _ref$hint=_ref.hint,hint=void 0===_ref$hint?"Some description about this story.":_ref$hint,props=(_ref.width,_objectWithoutProperties(_ref,_excluded)),displayHintKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.boolean)("Show Hint",!0);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{style:{background:"black",display:"flex",flexFlow:"row wrap",height:"100vh",maxHeight:Object(_component_utils_browser__WEBPACK_IMPORTED_MODULE_5__.a)()?"650px":void 0},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{id:"side_panel",style:{background:"gray",width:displayHintKnob?150:0,height:"100%",transition:"0.25s",overflow:"hidden",transitionTimingFunction:"ease-out"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{style:{width:150,boxSizing:"border-box",padding:5},children:hint})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{style:{flexGrow:1,position:"relative"},children:props.children})]})};StoryHint.displayName="StoryHint";var getAnnotateKnobs=function getAnnotateKnobs(){return{resolutionKnob:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.select)("Annotate resolution",[800,1280,1920],800),modeKnob:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.optionsKnob)("Mode",{PanZoom:"panZoom",Selection:"selection",Annotate:"draw"},"panZoom",{display:"inline-radio"})}};try{StoryHint.displayName="StoryHint",StoryHint.__docgenInfo={description:"",displayName:"StoryHint",props:{hint:{defaultValue:{value:"Some description about this story."},description:"",name:"hint",required:!1,type:{name:"Element"}},width:{defaultValue:{value:"150"},description:"",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/component/utils.tsx#StoryHint"]={docgenInfo:StoryHint.__docgenInfo,name:"StoryHint",path:"src/stories/component/utils.tsx#StoryHint"})}catch(__react_docgen_typescript_loader_error){}},155:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(14);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(596),_utils_browser__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(532),__webpack_require__(143)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),BrushTools=function BrushTools(props){var divRef=react__WEBPACK_IMPORTED_MODULE_1___default.a.useRef(null);return Object(_utils_browser__WEBPACK_IMPORTED_MODULE_4__.b)(divRef),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"brush_tools",ref:divRef,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"brush_tools__display brush_tools__display-"+(props.hide?"hide":"show"),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"brush_tools_bar",children:"Textbox"===props.uiState.shape?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.a,{value:props.uiState.fontSize,orientation:"vertical",min:5,max:100,onChange:function onChange(_evt,value){props.setUIState(Object.assign({},props.uiState,{fontSize:value}))}}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.a,{orientation:"vertical",value:props.uiState.strokeWidth,onChange:function onChange(_evt,value){props.setUIState(Object.assign({},props.uiState,{strokeWidth:value}))},min:1,max:50})})})})};BrushTools.displayName="BrushTools",__webpack_exports__.a=BrushTools;try{BrushTools.displayName="BrushTools",BrushTools.__docgenInfo={description:"",displayName:"BrushTools",props:{uiState:{defaultValue:null,description:"",name:"uiState",required:!0,type:{name:"UserControllerInputs"}},setUIState:{defaultValue:null,description:"",name:"setUIState",required:!0,type:{name:"(u: UserControllerInputs) => void"}},iconSize:{defaultValue:null,description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'}]}},themeColor:{defaultValue:null,description:"",name:"themeColor",required:!1,type:{name:"string"}},hide:{defaultValue:null,description:"",name:"hide",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/UI/BrushTools.tsx#BrushTools"]={docgenInfo:BrushTools.__docgenInfo,name:"BrushTools",path:"src/component/core/AnnotateCanvas/UI/BrushTools.tsx#BrushTools"})}catch(__react_docgen_typescript_loader_error){}},156:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(69),__webpack_require__(11),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22),__webpack_require__(995),__webpack_require__(9),__webpack_require__(113),__webpack_require__(376),__webpack_require__(14);var react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__),_mui_icons_material_CircleOutlined__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(579),_mui_icons_material_CircleOutlined__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_mui_icons_material_CircleOutlined__WEBPACK_IMPORTED_MODULE_18__),_mui_icons_material_Circle__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(582),_mui_icons_material_Circle__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_mui_icons_material_Circle__WEBPACK_IMPORTED_MODULE_19__),_mui_icons_material_RectangleOutlined__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(580),_mui_icons_material_RectangleOutlined__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_mui_icons_material_RectangleOutlined__WEBPACK_IMPORTED_MODULE_20__),_mui_icons_material_HighlightAltOutlined__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(577),_mui_icons_material_HighlightAltOutlined__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_mui_icons_material_HighlightAltOutlined__WEBPACK_IMPORTED_MODULE_21__),_mui_icons_material_PanTool__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(583),_mui_icons_material_PanTool__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_mui_icons_material_PanTool__WEBPACK_IMPORTED_MODULE_22__),_mui_icons_material_Create__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(578),_mui_icons_material_Create__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_mui_icons_material_Create__WEBPACK_IMPORTED_MODULE_23__),_mui_icons_material_Title__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(581),_mui_icons_material_Title__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_mui_icons_material_Title__WEBPACK_IMPORTED_MODULE_24__),_mui_icons_material_Visibility__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(572),_mui_icons_material_Visibility__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_mui_icons_material_Visibility__WEBPACK_IMPORTED_MODULE_25__),_mui_icons_material_VisibilityOff__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(573),_mui_icons_material_VisibilityOff__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_mui_icons_material_VisibilityOff__WEBPACK_IMPORTED_MODULE_26__),_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(574),_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_27__),_mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(575),_mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_28__),_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(576),_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_29__),react_color__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(592),_mui_material__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(77),_utils_browser__WEBPACK_IMPORTED_MODULE_33__=(__webpack_require__(532),__webpack_require__(143)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(1),_excluded=["uiState","setUIState","themeColor","iconSize"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var colorPickerStyles={default:{picker:{background:"#222e",backdropFilter:"blur(3px)",borderRadius:"10px 10px 10px 10px",border:"0px",boxShadow:void 0}}},colorResultToString=function colorResultToString(v){return""+v.hex+Math.round(255*v.rgb.a).toString(16).padStart(2,"0")},EditTools=function EditTools(_ref){var uiState=_ref.uiState,setUIState=_ref.setUIState,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"#fff7":_ref$themeColor,_ref$iconSize=_ref.iconSize,iconSize=void 0===_ref$iconSize?"large":_ref$iconSize,props=_objectWithoutProperties(_ref,_excluded),divRef=react__WEBPACK_IMPORTED_MODULE_17___default.a.useRef(null);Object(_utils_browser__WEBPACK_IMPORTED_MODULE_33__.b)(divRef,"touchmove");var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)(!1),2),showColorPicker=_useState2[0],setShowColorPicker=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)(""),2),tempColor=_useState4[0],setTempColor=_useState4[1],mode=uiState.mode,shape=uiState.shape,showAnnotation=uiState.showAnnotation;return Object(react__WEBPACK_IMPORTED_MODULE_17__.useEffect)((function(){showColorPicker&&setTempColor(uiState.color)}),[showColorPicker]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)("div",{className:"edit_tools",ref:divRef,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)("div",{className:"edit_tools__display edit_tools__display-"+(props.hide?"hide":"show"),children:[showColorPicker&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)("div",{onPointerDown:function onPointerDown(){setShowColorPicker(!1)},onTouchStart:function onTouchStart(){setShowColorPicker(!1)},style:{pointerEvents:"auto",position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)("div",{className:"edit_tools_bar",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{size:iconSize,style:{color:showAnnotation?themeColor:"red"},onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{showAnnotation:!uiState.showAnnotation}))},title:"Show/Hide Annotation",children:showAnnotation?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Visibility__WEBPACK_IMPORTED_MODULE_25___default.a,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_VisibilityOff__WEBPACK_IMPORTED_MODULE_26___default.a,{})}),props.onAddKey&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{size:iconSize,style:{color:themeColor,opacity:props.disableAddKey?.2:1},disabled:props.disableAddKey,onPointerDown:props.onAddKey,title:"Add Key",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_27___default.a,{})}),props.onRemoveKey&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{size:iconSize,style:{color:themeColor,opacity:props.disableRemoveKey?.2:1},disabled:props.disableRemoveKey,onPointerDown:props.onRemoveKey,title:"Remove Key",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_28___default.a,{})}),props.onDeleteSelection&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{size:iconSize,style:{color:themeColor,opacity:props.disableDeleteSelection?.2:1},disabled:props.disableDeleteSelection,onPointerDown:props.onDeleteSelection,title:"Delete Selection",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_29___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)("div",{className:"icon_divider"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"selection"===mode?"primary":void 0,size:iconSize,style:{color:"selection"!==mode?themeColor:void 0},onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"selection"}))},title:"Selection",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_HighlightAltOutlined__WEBPACK_IMPORTED_MODULE_21___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"draw"===mode&&"Path"===shape?"primary":void 0,size:iconSize,style:{color:"draw"!==mode||"Path"!==shape?themeColor:void 0},onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"draw",shape:"Path"}))},title:"Pen",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Create__WEBPACK_IMPORTED_MODULE_23___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"draw"===mode&&"Ellipse"===shape?"primary":void 0,style:{color:"draw"!==mode||"Ellipse"!==shape?themeColor:void 0},size:iconSize,onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"draw",shape:"Ellipse"}))},title:"Ellipse",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_CircleOutlined__WEBPACK_IMPORTED_MODULE_18___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"draw"===mode&&"Rect"===shape?"primary":void 0,style:{color:"draw"!==mode||"Rect"!==shape?themeColor:void 0},size:iconSize,onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"draw",shape:"Rect"}))},title:"Rectangle",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_RectangleOutlined__WEBPACK_IMPORTED_MODULE_20___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"draw"===mode&&"Textbox"===shape?"primary":void 0,style:{color:"draw"!==mode||"Textbox"!==shape?themeColor:void 0},size:iconSize,onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"draw",shape:"Textbox"}))},title:"Text",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Title__WEBPACK_IMPORTED_MODULE_24___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{style:{color:uiState.color,opacity:1},size:iconSize,onPointerDown:function onPointerDown(){return setShowColorPicker(!0)},title:"Color",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_Circle__WEBPACK_IMPORTED_MODULE_19___default.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_31__.a,{color:"panZoom"===mode?"primary":void 0,style:{color:"panZoom"!==mode?themeColor:void 0},size:iconSize,onPointerDown:function onPointerDown(){setUIState(Object.assign({},uiState,{mode:"panZoom"}))},title:"Panzoom",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_mui_icons_material_PanTool__WEBPACK_IMPORTED_MODULE_22___default.a,{fontSize:"medium"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)("div",{style:{display:showColorPicker?"block":"none",position:"absolute",top:"55px",right:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(react_color__WEBPACK_IMPORTED_MODULE_30__.a,{color:tempColor,styles:colorPickerStyles,onChange:function onChange(v){setTempColor(colorResultToString(v))},onChangeComplete:function onChangeComplete(v){setUIState(Object.assign({},uiState,{color:colorResultToString(v)}))},presetColors:[]})})]})]})})};EditTools.displayName="EditTools",__webpack_exports__.a=EditTools;try{EditTools.displayName="EditTools",EditTools.__docgenInfo={description:"",displayName:"EditTools",props:{uiState:{defaultValue:null,description:"",name:"uiState",required:!0,type:{name:"UserControllerInputs"}},setUIState:{defaultValue:null,description:"",name:"setUIState",required:!0,type:{name:"(u: UserControllerInputs) => void"}},iconSize:{defaultValue:{value:"large"},description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'}]}},themeColor:{defaultValue:{value:"#fff7"},description:"",name:"themeColor",required:!1,type:{name:"string"}},onAddKey:{defaultValue:null,description:"",name:"onAddKey",required:!1,type:{name:"(() => void)"}},disableAddKey:{defaultValue:null,description:"",name:"disableAddKey",required:!1,type:{name:"boolean"}},onRemoveKey:{defaultValue:null,description:"",name:"onRemoveKey",required:!1,type:{name:"(() => void)"}},disableRemoveKey:{defaultValue:null,description:"",name:"disableRemoveKey",required:!1,type:{name:"boolean"}},onDeleteSelection:{defaultValue:null,description:"",name:"onDeleteSelection",required:!1,type:{name:"(() => void)"}},disableDeleteSelection:{defaultValue:null,description:"",name:"disableDeleteSelection",required:!1,type:{name:"boolean"}},hide:{defaultValue:null,description:"",name:"hide",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/UI/EditTools.tsx#EditTools"]={docgenInfo:EditTools.__docgenInfo,name:"EditTools",path:"src/component/core/AnnotateCanvas/UI/EditTools.tsx#EditTools"})}catch(__react_docgen_typescript_loader_error){}},157:function(module,__webpack_exports__,__webpack_require__){"use strict";var _PanZoom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75);__webpack_exports__.a=_PanZoom__WEBPACK_IMPORTED_MODULE_0__.d;try{PanZoom.displayName="PanZoom",PanZoom.__docgenInfo={description:"",displayName:"PanZoom",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},zoomBounds:{defaultValue:{value:"{ min: 0.5, max: 5 }"},description:"",name:"zoomBounds",required:!1,type:{name:"{ min: number; max: number; }"}},onPanZoom:{defaultValue:null,description:"",name:"onPanZoom",required:!1,type:{name:"((p: PanZoomSpec) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/index.tsx#PanZoom"]={docgenInfo:PanZoom.__docgenInfo,name:"PanZoom",path:"src/component/core/PanZoom/index.tsx#PanZoom"})}catch(__react_docgen_typescript_loader_error){}},158:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(69),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),fabric=__webpack_require__(120),utils=__webpack_require__(42);__webpack_require__(154),__webpack_require__(43);var hooks_useCustomSelectCorners=function useCustomSelectCorners(fabricCanvasRef,selectionConfig){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",handle_selection),fabricCanvasRef.current.on("selection:updated",handle_selection),fabricCanvasRef.current.on("selection:cleared",handle_selection)}),[]);var handle_selection=function handle_selection(event){if(event.target){var fObj=event.target;if(Object(utils.j)(event.target,fObj.etype,selectionConfig),fObj._objects)fObj._objects.forEach((function(s){return Object(utils.j)(s,s.etype,selectionConfig)}))}}};var hooks_useCustomHoverStyle=function useCustomHoverStyle(fabricCanvasRef,selectionConfig){react_default.a.useEffect((function(){null!=selectionConfig&&selectionConfig.hoverBoundingBox&&(fabricCanvasRef.current.on("object:added",handle_object_added),fabricCanvasRef.current.on("path:created",handle_object_added),fabricCanvasRef.current.on("selection:created",handle_selection),fabricCanvasRef.current.on("selection:updated",handle_selection),fabricCanvasRef.current.on("selection:cleared",handle_selection))}),[]);var handle_object_added=function handle_object_added(event){event.target&&(Object(utils.i)(event.target,!1,selectionConfig),Object(utils.a)(event.target))},handle_selection=function handle_selection(event){var _event$selected,_event$deselected;null===(_event$selected=event.selected)||void 0===_event$selected||_event$selected.forEach((function(s){Object(utils.i)(s,!0,selectionConfig)})),null===(_event$deselected=event.deselected)||void 0===_event$deselected||_event$deselected.forEach((function(s){Object(utils.i)(s,!1,selectionConfig)}))}};__webpack_require__(14);var hooks_useModifyHandler=function useModifyHandler(fabricCanvasRef,onChangeElement){react_default.a.useEffect((function(){fabricCanvasRef.current.on("object:modified",handle_object_modified)}),[]);var handle_object_modified=function handle_object_modified(event){var selection;if(event.target&&(selection=event.target.hasOwnProperty("_objects")?event.target._objects:[event.target],onChangeElement)){var changeBatch=[];selection.forEach((function(obj){var updates={transformMatrix:obj.calcTransformMatrix()},fObj=obj;"Textbox"===fObj.etype&&(updates.text=fObj.text,updates.width=fObj.width),changeBatch.push(Object.assign({id:fObj.id},updates))})),onChangeElement(changeBatch)}}};__webpack_require__(30),__webpack_require__(153),__webpack_require__(84),__webpack_require__(191),__webpack_require__(531);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hooks_useSyncSelection=function useSyncSelection(fabricCanvasRef,uiState,setUIState,selection,onSelection){react_default.a.useEffect((function(){fabricCanvasRef.current.on("selection:created",(function(event){handle_selection_change(event.selected)})),fabricCanvasRef.current.on("selection:updated",(function(event){handle_selection_change(event.selected,event.deselected)})),fabricCanvasRef.current.on("selection:cleared",(function(event){handle_selection_change(event.selected,event.deselected)}))}),[]),react_default.a.useEffect((function(){var currentSelection=fabricCanvasRef.current.getActiveObjects().map((function(x){return x.id})),newSelection=function difference(setA,setB){var _step,_difference=new Set(setA),_iterator=_createForOfIteratorHelper(setB);try{for(_iterator.s();!(_step=_iterator.n()).done;){var elem=_step.value;_difference.delete(elem)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return _difference}(new Set(selection),new Set(currentSelection));fabricCanvasRef.current.getObjects().map((function(obj){newSelection.has(obj.id)&&fabricCanvasRef.current.setActiveObject(obj)})),0!==newSelection.size&&fabricCanvasRef.current.renderAll()}),[selection]);var handle_selection_change=function handle_selection_change(added,removed){var activeObjs=fabricCanvasRef.current.getActiveObjects(),s=activeObjs.map((function(e){return e.id}));null==added||added.map((function(e){return e.id})),null==removed||removed.map((function(e){return e.id}));if(1===activeObjs.length&&setUIState){var obj=activeObjs[0];if(["Rect","Ellipse","Circle","Path"].includes(obj.etype)){var updatedUiState=Object.assign({},uiState,{strokeWidth:obj.strokeWidth,color:obj.stroke,shape:obj.etype});setTimeout(setUIState,200,updatedUiState)}["Textbox"].includes(obj.etype)&&setTimeout(setUIState,200,Object.assign({},uiState,{color:obj.fill,fontSize:obj.fontSize,shape:"Textbox"}))}onSelection&&onSelection(s)}};var v4=__webpack_require__(1077),defaults=__webpack_require__(48),jsx_runtime=__webpack_require__(1),_excluded=["width","height","backgroundColor","attrs"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var FabricCanvas=react_default.a.memo((function(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"LightSteelBlue":_ref$backgroundColor,_ref$attrs=_ref.attrs,attrs=void 0===_ref$attrs?defaults.b:_ref$attrs,props=_objectWithoutProperties(_ref,_excluded),nativeCanvasRef=react_default.a.useRef(null);return react_default.a.useEffect((function(){props.fabricCanvasRef.current.setWidth(width),props.fabricCanvasRef.current.setHeight(height)}),[width,height]),react_default.a.useEffect((function(){props.fabricCanvasRef.current.backgroundColor=backgroundColor}),[backgroundColor]),Object(react.useEffect)((function(){return null!==nativeCanvasRef.current&&(props.fabricCanvasRef.current=new fabric.fabric.Canvas(nativeCanvasRef.current.id,Object.assign({width:width,height:height,backgroundColor:backgroundColor},attrs))),function(){var _props$fabricCanvasRe;null===(_props$fabricCanvasRe=props.fabricCanvasRef.current)||void 0===_props$fabricCanvasRe||_props$fabricCanvasRe.dispose()}}),[]),Object(jsx_runtime.jsx)("canvas",{ref:nativeCanvasRef,id:"canvas_"+Object(v4.a)()})})),AnnotateCanvas_FabricCanvas=FabricCanvas;try{FabricCanvas.displayName="FabricCanvas",FabricCanvas.__docgenInfo={description:"",displayName:"FabricCanvas",props:{fabricCanvasRef:{defaultValue:null,description:"",name:"fabricCanvasRef",required:!0,type:{name:"MutableRefObject<Canvas>"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},attrs:{defaultValue:null,description:"",name:"attrs",required:!1,type:{name:"Record<string, string | number | boolean>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"]={docgenInfo:FabricCanvas.__docgenInfo,name:"FabricCanvas",path:"src/component/core/AnnotateCanvas/FabricCanvas.tsx#FabricCanvas"})}catch(__react_docgen_typescript_loader_error){}var hooks_usePanZoom=function usePanZoom(fabricCanvasRef,panZoom){react_default.a.useEffect((function(){panZoom&&fabricCanvasRef.current.setViewportTransform([panZoom.scale,0,0,panZoom.scale,panZoom.x,panZoom.y])}),[panZoom])};var hooks_useRedrawElements=function useRedrawElements(fabricCanvasRef,backgroundColor,elements,redrawOnModify){var redrawCanvas=function redrawCanvas(fCanvas){fCanvas.clear(),fCanvas.backgroundColor=backgroundColor,elements.forEach((function(ele){Object(utils.h)(ele).then((function(shape){fCanvas.add(shape),ele.fabricObj=shape}))}))};Object(react.useEffect)((function(){redrawOnModify&&redrawCanvas(fabricCanvasRef.current)}),[elements]),Object(react.useEffect)((function(){redrawOnModify||redrawCanvas(fabricCanvasRef.current)}),[])},SHAPES=["Ellipse","Rect","Circle","Triangle","Textbox"];var hooks_useDrawShapeHandler=function useDrawShapeHandler(fabricCanvasRef,uiState,onAddElement,disabled){var uiStateRef=react_default.a.useRef(uiState),onAddElementFuncRef=react_default.a.useRef(onAddElement);Object(react.useEffect)((function(){onAddElementFuncRef.current=onAddElement}),[onAddElement]),react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;fcanvas.on("mouse:down",draw_shape_handle_pointer_down),fcanvas.on("mouse:move",draw_shape_handle_pointer_move),fcanvas.on("mouse:up",draw_shape_handle_pointer_up),fcanvas.on("path:created",handle_path_created),fcanvas.defaultCursor="crosshair"}),[]),react_default.a.useEffect((function(){uiStateRef.current=uiState;var fcanvas=fabricCanvasRef.current;(fcanvas.isDrawingMode="draw"===uiState.mode&&"Path"===uiState.shape)&&syncBrush(fcanvas)}),[uiState]);var syncBrush=function syncBrush(fcanvas){var brush=fcanvas.freeDrawingBrush;brush.width=uiState.strokeWidth||1,brush.color=uiState.color||"#fff",fcanvas.freeDrawingBrush=brush},handle_path_created=function handle_path_created(meta){var _onAddElementFuncRef$,k,fObj=meta.path;for(k in defaults.e)fObj.set(k,defaults.e[k]);fObj.etype="Path",fObj.id=Object(v4.a)(),null===(_onAddElementFuncRef$=onAddElementFuncRef.current)||void 0===_onAddElementFuncRef$||_onAddElementFuncRef$.call(onAddElementFuncRef,Object(utils.g)(fObj))};react_default.a.useEffect((function(){var fcanvas=fabricCanvasRef.current;if(uiState.mode){!function setPathDrawing(fcanvas,uiState){fcanvas.isDrawingMode="draw"===uiState.mode&&"Path"===uiState.shape,syncBrush(fcanvas)}(fcanvas,uiState);var isDrawingMode="draw"===uiState.mode;fcanvas.selection=!disabled&&!isDrawingMode,fcanvas.defaultCursor=isDrawingMode?"crosshair":"",fcanvas.skipTargetFind=isDrawingMode}}),[uiState.mode,uiState.shape,uiState.shape,disabled]);var currentShapeDrawnRef=react_default.a.useRef(null),draw_shape_handle_pointer_down=Object(react.useCallback)((function(opt){var _uiStateRef$current,_uiStateRef$current2;if("draw"===(null===(_uiStateRef$current=uiStateRef.current)||void 0===_uiStateRef$current?void 0:_uiStateRef$current.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current2=uiStateRef.current)||void 0===_uiStateRef$current2?void 0:_uiStateRef$current2.shape)){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_ref=[pointer.x,pointer.y],originX=_ref[0],originY=_ref[1],newElementDefaults=Object(utils.e)(uiStateRef.current);Object(utils.h)(Object.assign({},newElementDefaults,{id:Object(v4.a)(),transformMatrix:[1,0,0,1,originX,originY]})).then((function(shape){fcanvas.add(shape),currentShapeDrawnRef.current={originX:originX,originY:originY,newFObjExt:shape}}))}}),[]),draw_shape_handle_pointer_move=Object(react.useCallback)((function(opt){var _uiStateRef$current3,_uiStateRef$current4,isDrawinShape="draw"===(null===(_uiStateRef$current3=uiStateRef.current)||void 0===_uiStateRef$current3?void 0:_uiStateRef$current3.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current4=uiStateRef.current)||void 0===_uiStateRef$current4?void 0:_uiStateRef$current4.shape);if(null!==currentShapeDrawnRef.current&&isDrawinShape){var fcanvas=fabricCanvasRef.current,pointer=fcanvas.getPointer(opt.e),_currentShapeDrawnRef=currentShapeDrawnRef.current,originX=_currentShapeDrawnRef.originX,originY=_currentShapeDrawnRef.originY,fabObj=currentShapeDrawnRef.current.newFObjExt;"Textbox"===fabObj.etype?fabObj.set({left:pointer.x,top:pointer.y}):-1!==SHAPES.indexOf(fabObj.etype)?fabObj.set({left:Math.min(originX,pointer.x),top:Math.min(originY,pointer.y)}):fabObj.set({left:pointer.x,top:pointer.y}),"Ellipse"===fabObj.etype?(fabObj.set({rx:Math.abs(originX-pointer.x)/2}),fabObj.set({ry:Math.abs(originY-pointer.y)/2})):"Rect"===fabObj.etype&&(fabObj.set({width:Math.abs(originX-pointer.x)}),fabObj.set({height:Math.abs(originY-pointer.y)})),fabObj.setCoords(),fcanvas.requestRenderAll()}}),[]),draw_shape_handle_pointer_up=Object(react.useCallback)((function(_opt){var _uiStateRef$current5,_uiStateRef$current6,isDrawinShape="draw"===(null===(_uiStateRef$current5=uiStateRef.current)||void 0===_uiStateRef$current5?void 0:_uiStateRef$current5.mode)&&-1!==SHAPES.indexOf(null===(_uiStateRef$current6=uiStateRef.current)||void 0===_uiStateRef$current6?void 0:_uiStateRef$current6.shape),fcanvas=fabricCanvasRef.current;if(null!==currentShapeDrawnRef.current&&isDrawinShape){var _onAddElementFuncRef$2,newFObjExt=currentShapeDrawnRef.current.newFObjExt;if(-1!==SHAPES.indexOf(newFObjExt.etype)&&(newFObjExt.width<4||newFObjExt.height<4))null==fcanvas||fcanvas.remove(newFObjExt);else null===(_onAddElementFuncRef$2=onAddElementFuncRef.current)||void 0===_onAddElementFuncRef$2||_onAddElementFuncRef$2.call(onAddElementFuncRef,Object(utils.g)(newFObjExt));currentShapeDrawnRef.current=null}}),[])},AnnotateCanvas_excluded=["elements","selection","onSelection","width","height","backgroundColor","clearOnElementModify","uiState","setUiState","selectionConfig","debugLogging","disabled"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AnnotateCanvas_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AnnotateCanvas_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AnnotateCanvas_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AnnotateCanvas_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AnnotateCanvas_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AnnotateCanvas_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var EmptyCanvas=new fabric.fabric.Canvas(""),AnnotateCanvas=react_default.a.memo((function(_ref){var _ref$elements=_ref.elements,elements=void 0===_ref$elements?[]:_ref$elements,_ref$selection=_ref.selection,selection=void 0===_ref$selection?void 0:_ref$selection,_ref$onSelection=_ref.onSelection,onSelection=void 0===_ref$onSelection?void 0:_ref$onSelection,_ref$width=_ref.width,width=void 0===_ref$width?100:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?100:_ref$height,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=void 0===_ref$backgroundColor?"":_ref$backgroundColor,_ref$clearOnElementMo=_ref.clearOnElementModify,clearOnElementModify=void 0!==_ref$clearOnElementMo&&_ref$clearOnElementMo,_ref$uiState=_ref.uiState,uiState=void 0===_ref$uiState?defaults.d:_ref$uiState,setUiState=_ref.setUiState,_ref$selectionConfig=_ref.selectionConfig,selectionConfig=void 0===_ref$selectionConfig?defaults.c:_ref$selectionConfig,_ref$debugLogging=_ref.debugLogging,debugLogging=void 0!==_ref$debugLogging&&_ref$debugLogging,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,props=AnnotateCanvas_objectWithoutProperties(_ref,AnnotateCanvas_excluded),fcRef=react_default.a.useRef(EmptyCanvas),_useState2=_slicedToArray(Object(react.useState)([]),2),innerSelection=_useState2[0],setInnerSelection=_useState2[1];return selection||(selection=innerSelection),onSelection||(onSelection=setInnerSelection),hooks_useRedrawElements(fcRef,backgroundColor,elements,clearOnElementModify),hooks_useSyncSelection(fcRef,uiState,setUiState,selection,onSelection),hooks_useCustomSelectCorners(fcRef,selectionConfig),hooks_useCustomHoverStyle(fcRef,selectionConfig),hooks_useDrawShapeHandler(fcRef,uiState,props.onAddElement,disabled),hooks_useModifyHandler(fcRef,props.onChangeElement),hooks_usePanZoom(fcRef,props.panZoom),function useApplyAttrsToSelection(canvasRef,uiState,selectedIds,elements,onChangeElement){var updateSelectedElement=function updateSelectedElement(key,value){elements.forEach((function(element){if(-1!==selectedIds.indexOf(element.id)){var _ref,etype=element.etype,adjKey=key;if("Textbox"===etype&&"strokeWidth"===key)return;"color"===key&&(adjKey="Textbox"===etype?"fill":"stroke"),element.fabricObj&&element.fabricObj.get(adjKey)!==value&&(element.fabricObj.set(adjKey,value),onChangeElement&&onChangeElement([(_ref={id:element.id},_ref[adjKey]=value,_ref)]))}})),canvasRef.current.renderAll()};Object(react.useEffect)((function(){return updateSelectedElement("fontSize",uiState.fontSize)}),[uiState.fontSize]),Object(react.useEffect)((function(){return updateSelectedElement("strokeWidth",uiState.strokeWidth)}),[uiState.strokeWidth]),Object(react.useEffect)((function(){return updateSelectedElement("color",uiState.color)}),[uiState.color])}(fcRef,uiState,selection,elements,props.onChangeElement),Object(utils.k)(debugLogging,elements,selection,fcRef),Object(jsx_runtime.jsx)("div",{style:{pointerEvents:disabled?"none":void 0},children:Object(jsx_runtime.jsx)(AnnotateCanvas_FabricCanvas,{fabricCanvasRef:fcRef,width:width,height:height,backgroundColor:backgroundColor})})}));__webpack_exports__.a=AnnotateCanvas;try{AnnotateCanvas.displayName="AnnotateCanvas",AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},panZoom:{defaultValue:null,description:"",name:"panZoom",required:!1,type:{name:"{ x: number; y: number; scale: number; }"}},clearOnElementModify:{defaultValue:null,description:"",name:"clearOnElementModify",required:!1,type:{name:"boolean"}},elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"AnnotateElement[]"}},onAddElement:{defaultValue:null,description:"",name:"onAddElement",required:!1,type:{name:"((element: AnnotateElement) => void)"}},onChangeElement:{defaultValue:null,description:"",name:"onChangeElement",required:!1,type:{name:"((elementUpdates: Partial<AnnotateElement>[]) => void)"}},selection:{defaultValue:null,description:"",name:"selection",required:!1,type:{name:"string[]"}},onSelection:{defaultValue:null,description:"",name:"onSelection",required:!1,type:{name:"((selected: string[]) => void)"}},uiState:{defaultValue:null,description:"",name:"uiState",required:!1,type:{name:"UserControllerInputs"}},setUiState:{defaultValue:null,description:"",name:"setUiState",required:!1,type:{name:"((u: UserControllerInputs) => void)"}},selectionConfig:{defaultValue:null,description:"",name:"selectionConfig",required:!1,type:{name:"UserSelectionConfig"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},debugLogging:{defaultValue:null,description:"",name:"debugLogging",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/AnnotateCanvas.tsx#AnnotateCanvas"]={docgenInfo:AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/core/AnnotateCanvas/AnnotateCanvas.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}},160:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MediaAnnotateContext})),__webpack_require__.d(__webpack_exports__,"b",(function(){return MediaAnnotateContext_MediaAnnotationContextProvider}));__webpack_require__(54),__webpack_require__(30),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),utils=(__webpack_require__(1012),__webpack_require__(14),__webpack_require__(84),__webpack_require__(104),__webpack_require__(67),__webpack_require__(154),__webpack_require__(43),__webpack_require__(25),__webpack_require__(42)),v4=__webpack_require__(1077);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function addNewKey(timedSketches,currentTime){var elements=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],updated=_toConsumableArray(timedSketches),key=Object(utils.f)(currentTime);return updated.push({id:"sketch_"+Object(v4.a)(),time:key,sketch:elements}),updated.sort((function(a,b){return a.time-b.time})),updated}function timedSketchActionReducer(state,action){var _state$currentTimedSk,currentSketch=(null===(_state$currentTimedSk=state.currentTimedSketch)||void 0===_state$currentTimedSk?void 0:_state$currentTimedSk.sketch)||[],timedSketches=state.timedSketches,currentTimedSketch=state.currentTimedSketch,currentTime=state.currentTime;switch(action.type){case"reload":return Object.assign({},state,{timedSketches:action.timedSketches});case"addElement":if(!action.newElement.id)throw Error("Unexpected add element with no new id: "+action.newElement);return state.isKey?(currentSketch.push(action.newElement),state):Object.assign({},state,{timedSketches:addNewKey(timedSketches,currentTime,[action.newElement]),isKey:!0,keyTime:Object(utils.f)(currentTime)});case"removeElements":return currentTimedSketch.sketch=currentSketch.filter((function(x){return!action.ids.includes(x.id)})),Object.assign({},state,{timedSketches:_toConsumableArray(timedSketches)});case"selectElements":return Object.assign({},state,{selection:action.selection});case"changeElement":var elementIndexById=currentSketch.reduce((function(a,v,i){return a[v.id]=i,a}),{});return action.elementUpdates.forEach((function(updates){var index=elementIndexById[updates.id];Object.keys(updates).forEach((function(k){return currentSketch[index][k]=updates[k]}))})),state;case"updateCurrentTime":var _findTimedSketch=Object(utils.d)(state.timedSketches,Object(utils.f)(action.time),!1),timedSketch=_findTimedSketch.timedSketch,isKey=_findTimedSketch.isKey,keyTime=isKey?timedSketch.time:null;return Object.assign({},state,{currentTimedSketch:timedSketch,currentTime:action.time,keyTime:keyTime,isKey:isKey});case"addKey":return Object.assign({},state,{timedSketches:addNewKey(timedSketches,currentTime),isKey:!0,keyTime:Object(utils.f)(currentTime)});case"removeKey":return Object.assign({},state,{timedSketches:state.timedSketches.filter((function(x){var _state$currentTimedSk2;return x.id!==(null===(_state$currentTimedSk2=state.currentTimedSketch)||void 0===_state$currentTimedSk2?void 0:_state$currentTimedSk2.id)}))});default:return state}}var PlayerContext=__webpack_require__(94),util=__webpack_require__(291),jsx_runtime=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function MediaAnnotateContext_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return MediaAnnotateContext_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MediaAnnotateContext_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MediaAnnotateContext_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var MediaAnnotateContext=react_default.a.createContext({annotateTimeList:[],elements:[],onAddElement:function onAddElement(){},onChangeElement:function onChangeElement(){},onRemoveElements:function onRemoveElements(){},isKey:!1,keyTime:null,onAddKey:function onAddKey(){},onRemoveKey:function onRemoveKey(){},selection:[],onSelection:function onSelection(){}}),MediaAnnotateContext_MediaAnnotationContextProvider=function MediaAnnotationContextProvider(_ref){var _mediaAnnotationState,mediaAnnotation=_ref.mediaAnnotation,setMediaAnnotation=_ref.setMediaAnnotation,children=_ref.children,playerState=Object(react.useContext)(PlayerContext.a).playerState,_useState2=_slicedToArray(Object(react.useState)([]),2),annotateTimeList=_useState2[0],setAnnotateTimeList=_useState2[1],_useReducer2=_slicedToArray(Object(react.useReducer)(timedSketchActionReducer,{timedSketches:mediaAnnotation,currentTimedSketch:null,currentTime:-1,isKey:!1,keyTime:null,selection:[]}),2),mediaAnnotationState=_useReducer2[0],mediaAnnotationDispatch=_useReducer2[1];Object(react.useEffect)((function(){mediaAnnotationDispatch({type:"reload",timedSketches:mediaAnnotation})}),[mediaAnnotation]),Object(react.useEffect)((function(){setMediaAnnotation(mediaAnnotationState.timedSketches),mediaAnnotationDispatch({type:"updateCurrentTime",time:playerState.played})}),[mediaAnnotationState.timedSketches]),Object(react.useEffect)((function(){var markers=mediaAnnotationState.timedSketches.map((function(m){return m.time/1e3})).filter((function(m){return m<=playerState.duration&&m>=0}));setAnnotateTimeList(markers)}),[mediaAnnotationState.timedSketches,playerState.duration]),Object(react.useEffect)((function(){mediaAnnotationDispatch({type:"updateCurrentTime",time:playerState.played})}),[playerState.played]);var onAddElement=Object(react.useCallback)((function(newElement){return mediaAnnotationDispatch({type:"addElement",newElement:newElement})}),[]),onChangeElement=Object(react.useCallback)((function(elementUpdates){return mediaAnnotationDispatch({type:"changeElement",elementUpdates:elementUpdates})}),[]),onAddKey=Object(react.useCallback)((function(){mediaAnnotationDispatch({type:"addKey"})}),[]),onRemoveKey=Object(react.useCallback)((function(){confirm("Remove annotations at time: "+Object(util.a)(playerState.played,playerState.duration)+"?")&&mediaAnnotationDispatch({type:"removeKey"})}),[playerState]),onSelection=Object(react.useCallback)((function(selection){return mediaAnnotationDispatch({type:"selectElements",selection:selection})}),[]),onRemoveElements=Object(react.useCallback)((function(ids){return mediaAnnotationDispatch({type:"removeElements",ids:ids})}),[]);return Object(jsx_runtime.jsx)(MediaAnnotateContext.Provider,{value:{annotateTimeList:annotateTimeList,elements:(null===(_mediaAnnotationState=mediaAnnotationState.currentTimedSketch)||void 0===_mediaAnnotationState?void 0:_mediaAnnotationState.sketch)||[],onAddElement:onAddElement,onChangeElement:onChangeElement,onRemoveElements:onRemoveElements,isKey:mediaAnnotationState.isKey,keyTime:mediaAnnotationState.keyTime,onAddKey:onAddKey,onRemoveKey:onRemoveKey,selection:mediaAnnotationState.selection,onSelection:onSelection},children:children})};MediaAnnotateContext_MediaAnnotationContextProvider.displayName="MediaAnnotationContextProvider";try{MediaAnnotateContext_MediaAnnotationContextProvider.displayName="MediaAnnotationContextProvider",MediaAnnotateContext_MediaAnnotationContextProvider.__docgenInfo={description:"",displayName:"MediaAnnotationContextProvider",props:{mediaAnnotation:{defaultValue:null,description:"",name:"mediaAnnotation",required:!0,type:{name:"TimedSketch[]"}},setMediaAnnotation:{defaultValue:null,description:"",name:"setMediaAnnotation",required:!0,type:{name:"(t: TimedSketch[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/MediaAnnotateContext.tsx#MediaAnnotationContextProvider"]={docgenInfo:MediaAnnotateContext_MediaAnnotationContextProvider.__docgenInfo,name:"MediaAnnotationContextProvider",path:"src/component/core/AnnotateCanvas/MediaAnnotateContext.tsx#MediaAnnotationContextProvider"})}catch(__react_docgen_typescript_loader_error){}},204:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LOOP_TYPE_LIST}));__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(0);var _mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(586),_mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_4__),_mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(585),_mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_5__),_mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(587),_mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_6__),_mui_icons_material_SkipPrevious__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(584),_mui_icons_material_SkipPrevious__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_mui_icons_material_SkipPrevious__WEBPACK_IMPORTED_MODULE_7__),_mui_icons_material_Loop__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(588),_mui_icons_material_Loop__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_mui_icons_material_Loop__WEBPACK_IMPORTED_MODULE_8__),_mui_icons_material_ChevronLeft__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(589),_mui_icons_material_ChevronLeft__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_mui_icons_material_ChevronLeft__WEBPACK_IMPORTED_MODULE_9__),_mui_icons_material_ChevronRight__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(590),_mui_icons_material_ChevronRight__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_mui_icons_material_ChevronRight__WEBPACK_IMPORTED_MODULE_10__),_mui_material__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77),_mui_material__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1058),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(1019),__webpack_require__(1)),_excluded=["disablePrev","disableNext","themeColor","iconSize"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var LOOP_TYPE_LIST=["off","loopCurrent","loopAll"],PlayDeck=function PlayDeck(_ref){var _ref$disablePrev=_ref.disablePrev,disablePrev=void 0!==_ref$disablePrev&&_ref$disablePrev,_ref$disableNext=_ref.disableNext,disableNext=void 0!==_ref$disableNext&&_ref$disableNext,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"white":_ref$themeColor,_ref$iconSize=_ref.iconSize,iconSize=void 0===_ref$iconSize?void 0:_ref$iconSize,props=_objectWithoutProperties(_ref,_excluded);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"playDeck",children:[props.onSkipPrev&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:iconSize,onClick:props.onSkipPrev,disabled:disablePrev,style:{color:themeColor},title:"Skip prev",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_SkipPrevious__WEBPACK_IMPORTED_MODULE_7___default.a,{fontSize:iconSize})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:iconSize,onClick:props.onPlay,style:{color:themeColor},title:"Play",children:props.playing?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_5___default.a,{fontSize:iconSize}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_4___default.a,{fontSize:iconSize})}),props.onSkipNext&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:iconSize,onClick:props.onSkipNext,disabled:disableNext,style:{color:themeColor},title:"Skip next",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_6___default.a,{fontSize:iconSize})}),props.onToggleLoop&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",onClick:props.onToggleLoop,title:props.loopType,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_12__.a,{badgeContent:"loopCurrent"===props.loopType?1:null,style:{color:"off"===props.loopType?void 0:themeColor},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_Loop__WEBPACK_IMPORTED_MODULE_8___default.a,{style:{fill:"off"===props.loopType?void 0:themeColor}})})}),void 0!==props.onNextAnnotation&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:iconSize,onClick:props.onPrevAnnotation,style:{color:themeColor},title:"Prev annotation",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_ChevronLeft__WEBPACK_IMPORTED_MODULE_9___default.a,{fontSize:iconSize})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__.a,{size:iconSize,onClick:props.onNextAnnotation,style:{color:themeColor},title:"Next annotation",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_mui_icons_material_ChevronRight__WEBPACK_IMPORTED_MODULE_10___default.a,{fontSize:iconSize})})]})]})};PlayDeck.displayName="PlayDeck",__webpack_exports__.b=PlayDeck;try{PlayDeck.displayName="PlayDeck",PlayDeck.__docgenInfo={description:"",displayName:"PlayDeck",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},playing:{defaultValue:null,description:"",name:"playing",required:!1,type:{name:"boolean"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},onSkipPrev:{defaultValue:null,description:"",name:"onSkipPrev",required:!1,type:{name:"(() => void)"}},disablePrev:{defaultValue:{value:"false"},description:"",name:"disablePrev",required:!1,type:{name:"boolean"}},onSkipNext:{defaultValue:null,description:"",name:"onSkipNext",required:!1,type:{name:"(() => void)"}},disableNext:{defaultValue:{value:"false"},description:"",name:"disableNext",required:!1,type:{name:"boolean"}},loopType:{defaultValue:null,description:"",name:"loopType",required:!1,type:{name:"enum",value:[{value:'"off"'},{value:'"loopCurrent"'},{value:'"loopAll"'}]}},onToggleLoop:{defaultValue:null,description:"",name:"onToggleLoop",required:!1,type:{name:"(() => void)"}},themeColor:{defaultValue:{value:"white"},description:"",name:"themeColor",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"undefined"},description:"",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'},{value:'"small"'}]}},onPrevAnnotation:{defaultValue:null,description:"",name:"onPrevAnnotation",required:!1,type:{name:"(() => void)"}},onNextAnnotation:{defaultValue:null,description:"",name:"onNextAnnotation",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PlayDeck/PlayDeck.tsx#PlayDeck"]={docgenInfo:PlayDeck.__docgenInfo,name:"PlayDeck",path:"src/component/core/PlayDeck/PlayDeck.tsx#PlayDeck"})}catch(__react_docgen_typescript_loader_error){}},230:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return elementsActionReducer}));__webpack_require__(67),__webpack_require__(29),__webpack_require__(154),__webpack_require__(43),__webpack_require__(14),__webpack_require__(97),__webpack_require__(993),__webpack_require__(370),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(22),__webpack_require__(17),__webpack_require__(7);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function elementsActionReducer(state,action){var elementIndexById=state.reduce((function(a,v,i){return a[v.id]=i,a}),{}),updatedElements=_toConsumableArray(state);switch(action.type){case"addElement":if(!action.newElement.id)throw Error("Unexpected add element with no new id: "+action.newElement);return[].concat(_toConsumableArray(state),[action.newElement]);case"changeElement":return action.elementUpdates.forEach((function(updates){var index=elementIndexById[updates.id];state[index]=Object.assign({},updatedElements[index],updates)})),state;case"removeElements":return state.reduce((function(a,c,index){return-1!==action.ids.indexOf(c.id)&&a.push(index),a}),[]).reverse().forEach((function(removeIndex){updatedElements.splice(removeIndex,1)})),updatedElements;case"updateSketch":return action.sketch}}},291:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return formatTimeDisplay}));__webpack_require__(1017),__webpack_require__(376),__webpack_require__(101),__webpack_require__(34),__webpack_require__(520),__webpack_require__(371),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var formatTimeDisplay=function formatTimeDisplay(time,duration){var mSec=new Date(1e3*time).toISOString();if(duration>3600)return mSec.substr(11,8);if(duration>60){var _mSec$substr$split2=_slicedToArray(mSec.substr(14,5).split(":"),2),min=_mSec$substr$split2[0],sec=_mSec$substr$split2[1];return parseInt(min)+":"+sec}return time.toFixed(1)}},292:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(69),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22),__webpack_require__(176),__webpack_require__(191),__webpack_require__(30);var react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_16__),_util__WEBPACK_IMPORTED_MODULE_18__=(__webpack_require__(1021),__webpack_require__(291)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1),_excluded=["frameRange","useFrameDisplay","themeColor","zeroClamp"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var Timeline=function Timeline(_ref){var frameRange=_ref.frameRange,_ref$useFrameDisplay=_ref.useFrameDisplay,useFrameDisplay=void 0!==_ref$useFrameDisplay&&_ref$useFrameDisplay,_ref$themeColor=_ref.themeColor,themeColor=void 0===_ref$themeColor?"red":_ref$themeColor,zeroClamp=_ref.zeroClamp,props=_objectWithoutProperties(_ref,_excluded),progressDisplayTimeoutRef=Object(react__WEBPACK_IMPORTED_MODULE_16__.useRef)(null),timelineRef=Object(react__WEBPACK_IMPORTED_MODULE_16__.useRef)(null),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_16__.useState)(0),2),seekPercentage=_useState2[0],setSeekPercentage=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_16__.useState)(!1),2),innerCaptured=_useState4[0],setInnerCaptured=_useState4[1],timelineCaptured=props.timelineCaptured||innerCaptured,onTimelineCaptured=props.onTimelineCaptured||setInnerCaptured,displayPlayPercentage=props.currentTime/props.duration,oneFramePercent=0,frameDuration=-1,frameIndex=-1;if(timelineCaptured&&(displayPlayPercentage=seekPercentage),useFrameDisplay&&frameRange){frameDuration=frameRange[1]-frameRange[0]+1,oneFramePercent=1/frameDuration,displayPlayPercentage=Math.min(displayPlayPercentage,1-oneFramePercent);var frameElapsed=Math.floor(displayPlayPercentage*frameDuration);frameIndex=frameElapsed+frameRange[0],displayPlayPercentage=Math.min(frameElapsed*oneFramePercent)}react__WEBPACK_IMPORTED_MODULE_16___default.a.useEffect((function(){return function(){null!==progressDisplayTimeoutRef.current&&window.clearTimeout(progressDisplayTimeoutRef.current)}}),[]);var handleScrubStart=function handleScrubStart(event){handleScrubMove(event),onTimelineCaptured&&onTimelineCaptured(!0)},handleScrubEnd=function handleScrubEnd(event){handleScrubMoveFinish(event),onTimelineCaptured&&onTimelineCaptured(!1)},handleScrubMove=function handleScrubMove(e){if(timelineCaptured){var isPointerEvent=e.type&&e.type.startsWith("pointer"),isPointerMoveEvent=e.type&&"pointermove"===e.type,isPointerDownEvent=e.type&&"pointerdown"===e.type;if(!isPointerMoveEvent||(props.onPointerMove&&props.onPointerMove(e),0!==e.buttons)){e.stopPropagation(),isPointerDownEvent&&e.currentTarget.setPointerCapture(e.pointerId);var bounds=timelineRef.current.getBoundingClientRect(),totalWidth=bounds.width,offset=(isPointerEvent?e.pageX:e.touches[0].clientX)-bounds.left,_seekPercentage=(offset=Math.max(0,Math.min(offset,totalWidth)))/totalWidth;setSeekPercentage(_seekPercentage);var seekTime=_seekPercentage*props.duration,seekFrameIndex=-1;if(zeroClamp&&props.duration>zeroClamp.clipDuration&&seekTime<zeroClamp.threshold&&(seekTime=0),props.onTimelineSeek){if(progressDisplayTimeoutRef.current&&(window.clearTimeout(progressDisplayTimeoutRef.current),progressDisplayTimeoutRef.current=null),useFrameDisplay&&frameRange){var _frameDuration=frameRange[1]-frameRange[0]+1;seekFrameIndex=Math.floor(_seekPercentage*_frameDuration+frameRange[0])}progressDisplayTimeoutRef.current=window.setTimeout(props.onTimelineSeek,5,seekTime,seekFrameIndex)}}}},handleScrubMoveFinish=function handleScrubMoveFinish(e){e.type&&e.type.startsWith("pointer")&&e.currentTarget.releasePointerCapture(e.pointerId)},playHead=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline__track__playhead",style:{left:100*(displayPlayPercentage+oneFramePercent)+"%",backgroundColor:""+themeColor}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline__track__playhead__text",style:{left:100*(displayPlayPercentage+oneFramePercent)+"%"},children:-1!==frameIndex?frameIndex:Object(_util__WEBPACK_IMPORTED_MODULE_18__.a)(displayPlayPercentage*props.duration,props.duration)})]}),playedGauge=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline__track__progress",style:{background:themeColor,width:100*(displayPlayPercentage+oneFramePercent)+"%"}}),cachedGauge=props.currentCached&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline__track__cache_gauge",style:{width:100*(props.currentCached/props.duration+oneFramePercent)+"%"}}),markers=props.markerList&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:props.markerList.map((function(t,i){var markerPercentage=t/props.duration;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline__track__marker_dot",style:{left:100*(markerPercentage+oneFramePercent)+"%"}},"timelineMarker"+i)}))});return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"timeline",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{ref:timelineRef,className:"timeline__scrollzone",onPointerMove:handleScrubMove,onTouchMove:handleScrubMove,onPointerDown:handleScrubStart,onTouchStart:handleScrubStart,onPointerUp:handleScrubEnd,onTouchEnd:handleScrubEnd,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"timeline__track",children:[cachedGauge,playedGauge,playHead,markers]})})})};Timeline.displayName="Timeline",__webpack_exports__.a=Timeline;try{Timeline.displayName="Timeline",Timeline.__docgenInfo={description:"",displayName:"Timeline",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},currentTime:{defaultValue:null,description:"",name:"currentTime",required:!0,type:{name:"number"}},currentCached:{defaultValue:null,description:"",name:"currentCached",required:!1,type:{name:"number"}},useFrameDisplay:{defaultValue:{value:"false"},description:"",name:"useFrameDisplay",required:!1,type:{name:"boolean"}},frameRange:{defaultValue:null,description:"",name:"frameRange",required:!1,type:{name:"[number, number]"}},timelineCaptured:{defaultValue:null,description:"",name:"timelineCaptured",required:!1,type:{name:"boolean"}},onTimelineCaptured:{defaultValue:null,description:"",name:"onTimelineCaptured",required:!1,type:{name:"((captured: boolean) => void)"}},onTimelineSeek:{defaultValue:null,description:"",name:"onTimelineSeek",required:!1,type:{name:"((seekTime: number, seekFrameIndex?: number) => void)"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"((e: any) => void)"}},themeColor:{defaultValue:{value:"red"},description:"",name:"themeColor",required:!1,type:{name:"string"}},zeroClamp:{defaultValue:null,description:"",name:"zeroClamp",required:!1,type:{name:"{ clipDuration: number; threshold: number; }"}},markerList:{defaultValue:null,description:"",name:"markerList",required:!1,type:{name:"number[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/Timeline/Timeline.tsx#Timeline"]={docgenInfo:Timeline.__docgenInfo,name:"Timeline",path:"src/component/core/Timeline/Timeline.tsx#Timeline"})}catch(__react_docgen_typescript_loader_error){}},293:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(191),__webpack_require__(14);var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react_player__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(591),react_player__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_player__WEBPACK_IMPORTED_MODULE_6__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),_excluded=["seekTime","onProgressHiFi"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var RPlayer=function RPlayer(_ref){var _ref$seekTime=_ref.seekTime,seekTime=void 0===_ref$seekTime?void 0:_ref$seekTime,_ref$onProgressHiFi=_ref.onProgressHiFi,onProgressHiFi=void 0===_ref$onProgressHiFi?void 0:_ref$onProgressHiFi,props=_objectWithoutProperties(_ref,_excluded),reactPlayerRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),syncTimeIdRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),lastBroadcastTimeRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);return Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){reactPlayerRef.current&&void 0!==seekTime&&seekTime>=0&&("VIDEO"===reactPlayerRef.current.getInternalPlayer().nodeName?reactPlayerRef.current.getInternalPlayer().currentTime=seekTime:reactPlayerRef.current.seekTo(seekTime))}),[seekTime]),Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){return syncTimeIdRef.current&&(window.clearTimeout(syncTimeIdRef.current),syncTimeIdRef.current=null),onProgressHiFi&&reactPlayerRef.current&&(syncTimeIdRef.current=window.setInterval((function(){if(reactPlayerRef.current){var _lastBroadcastTimeRef,_lastBroadcastTimeRef2,played=reactPlayerRef.current.getCurrentTime(),loaded=reactPlayerRef.current.getSecondsLoaded(),duration=reactPlayerRef.current.getDuration();played===(null===(_lastBroadcastTimeRef=lastBroadcastTimeRef.current)||void 0===_lastBroadcastTimeRef?void 0:_lastBroadcastTimeRef.played)&&loaded===(null===(_lastBroadcastTimeRef2=lastBroadcastTimeRef.current)||void 0===_lastBroadcastTimeRef2?void 0:_lastBroadcastTimeRef2.loaded)||onProgressHiFi({loaded:loaded,played:played,duration:duration}),lastBroadcastTimeRef.current={played:played,loaded:loaded,duration:duration}}}),20)),function(){syncTimeIdRef.current&&window.clearInterval(syncTimeIdRef.current)}}),[reactPlayerRef.current]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_player__WEBPACK_IMPORTED_MODULE_6___default.a,Object.assign({ref:reactPlayerRef,style:{position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",overflow:"hidden"},width:"100%",height:"100%"},props))};RPlayer.displayName="RPlayer",__webpack_exports__.a=RPlayer;try{RPlayer.displayName="RPlayer",RPlayer.__docgenInfo={description:"",displayName:"RPlayer",props:{seekTime:{defaultValue:{value:"undefined"},description:"",name:"seekTime",required:!1,type:{name:"number"}},onProgressHiFi:{defaultValue:{value:"undefined"},description:"",name:"onProgressHiFi",required:!1,type:{name:"((s: PlayerState) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/MediaPlayer/RPlayer.tsx#RPlayer"]={docgenInfo:RPlayer.__docgenInfo,name:"RPlayer",path:"src/component/core/MediaPlayer/RPlayer.tsx#RPlayer"})}catch(__react_docgen_typescript_loader_error){}},42:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return utils_makeElement})),__webpack_require__.d(__webpack_exports__,"h",(function(){return makeFabricObj})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getElementPropsFromUiState})),__webpack_require__.d(__webpack_exports__,"k",(function(){return utils_useCanvasDebugger})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setHoverStyle})),__webpack_require__.d(__webpack_exports__,"j",(function(){return utils_setSelectionControls})),__webpack_require__.d(__webpack_exports__,"a",(function(){return bootstrapHoverHandler})),__webpack_require__.d(__webpack_exports__,"d",(function(){return utils_findTimedSketch})),__webpack_require__.d(__webpack_exports__,"b",(function(){return findNextKeyTime})),__webpack_require__.d(__webpack_exports__,"c",(function(){return findPrevKeyTime})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getWholeMSecTime}));__webpack_require__(67),__webpack_require__(14),__webpack_require__(90),__webpack_require__(9),__webpack_require__(97),__webpack_require__(531),__webpack_require__(54);var fabric=__webpack_require__(120),react=__webpack_require__(0),react_default=__webpack_require__.n(react),defaults=__webpack_require__(48),baseAttrNames=(__webpack_require__(29),[].concat(["Rect","Circle","Ellipse","Path","Textbox"],["SVG"]),["fill","stroke","strokeWidth"]),fabricObjAttrsLookup={Rect:[].concat(baseAttrNames,["width","height"]),Circle:[].concat(baseAttrNames,["radius"]),Ellipse:[].concat(baseAttrNames,["rx","ry"]),Textbox:[].concat(baseAttrNames,["text","fontFamily","fontSize","width","height"]),Path:[].concat(baseAttrNames,["path"]),SVG:[]};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var utils_makeElement=function makeElement(fObj){var element=fabricObjAttrsLookup[fObj.etype].reduce((function(p,c){return p[c]=fObj[c],p}),{});return Object.assign({etype:fObj.etype,id:fObj.id,transformMatrix:fObj.calcTransformMatrix(),fabricObj:fObj},element)},makeFabricObj=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(props){var newFObj,fObjProps,t;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if((fObjProps=Object.assign({},props)).transformMatrix&&delete fObjProps.transformMatrix,fObjProps.etype&&fObjProps.id){_context.next=4;break}throw"Can not make extended fabric object without etype and id.";case 4:if("Textbox"!==props.etype){_context.next=8;break}newFObj=new fabric.fabric.Textbox("text",Object.assign({text:"Enter text...",fontFamily:"Times New Roman"},defaults.e,fObjProps)),_context.next=25;break;case 8:if("Path"!==props.etype){_context.next=12;break}newFObj=new fabric.fabric.Path(props.path,Object.assign({strokeLineCap:"round"},defaults.e,fObjProps)),_context.next=25;break;case 12:if("Rect"!==props.etype){_context.next=16;break}newFObj=new fabric.fabric.Rect(Object.assign({},defaults.e,fObjProps)),_context.next=25;break;case 16:if("Circle"!==props.etype){_context.next=20;break}newFObj=new fabric.fabric.Circle(Object.assign({},defaults.e,fObjProps)),_context.next=25;break;case 20:if("Ellipse"!==props.etype){_context.next=24;break}newFObj=new fabric.fabric.Ellipse(Object.assign({},defaults.e,fObjProps)),_context.next=25;break;case 24:throw Error('Failed to deserialize element of unsupported type "'+props.etype+'".');case 25:return props.transformMatrix&&(t=fabric.fabric.util.qrDecompose(props.transformMatrix),newFObj.set(t),newFObj.setPositionByOrigin({x:t.translateX,y:t.translateY},"center","center")),newFObj.setCoords(),_context.abrupt("return",newFObj);case 28:case"end":return _context.stop()}}),_callee)})));return function makeFabricObj(_x){return _ref.apply(this,arguments)}}(),getElementPropsFromUiState=function getElementPropsFromUiState(uiState){var shape=uiState.shape;return{fontSize:uiState.fontSize,color:uiState.color,fontFamily:uiState.fontFamily,etype:shape,fill:-1!==["Textbox","SVG"].indexOf(shape)?uiState.color:"",stroke:-1!==["Textbox","SVG"].indexOf(shape)?"":uiState.color,strokeWidth:-1!==["Textbox"].indexOf(shape)?0:uiState.strokeWidth}},utils_useCanvasDebugger=function useCanvasDebugger(on,elements,selection,fCanvasRef){react_default.a.useEffect((function(){if(on&&null!=fCanvasRef&&fCanvasRef.current){console.log("All elements: ",elements),null!=fCanvasRef&&fCanvasRef.current&&console.log("All Fabric Objects: ",fCanvasRef.current.getObjects()),console.log("Selection Ids: ",selection);var elementSelection=elements.filter((function(e){return-1!==selection.indexOf(e.id)}));elementSelection.length&&console.log("Selected: ",function getUiStateFromElement(element){var uiState={shape:element.etype};return-1!==["Textbox"].indexOf(element.etype)&&(uiState.color=element.fill,uiState.fontSize=element.fontSize,uiState.fontFamily=element.fontFamily),-1!=["Rect","Circle","Triangle","Ellipse","Path"].indexOf(element.etype)&&(uiState.strokeWidth=element.strokeWidth,uiState.color=element.stroke),uiState}(elementSelection[0]))}}),[elements,selection])},setHoverStyle=function setHoverStyle(newElement,selected,config){newElement.cornerStyle="circle",newElement.transparentCorners=!1,newElement.cornerSize=12,newElement.borderDashArray=selected?void 0:[5,5],newElement.borderColor=null==config?void 0:config.selectionColor,newElement.cornerColor=null==config?void 0:config.selectionColor},utils_setSelectionControls=function setSelectionControls(newElement,elementType,config){newElement.cornerStyle="circle",newElement.transparentCorners=!1,newElement.cornerSize=12,newElement.borderDashArray=void 0,newElement.borderColor=null==config?void 0:config.selectionColor,newElement.cornerColor=null==config?void 0:config.selectionColor,defaults.f||newElement.setControlVisible("mtr",!1),"Textbox"===elementType&&(newElement.setControlVisible("tl",!1),newElement.setControlVisible("mt",!1),newElement.setControlVisible("tr",!1),newElement.setControlVisible("bl",!1),newElement.setControlVisible("mb",!1),newElement.setControlVisible("br",!1))},bootstrapHoverHandler=function bootstrapHoverHandler(newFObj){newFObj.on("mouseover",(function(){this._renderControls(this.canvas.contextTop,{hasControls:!1})})),newFObj.on("mousedown",(function(){this.canvas.clearContext(this.canvas.contextTop)})),newFObj.on("mouseout",(function(){this.canvas.clearContext(this.canvas.contextTop)}))},utils_findTimedSketch=function findTimedSketch(mediaAnnotation,currentTime,hold,fps){hold=void 0!==hold&&hold,fps=fps||24;for(var matchSketch=null,isKey=!1,i=0;i<mediaAnnotation.length;i++){var keyTime=mediaAnnotation[i].time;if(currentTime>=keyTime&&currentTime<keyTime+defaults.a&&(matchSketch=mediaAnnotation[i],isKey=!0),hold&&currentTime>=keyTime&&(matchSketch=mediaAnnotation[i],currentTime<keyTime))break}return{timedSketch:matchSketch,isKey:isKey}},findNextKeyTime=function findNextKeyTime(keyList,currentTime){var adjKeys=keyList.filter((function(t){return currentTime<t}));return 0===adjKeys.length?0===keyList.length?null:keyList[0]:adjKeys[0]},findPrevKeyTime=function findPrevKeyTime(keyList,currentTime,buffer){currentTime=getWholeFrameTime(currentTime)/1e3,currentTime-=buffer||0;var adjKeys=keyList.filter((function(t){return t<currentTime}));return 0===adjKeys.length?0===keyList.length?null:keyList[keyList.length-1]:adjKeys[adjKeys.length-1]},getWholeFrameTime=function getWholeFrameTime(time,fps){return fps=fps||24,Math.round(Math.floor(time*fps)/fps*1e3)},getWholeMSecTime=function getWholeMSecTime(time){return Math.floor(1e3*time)}},48:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return DEFAULT_UI_ATTRS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_CANVAS_ATTRS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULT_SELECTION_CONFIG})),__webpack_require__.d(__webpack_exports__,"e",(function(){return FabricObjectDefaults})),__webpack_require__.d(__webpack_exports__,"f",(function(){return HAS_ROTATE_HANDLE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ANNOTATE_KEY_HOLD_MSEC}));var DEFAULT_UI_ATTRS={mode:"selection",showAnnotation:!0,shape:"Rect",fontSize:20,color:"Coral",strokeWidth:3,fontFamily:"Times New Roman"},DEFAULT_CANVAS_ATTRS={uniformScaling:!1,preserveObjectStacking:!0,targetFindTolerance:10},DEFAULT_SELECTION_CONFIG={perPixelSelection:!1,selectionColor:"Azure",hoverBoundingBox:!0},FabricObjectDefaults={noScaleCache:!1,strokeUniform:!0},HAS_ROTATE_HANDLE=!0,ANNOTATE_KEY_HOLD_MSEC=500},532:function(module,exports,__webpack_require__){var api=__webpack_require__(268),content=__webpack_require__(994);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},534:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AnnotatePanZoomImage",(function(){return AnnotatePanZoomImage}));__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(46),_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(157),_component_core_AnnotateCanvas_AnnotateCanvas__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(158),_testdata_annotationSamples__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(127),_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(75),_component_core_PanZoom_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(66),_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(59),_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(144),_component_core_AnnotateCanvas_defaults__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(48),_component_core_AnnotateCanvas_elementActionReducer__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(230),_component_core_AnnotateCanvas_UI_BrushTools__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(155),_component_core_AnnotateCanvas_UI_EditTools__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(156),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hintsAnnotateMedia=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("h4",{children:"Annotation"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("p",{children:"Annotate on the media of your choice; switch the content using the media selector."}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("p",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"PanZoom"}),": panning and zooming the content"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("p",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"Selection"}),": select the annotation"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("p",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"Annotate"}),": annotate on the content"]})]}),AnnotatePanZoomImage=function AnnotatePanZoomImage(){var videoUrlKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_13__.select)("Media URL",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_19__.a,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_19__.a[0]),resolutionKnob=Object(_utils__WEBPACK_IMPORTED_MODULE_20__.b)().resolutionKnob,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_12__.useState)(_component_core_AnnotateCanvas_defaults__WEBPACK_IMPORTED_MODULE_21__.d),2),uiState=_useState2[0],setUiState=_useState2[1],_React$useReducer2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_12___default.a.useReducer(_component_core_AnnotateCanvas_elementActionReducer__WEBPACK_IMPORTED_MODULE_22__.a,_testdata_annotationSamples__WEBPACK_IMPORTED_MODULE_16__.a),2),elementsState=_React$useReducer2[0],elementsDispatcher=_React$useReducer2[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_utils__WEBPACK_IMPORTED_MODULE_20__.a,{hint:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{children:hintsAnnotateMedia}),children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_14__.a,{disabled:"panZoom"!==uiState.mode,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_17__.a,{render:function render(setContentSize){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("img",{style:{pointerEvents:"none",userSelect:"none"},src:videoUrlKnob,onLoad:function onLoad(e){setContentSize({width:e.currentTarget.width,height:e.currentTarget.height})}})}}),uiState.showAnnotation&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_17__.c,{pointerEventPassthrough:"panZoom"===uiState.mode,render:function render(panZoom,contentSize,containerSize){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_component_core_AnnotateCanvas_AnnotateCanvas__WEBPACK_IMPORTED_MODULE_15__.a,{elements:elementsState,width:containerSize.width,height:containerSize.height,panZoom:Object.assign({},panZoom,{scale:Object(_component_core_PanZoom_utils__WEBPACK_IMPORTED_MODULE_18__.f)(contentSize,panZoom.scale,resolutionKnob)}),uiState:uiState,setUiState:setUiState,onChangeElement:function onChangeElement(elementUpdates){return elementsDispatcher({type:"changeElement",elementUpdates:elementUpdates})},onAddElement:function onAddElement(newElement){elementsDispatcher({type:"addElement",newElement:newElement})},disabled:"panZoom"===uiState.mode})}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_component_core_AnnotateCanvas_UI_BrushTools__WEBPACK_IMPORTED_MODULE_23__.a,{uiState:uiState,setUIState:setUiState}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_component_core_AnnotateCanvas_UI_EditTools__WEBPACK_IMPORTED_MODULE_24__.a,{uiState:uiState,setUIState:setUiState})]})};AnnotatePanZoomImage.displayName="AnnotatePanZoomImage",AnnotatePanZoomImage.parameters={layout:"fullscreen"},__webpack_exports__.default={title:"All Together Now"},AnnotatePanZoomImage.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const videoUrlKnob = select('Media URL', artUrls, artUrls[0]);\n  const { resolutionKnob } = getAnnotateKnobs();\n\n  const [uiState, setUiState] =\n    useState<UserControllerInputs>(DEFAULT_UI_ATTRS);\n\n  const [elementsState, elementsDispatcher] = React.useReducer(\n    elementsActionReducer,\n    sampleAnnotations,\n  );\n\n  return (\n    <StoryHint hint={<div>{hintsAnnotateMedia}</div>}>\n      <PanZoom disabled={uiState.mode !== 'panZoom'}>\n        <PanZoomContent\n          render={(setContentSize) => (\n            <img\n              style={{ pointerEvents: 'none', userSelect: 'none' }}\n              src={videoUrlKnob}\n              onLoad={(e: React.SyntheticEvent<HTMLImageElement>) => {\n                setContentSize({\n                  width: e.currentTarget.width,\n                  height: e.currentTarget.height,\n                });\n              }}\n            />\n          )}\n        />\n        {uiState.showAnnotation && (\n          <PanZoomOverlay\n            pointerEventPassthrough={uiState.mode === 'panZoom'}\n            render={(panZoom, contentSize, containerSize) => {\n              return (\n                <AnnotateCanvas\n                  elements={elementsState}\n                  width={containerSize.width}\n                  height={containerSize.height}\n                  panZoom={{\n                    ...panZoom,\n                    scale: normalizeScale(\n                      contentSize,\n                      panZoom.scale,\n                      resolutionKnob,\n                    ),\n                  }}\n                  uiState={uiState}\n                  setUiState={setUiState}\n                  onChangeElement={(elementUpdates) =>\n                    elementsDispatcher({\n                      type: 'changeElement',\n                      elementUpdates,\n                    })\n                  }\n                  onAddElement={(newElement) => {\n                    elementsDispatcher({ type: 'addElement', newElement });\n                  }}\n                  disabled={uiState.mode === 'panZoom'}\n                />\n              );\n            }}\n          />\n        )}\n      </PanZoom>\n      <BrushTools uiState={uiState} setUIState={setUiState} />\n      <EditTools uiState={uiState} setUIState={setUiState} />\n    </StoryHint>\n  );\n}"}},AnnotatePanZoomImage.parameters)},537:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"CustomControls",(function(){return CustomControls}));__webpack_require__(67),__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(0),_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(59),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(46),_component_core_MediaPlayer_RPlayer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(293),_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(121),_component_core_MediaPlayer_PlayerContext__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(94),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Default=function Default(){var mediaKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__.select)("Video",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c[0]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_component_core_MediaPlayer_RPlayer__WEBPACK_IMPORTED_MODULE_16__.a,{url:mediaKnob.url,controls:!0})};Default.displayName="Default";var CustomControls=function CustomControls(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(0),2),mediaIndex=_useState2[0],setMediaIndex=_useState2[1],mediaKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_15__.select)("Video",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c[mediaIndex]);return Object(react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){var index=_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c.reduce((function(a,c,i){return c.label===mediaKnob.label&&(a=i),a}),0);setMediaIndex(index)}),[mediaKnob]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_component_core_MediaPlayer_PlayerContext__WEBPACK_IMPORTED_MODULE_18__.b,{value:{mediaList:_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_14__.c,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_17__.c,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_17__.d,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_component_composer_playerComposer__WEBPACK_IMPORTED_MODULE_17__.a,{})]})]})})})};CustomControls.displayName="CustomControls",Default.parameters={layout:"fullscreen"},__webpack_exports__.default={title:"Components/MediaPlayer"},Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const mediaKnob = select('Video', mediaList, mediaList[0]);\n  return <RPlayer url={mediaKnob.url} controls={true} />;\n}"}},Default.parameters),CustomControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [mediaIndex, setMediaIndex] = useState(0);\n  const mediaKnob = select('Video', mediaList, mediaList[mediaIndex]);\n\n  useEffect(() => {\n    const index = mediaList.reduce((a, c, i) => {\n      if (c.label === mediaKnob.label) a = i;\n      return a;\n    }, 0);\n    setMediaIndex(index);\n  }, [mediaKnob]);\n\n  return (\n    <div>\n      <PlayerContextProvider\n        value={{ mediaList, mediaIndex, setMediaIndex }}\n      >\n        <div>\n          <playerComposer.Player />\n          <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\n            <playerComposer.Timeline />\n            <playerComposer.PlayDeck />\n          </div>\n        </div>\n      </PlayerContextProvider>\n    </div>\n  );\n}"}},CustomControls.parameters)},538:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));__webpack_require__(14),__webpack_require__(0);var _storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(46),_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(157),_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(75),_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(59),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(144),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),hintsDefault=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("h3",{children:"PanZoom"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("p",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("b",{children:"Tablet"}),": pan and zoom using two fingers"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("p",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("b",{children:"Laptop"}),": zoom using mouse wheel or using two finger gesture on trackpad"]})]}),Default=(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,function Default(){var videoUrlKnob=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.select)("Media URL",_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_5__.a,_testdata_mediaSamples__WEBPACK_IMPORTED_MODULE_5__.a[0]),disabled=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.boolean)("Disabled",!1);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_6__.a,{hint:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{children:hintsDefault}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_component_core_PanZoom__WEBPACK_IMPORTED_MODULE_3__.a,{disabled:disabled,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_component_core_PanZoom_PanZoom__WEBPACK_IMPORTED_MODULE_4__.a,{render:function render(setContentSize){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("img",{style:{pointerEvents:"none",userSelect:"none"},src:videoUrlKnob,onLoad:function onLoad(e){setContentSize({width:e.currentTarget.width,height:e.currentTarget.height})}})}})})})});Default.displayName="Default",Default.parameters={layout:"fullscreen"},__webpack_exports__.default={title:"Components/PanZoom"},Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const videoUrlKnob = select('Media URL', artUrls, artUrls[0]);\n  const disabled = boolean('Disabled', false);\n\n  return (\n    <StoryHint hint={<div>{hintsDefault}</div>}>\n      <PanZoom disabled={disabled}>\n        <PanZoomContent\n          render={(setContentSize) => (\n            <img\n              style={{ pointerEvents: 'none', userSelect: 'none' }}\n              src={videoUrlKnob}\n              onLoad={(e: React.SyntheticEvent<HTMLImageElement>) => {\n                setContentSize({\n                  width: e.currentTarget.width,\n                  height: e.currentTarget.height,\n                });\n              }}\n            />\n          )}\n        />\n      </PanZoom>\n    </StoryHint>\n  );\n}"}},Default.parameters)},543:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return AnnotateCanvas_stories_Default})),__webpack_require__.d(__webpack_exports__,"Edit",(function(){return AnnotateCanvas_stories_Edit})),__webpack_require__.d(__webpack_exports__,"WithBrushControls",(function(){return AnnotateCanvas_stories_WithBrushControls}));__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(46),core_AnnotateCanvas=__webpack_require__(158).a;try{AnnotateCanvas.displayName="AnnotateCanvas",AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},panZoom:{defaultValue:null,description:"",name:"panZoom",required:!1,type:{name:"{ x: number; y: number; scale: number; }"}},clearOnElementModify:{defaultValue:null,description:"",name:"clearOnElementModify",required:!1,type:{name:"boolean"}},elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"AnnotateElement[]"}},onAddElement:{defaultValue:null,description:"",name:"onAddElement",required:!1,type:{name:"((element: AnnotateElement) => void)"}},onChangeElement:{defaultValue:null,description:"",name:"onChangeElement",required:!1,type:{name:"((elementUpdates: Partial<AnnotateElement>[]) => void)"}},selection:{defaultValue:null,description:"",name:"selection",required:!1,type:{name:"string[]"}},onSelection:{defaultValue:null,description:"",name:"onSelection",required:!1,type:{name:"((selected: string[]) => void)"}},uiState:{defaultValue:null,description:"",name:"uiState",required:!1,type:{name:"UserControllerInputs"}},setUiState:{defaultValue:null,description:"",name:"setUiState",required:!1,type:{name:"((u: UserControllerInputs) => void)"}},selectionConfig:{defaultValue:null,description:"",name:"selectionConfig",required:!1,type:{name:"UserSelectionConfig"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},debugLogging:{defaultValue:null,description:"",name:"debugLogging",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"]={docgenInfo:AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/core/AnnotateCanvas/index.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}var elementActionReducer=__webpack_require__(230),annotationSamples=__webpack_require__(127),BrushTools=__webpack_require__(155),EditTools=__webpack_require__(156),defaults=__webpack_require__(48),jsx_runtime=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AnnotateCanvas_stories_Default=function Default(){return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:annotationSamples.a,width:480,height:480,backgroundColor:"SlateGray"})})};AnnotateCanvas_stories_Default.displayName="Default";var AnnotateCanvas_stories_Edit=function Edit(){var shapeKnob=Object(dist.optionsKnob)("Shape",{Ellipse:"Ellipse",Rect:"Rect",Textbox:"Textbox",Path:"Path"},"Rect",{display:"inline-radio"}),canvasModeKnob=Object(dist.optionsKnob)("Canvas Mode",{draw:"draw",selection:"selection"},"draw",{display:"inline-radio"}),fontSizeKnob=Object(dist.number)("Attr/Font Size",24,{range:!0,min:6,max:50,step:1}),colorKnob=Object(dist.color)("Stroke","#11ff33"),strokeWidthKnob=Object(dist.number)("Stroke Width",3,{range:!0,min:1,max:10,step:1}),_React$useReducer2=_slicedToArray(react_default.a.useReducer(elementActionReducer.a,annotationSamples.a),2),elementsState=_React$useReducer2[0],elementsDispatcher=_React$useReducer2[1],uiState={mode:canvasModeKnob,showAnnotation:!0,shape:shapeKnob,fontSize:fontSizeKnob,color:colorKnob,strokeWidth:strokeWidthKnob,fontFamily:"Times New Roman"};return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:elementsState,uiState:uiState,width:480,height:480,backgroundColor:"SlateGray",onChangeElement:function onChangeElement(elementUpdates){return elementsDispatcher({type:"changeElement",elementUpdates:elementUpdates})},onAddElement:function onAddElement(newElement){elementsDispatcher({type:"addElement",newElement:newElement})}})})};AnnotateCanvas_stories_Edit.displayName="Edit";var AnnotateCanvas_stories_WithBrushControls=function WithBrushControls(){var _useState2=_slicedToArray(Object(react.useState)(defaults.d),2),uiState=_useState2[0],setUiState=_useState2[1],_React$useReducer4=_slicedToArray(react_default.a.useReducer(elementActionReducer.a,annotationSamples.a),2),elementsState=_React$useReducer4[0],elementsDispatcher=_React$useReducer4[1];return Object(jsx_runtime.jsxs)("div",{id:"top_panel",style:{display:"flex"},children:[uiState.showAnnotation&&Object(jsx_runtime.jsx)(core_AnnotateCanvas,{elements:elementsState,width:480,height:480,backgroundColor:"SlateGray",uiState:uiState,setUiState:setUiState,onChangeElement:function onChangeElement(elementUpdates){return elementsDispatcher({type:"changeElement",elementUpdates:elementUpdates})},onAddElement:function onAddElement(newElement){elementsDispatcher({type:"addElement",newElement:newElement})}}),Object(jsx_runtime.jsx)(BrushTools.a,{uiState:uiState,setUIState:setUiState}),Object(jsx_runtime.jsx)(EditTools.a,{uiState:uiState,setUIState:setUiState})]})};AnnotateCanvas_stories_WithBrushControls.displayName="WithBrushControls",AnnotateCanvas_stories_WithBrushControls.parameters={layout:"fullscreen"};__webpack_exports__.default={title:"Components/AnnotateCanvas"};AnnotateCanvas_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  return (\n    <div>\n      <AnnotateCanvas\n        elements={sampleAnnotations}\n        width={480}\n        height={480}\n        backgroundColor={'SlateGray'}\n      />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_Default.parameters),AnnotateCanvas_stories_Edit.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const shapeKnob = optionsKnob(\n    'Shape',\n    {\n      Ellipse: 'Ellipse',\n      Rect: 'Rect',\n      Textbox: 'Textbox',\n      Path: 'Path',\n    },\n    'Rect',\n    { display: 'inline-radio' },\n  );\n  const canvasModeKnob = optionsKnob(\n    'Canvas Mode',\n    { draw: 'draw', selection: 'selection' },\n    'draw',\n    { display: 'inline-radio' },\n  );\n  const fontSizeKnob = number('Attr/Font Size', 24, {\n    range: true,\n    min: 6,\n    max: 50,\n    step: 1,\n  });\n  const colorKnob = color('Stroke', '#11ff33');\n  const strokeWidthKnob = number('Stroke Width', 3, {\n    range: true,\n    min: 1,\n    max: 10,\n    step: 1,\n  });\n\n  const [elementsState, elementsDispatcher] = React.useReducer(\n    elementsActionReducer,\n    sampleAnnotations,\n  );\n\n  const uiState: UserControllerInputs = {\n    mode: canvasModeKnob,\n    showAnnotation: true,\n    shape: shapeKnob,\n    fontSize: fontSizeKnob,\n    color: colorKnob,\n    strokeWidth: strokeWidthKnob,\n    fontFamily: 'Times New Roman',\n  };\n\n  return (\n    <div>\n      <AnnotateCanvas\n        elements={elementsState}\n        uiState={uiState}\n        width={480}\n        height={480}\n        backgroundColor={'SlateGray'}\n        onChangeElement={(elementUpdates) =>\n          elementsDispatcher({ type: 'changeElement', elementUpdates })\n        }\n        onAddElement={(newElement) => {\n          elementsDispatcher({ type: 'addElement', newElement });\n        }}\n      />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_Edit.parameters),AnnotateCanvas_stories_WithBrushControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [uiState, setUiState] =\n    useState<UserControllerInputs>(DEFAULT_UI_ATTRS);\n\n  const [elementsState, elementsDispatcher] = React.useReducer(\n    elementsActionReducer,\n    sampleAnnotations,\n  );\n\n  return (\n    <div id=\"top_panel\" style={{ display: 'flex' }}>\n      {uiState.showAnnotation && (\n        <AnnotateCanvas\n          elements={elementsState}\n          width={480}\n          height={480}\n          backgroundColor={'SlateGray'}\n          uiState={uiState}\n          setUiState={setUiState}\n          onChangeElement={(elementUpdates) =>\n            elementsDispatcher({ type: 'changeElement', elementUpdates })\n          }\n          onAddElement={(newElement) => {\n            elementsDispatcher({ type: 'addElement', newElement });\n          }}\n        />\n      )}\n\n      <BrushTools uiState={uiState} setUIState={setUiState} />\n      <EditTools uiState={uiState} setUIState={setUiState} />\n    </div>\n  );\n}"}},AnnotateCanvas_stories_WithBrushControls.parameters)},544:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PanZoomAnnotateOembed",(function(){return CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed}));__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),PanZoom=__webpack_require__(157),PanZoom_PanZoom=__webpack_require__(75),mediaSamples=__webpack_require__(59),annotationSamples=__webpack_require__(127),playerComposer=__webpack_require__(121),utils=(__webpack_require__(191),__webpack_require__(66)),AnnotateCanvas_AnnotateCanvas=__webpack_require__(158),BrushTools=__webpack_require__(155),EditTools=__webpack_require__(156),MediaAnnotateContext=__webpack_require__(160),PlayerContext=__webpack_require__(94),AnnotateCanvas_utils=__webpack_require__(42),jsx_runtime=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var annotateComposer_AnnotateCanvas=function AnnotateCanvas(props){var _useContext=Object(react.useContext)(PanZoom_PanZoom.b),containerSize=_useContext.containerSize,panZoom=_useContext.panZoom,contentSize=_useContext.contentSize,_useContext2=Object(react.useContext)(MediaAnnotateContext.a),elements=_useContext2.elements,onAddElement=_useContext2.onAddElement,onChangeElement=_useContext2.onChangeElement,selection=_useContext2.selection,onSelection=_useContext2.onSelection,_useState2=_slicedToArray(Object(react.useState)(panZoom),2),normPanZoomSpec=_useState2[0],setNormPanZoomSpec=_useState2[1];Object(react.useEffect)((function(){return setNormPanZoomSpec(Object.assign({},panZoom,{scale:Object(utils.f)(contentSize,panZoom.scale,1e3)}))}),[panZoom]);return props.uiState.showAnnotation?Object(jsx_runtime.jsx)(AnnotateCanvas_AnnotateCanvas.a,{elements:elements,selection:selection,onSelection:onSelection,width:containerSize.width,height:containerSize.height,panZoom:normPanZoomSpec,uiState:props.uiState,setUiState:props.setUiState,disabled:"panZoom"===props.uiState.mode,onAddElement:function onAddElementHelper(elm){onAddElement(elm),"Path"!==elm.etype&&(props.setUiState(Object.assign({},props.uiState,{mode:"selection"})),window.setTimeout(onSelection,100,[elm.id]))},onChangeElement:onChangeElement,clearOnElementModify:!0}):null},annotateComposer_AnnotateTools=function AnnotateTools(props){var _useContext3=Object(react.useContext)(PlayerContext.a),playerState=_useContext3.playerState,playing=_useContext3.playing,_useContext4=Object(react.useContext)(MediaAnnotateContext.a),isKey=_useContext4.isKey,keyTime=_useContext4.keyTime,onAddKey=_useContext4.onAddKey,onRemoveKey=_useContext4.onRemoveKey,selection=_useContext4.selection,onRemoveElements=_useContext4.onRemoveElements;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(BrushTools.a,{uiState:props.uiState,setUIState:props.setUiState,hide:playing}),Object(jsx_runtime.jsx)(EditTools.a,{uiState:props.uiState,setUIState:props.setUiState,onAddKey:onAddKey,disableAddKey:keyTime===Object(AnnotateCanvas_utils.f)(playerState.played),onRemoveKey:onRemoveKey,disableRemoveKey:!isKey,onDeleteSelection:function onDeleteSelection(){return onRemoveElements(selection)},disableDeleteSelection:0===selection.length,hide:playing})]})};try{annotateComposer_AnnotateCanvas.displayName="AnnotateCanvas",annotateComposer_AnnotateCanvas.__docgenInfo={description:"",displayName:"AnnotateCanvas",props:{uiState:{defaultValue:null,description:"",name:"uiState",required:!0,type:{name:"UserControllerInputs"}},setUiState:{defaultValue:null,description:"",name:"setUiState",required:!0,type:{name:"(u: UserControllerInputs) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/composer/annotateComposer.tsx#AnnotateCanvas"]={docgenInfo:annotateComposer_AnnotateCanvas.__docgenInfo,name:"AnnotateCanvas",path:"src/component/composer/annotateComposer.tsx#AnnotateCanvas"})}catch(__react_docgen_typescript_loader_error){}try{annotateComposer_AnnotateTools.displayName="AnnotateTools",annotateComposer_AnnotateTools.__docgenInfo={description:"",displayName:"AnnotateTools",props:{uiState:{defaultValue:null,description:"",name:"uiState",required:!0,type:{name:"UserControllerInputs"}},setUiState:{defaultValue:null,description:"",name:"setUiState",required:!0,type:{name:"(u: UserControllerInputs) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/composer/annotateComposer.tsx#AnnotateTools"]={docgenInfo:annotateComposer_AnnotateTools.__docgenInfo,name:"AnnotateTools",path:"src/component/composer/annotateComposer.tsx#AnnotateTools"})}catch(__react_docgen_typescript_loader_error){}var defaults=__webpack_require__(48),component_utils=__webpack_require__(144),dist=__webpack_require__(46);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return CombinedPanzoomAnnotateOembed_stories_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||CombinedPanzoomAnnotateOembed_stories_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CombinedPanzoomAnnotateOembed_stories_slicedToArray(arr,i){return function CombinedPanzoomAnnotateOembed_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CombinedPanzoomAnnotateOembed_stories_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||CombinedPanzoomAnnotateOembed_stories_unsupportedIterableToArray(arr,i)||function CombinedPanzoomAnnotateOembed_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CombinedPanzoomAnnotateOembed_stories_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return CombinedPanzoomAnnotateOembed_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CombinedPanzoomAnnotateOembed_stories_arrayLikeToArray(o,minLen):void 0}}function CombinedPanzoomAnnotateOembed_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hintsAnnotateOembed=Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h4",{children:"Annotate oEmbed"}),"oEmbed allows webapps to embed media from YouTube, Vimeo, Sound Cloud, etc.",Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"PanZoom"}),": panning and zooming the content"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Selection"}),": select the annotation"]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("b",{children:"Annotate"}),": annotate on the content"]})]}),CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed=function PanZoomAnnotateOembed(){var _useState2=CombinedPanzoomAnnotateOembed_stories_slicedToArray(Object(react.useState)(0),2),mediaIndex=_useState2[0],setMediaIndex=_useState2[1];Object(dist.button)("Log Annotation to Console",(function(){console.log("Annotation state: ",annotationList[mediaIndex])}));var _useState4=CombinedPanzoomAnnotateOembed_stories_slicedToArray(Object(react.useState)(defaults.d),2),uiState=_useState4[0],setUiState=_useState4[1],_useState6=CombinedPanzoomAnnotateOembed_stories_slicedToArray(Object(react.useState)(annotationSamples.b),2),annotationList=_useState6[0],setAnnotationList=_useState6[1];return Object(jsx_runtime.jsx)(component_utils.a,{hint:Object(jsx_runtime.jsx)("div",{children:hintsAnnotateOembed}),children:Object(jsx_runtime.jsx)(PlayerContext.b,{value:{mediaList:mediaSamples.b,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex},children:Object(jsx_runtime.jsx)(MediaAnnotateContext.b,{mediaAnnotation:annotationList[mediaIndex],setMediaAnnotation:function setMediaAnnotation(s){var newAnnotationList=_toConsumableArray(annotationList);newAnnotationList[mediaIndex]=s,setAnnotationList(newAnnotationList)},children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(PanZoom.a,{disabled:"panZoom"!==uiState.mode,children:[Object(jsx_runtime.jsx)(PanZoom_PanZoom.a,{children:Object(jsx_runtime.jsx)(playerComposer.c,{controls:false})}),Object(jsx_runtime.jsx)(PanZoom_PanZoom.c,{pointerEventPassthrough:false,children:Object(jsx_runtime.jsx)(annotateComposer_AnnotateCanvas,{uiState:uiState,setUiState:setUiState})})]}),Object(jsx_runtime.jsx)(playerComposer.b,{}),Object(jsx_runtime.jsx)(annotateComposer_AnnotateTools,{uiState:uiState,setUiState:setUiState})]})})})})};CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed.displayName="PanZoomAnnotateOembed",CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed.parameters={layout:"fullscreen"};__webpack_exports__.default={title:"All Together Now"};CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const nativeControls = false;\n  const [mediaIndex, setMediaIndex] = useState(0);\n  button('Log Annotation to Console', () => {\n    console.log('Annotation state: ', annotationList[mediaIndex]);\n  });\n\n  const [uiState, setUiState] =\n    useState<UserControllerInputs>(DEFAULT_UI_ATTRS);\n\n  const [annotationList, setAnnotationList] = useState<TimedSketch[][]>(\n    sampleMediaAnnotateList,\n  );\n\n  return (\n    <StoryHint hint={<div>{hintsAnnotateOembed}</div>}>\n      <PlayerContextProvider\n        value={{ mediaList: mediaSamples2, mediaIndex, setMediaIndex }}\n      >\n        <MediaAnnotationContextProvider\n          mediaAnnotation={annotationList[mediaIndex]}\n          setMediaAnnotation={(s: TimedSketch[]) => {\n            const newAnnotationList = [...annotationList];\n            newAnnotationList[mediaIndex] = s;\n            setAnnotationList(newAnnotationList);\n          }}\n        >\n          <div>\n            <PanZoom disabled={uiState.mode !== 'panZoom'}>\n              <PanZoomContent>\n                <playerComposer.Player controls={nativeControls} />\n              </PanZoomContent>\n              <PanZoomOverlay pointerEventPassthrough={nativeControls}>\n                <annotateComposer.AnnotateCanvas\n                  uiState={uiState}\n                  setUiState={setUiState}\n                />\n              </PanZoomOverlay>\n            </PanZoom>\n            {!nativeControls && <playerComposer.PlayDeckWithTimeline />}\n            <annotateComposer.AnnotateTools\n              uiState={uiState}\n              setUiState={setUiState}\n            />\n          </div>\n        </MediaAnnotationContextProvider>\n      </PlayerContextProvider>\n    </StoryHint>\n  );\n}"}},CombinedPanzoomAnnotateOembed_stories_PanZoomAnnotateOembed.parameters)},545:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return StopWatch_stories_Default}));__webpack_require__(14);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),jsx_runtime=(__webpack_require__(376),__webpack_require__(191),__webpack_require__(371),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22),__webpack_require__(1));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StopWatch_StopWatch=function StopWatch(_ref){var text=_ref.text,color=_ref.color,displayTimeInputRef=_ref.displayTimeInputRef,_React$useState2=_slicedToArray(react_default.a.useState(""),2),displayTime=_React$useState2[0],setDisplayTime=_React$useState2[1],displayTimer=react_default.a.useRef(null),startTime=react_default.a.useRef(null);react_default.a.useEffect((function(){return toggleClock(),function(){null!==displayTimer.current&&window.clearInterval(displayTimer.current)}}),[]);var toggleClock=function toggleClock(){null!==displayTimer.current?(window.clearInterval(displayTimer.current),setDisplayTime("0"),displayTimer.current=null):(startTime.current=new Date,displayTimer.current=window.setInterval((function(){setDisplayTime((((new Date).getTime()-startTime.current.getTime())/1e3).toFixed(2))}),100))};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{style:{color:color},children:text}),Object(jsx_runtime.jsx)("input",{ref:displayTimeInputRef,type:"text",defaultValue:displayTime}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(e){return toggleClock()},children:"0"===displayTime?"Start":"Pause"})]})},experiment_StopWatch=StopWatch_StopWatch;try{StopWatch_StopWatch.displayName="StopWatch",StopWatch_StopWatch.__docgenInfo={description:"",displayName:"StopWatch",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},displayTimeInputRef:{defaultValue:null,description:"",name:"displayTimeInputRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/experiment/StopWatch/index.tsx#StopWatch"]={docgenInfo:StopWatch_StopWatch.__docgenInfo,name:"StopWatch",path:"src/component/experiment/StopWatch/index.tsx#StopWatch"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__(46),StopWatch_stories_Default=function Default(){var stopWatchTimeDisplayInputRef=react_default.a.useRef(null);return Object(dist.button)("Tell time using Ref",(function(){var _stopWatchTimeDisplay;alert(null===(_stopWatchTimeDisplay=stopWatchTimeDisplayInputRef.current)||void 0===_stopWatchTimeDisplay?void 0:_stopWatchTimeDisplay.value)})),Object(jsx_runtime.jsx)(experiment_StopWatch,{displayTimeInputRef:stopWatchTimeDisplayInputRef,text:"hello, world",color:"#00ff00"})};StopWatch_stories_Default.displayName="Default",StopWatch_stories_Default.parameters=Object.assign({storySource:{source:'(): JSX.Element => {\n  const stopWatchTimeDisplayInputRef = React.useRef<HTMLInputElement|null>(null);\n\n  button(\'Tell time using Ref\', () => {\n    alert(stopWatchTimeDisplayInputRef.current?.value);\n  });\n\n  return (\n    <StopWatch\n      displayTimeInputRef={stopWatchTimeDisplayInputRef}\n      text="hello, world"\n      color="#00ff00"\n    />\n  );\n}'}},StopWatch_stories_Default.parameters)},546:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Timeline_stories_Default})),__webpack_require__.d(__webpack_exports__,"UseFrames",(function(){return Timeline_stories_UseFrames})),__webpack_require__.d(__webpack_exports__,"WithPlayControls",(function(){return Timeline_stories_WithPlayControls}));__webpack_require__(14),__webpack_require__(69),__webpack_require__(4),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22);var react=__webpack_require__(0),PlayDeck=__webpack_require__(204),core_Timeline=__webpack_require__(292).a;try{Timeline.displayName="Timeline",Timeline.__docgenInfo={description:"",displayName:"Timeline",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},currentTime:{defaultValue:null,description:"",name:"currentTime",required:!0,type:{name:"number"}},currentCached:{defaultValue:null,description:"",name:"currentCached",required:!1,type:{name:"number"}},useFrameDisplay:{defaultValue:{value:"false"},description:"",name:"useFrameDisplay",required:!1,type:{name:"boolean"}},frameRange:{defaultValue:null,description:"",name:"frameRange",required:!1,type:{name:"[number, number]"}},timelineCaptured:{defaultValue:null,description:"",name:"timelineCaptured",required:!1,type:{name:"boolean"}},onTimelineCaptured:{defaultValue:null,description:"",name:"onTimelineCaptured",required:!1,type:{name:"((captured: boolean) => void)"}},onTimelineSeek:{defaultValue:null,description:"",name:"onTimelineSeek",required:!1,type:{name:"((seekTime: number, seekFrameIndex?: number) => void)"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"((e: any) => void)"}},themeColor:{defaultValue:{value:"red"},description:"",name:"themeColor",required:!1,type:{name:"string"}},zeroClamp:{defaultValue:null,description:"",name:"zeroClamp",required:!1,type:{name:"{ clipDuration: number; threshold: number; }"}},markerList:{defaultValue:null,description:"",name:"markerList",required:!1,type:{name:"number[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/Timeline/index.tsx#Timeline"]={docgenInfo:Timeline.__docgenInfo,name:"Timeline",path:"src/component/core/Timeline/index.tsx#Timeline"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__(1);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Components/Timeline"};var Timeline_stories_Default=function Default(){var _useState2=_slicedToArray(Object(react.useState)(.25),2),currentTime=_useState2[0],setCurrentTime=_useState2[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:300,onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_Default.displayName="Default";var Timeline_stories_UseFrames=function UseFrames(){var _useState4=_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState4[0],setCurrentTime=_useState4[1];return Object(jsx_runtime.jsx)("div",{id:"example Container",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,110],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}})})};Timeline_stories_UseFrames.displayName="UseFrames";var Timeline_stories_WithPlayControls=function WithPlayControls(){var _useState6=_slicedToArray(Object(react.useState)(.5),2),currentTime=_useState6[0],setCurrentTime=_useState6[1],_useState8=_slicedToArray(Object(react.useState)(!0),2),playing=_useState8[0],setPlaying=_useState8[1],_useState10=_slicedToArray(Object(react.useState)(0),2),loopTypeIndex=_useState10[0],setLoopTypeIndex=_useState10[1],playDeck=Object(jsx_runtime.jsx)(PlayDeck.b,{playing:playing,onPlay:function onPlay(){setPlaying((function(p){return!p}))},onSkipNext:function onSkipNext(){console.log("Play Next")},onSkipPrev:function onSkipPrev(){console.log("Play Previous")},loopType:PlayDeck.a[loopTypeIndex],onToggleLoop:function onToggleLoop(){setLoopTypeIndex((loopTypeIndex+1)%PlayDeck.a.length)}});return Object(jsx_runtime.jsx)("div",{id:"mainWindow",style:{paddingTop:"100px",height:"100%",background:"#888",marginLeft:"20px",width:"calc(100% - 40px)"},children:Object(jsx_runtime.jsxs)("div",{id:"playControlPanel",style:{position:"relative",width:"100%"},children:[Object(jsx_runtime.jsx)(core_Timeline,{currentTime:currentTime,duration:2,useFrameDisplay:!0,frameRange:[101,148],onTimelineSeek:function handleTimelineSeek(seekTime){setCurrentTime(seekTime)}}),playDeck]})})};Timeline_stories_WithPlayControls.displayName="WithPlayControls",Timeline_stories_Default.parameters={layout:"fullscreen"},Timeline_stories_Default.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.25);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline currentTime={currentTime} duration={300} onTimelineSeek={handleTimelineSeek} />\n    </div>\n  );\n}"}},Timeline_stories_Default.parameters),Timeline_stories_UseFrames.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  return (\n    <div\n      id=\"example Container\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <Timeline\n        currentTime={currentTime}\n        duration={2}\n        useFrameDisplay={true}\n        frameRange={[101, 110]}\n        onTimelineSeek={handleTimelineSeek}\n      />\n    </div>\n  );\n}"}},Timeline_stories_UseFrames.parameters),Timeline_stories_WithPlayControls.parameters=Object.assign({storySource:{source:"(): JSX.Element => {\n  const [currentTime, setCurrentTime] = useState(0.5);\n  const [playing, setPlaying] = useState(true);\n\n  const [loopTypeIndex, setLoopTypeIndex] = useState<number>(0);\n\n  const handleTimelineSeek = (seekTime: number) => {\n    setCurrentTime(seekTime);\n  };\n\n  const playDeck = (\n    <PlayDeck\n      playing={playing}\n      onPlay={() => {\n        setPlaying((p) => !p);\n      }}\n      onSkipNext={() => {\n        console.log('Play Next');\n      }}\n      onSkipPrev={() => {\n        console.log('Play Previous');\n      }}\n      loopType={LOOP_TYPE_LIST[loopTypeIndex]}\n      onToggleLoop={() => {\n        setLoopTypeIndex((loopTypeIndex + 1) % LOOP_TYPE_LIST.length);\n      }}\n    />\n  );\n\n  return (\n    <div\n      id=\"mainWindow\"\n      style={{\n        paddingTop: '100px',\n        height: '100%',\n        background: '#888',\n        marginLeft: '20px',\n        width: 'calc(100% - 40px)',\n      }}\n    >\n      <div id=\"playControlPanel\" style={{ position: 'relative', width: '100%' }}>\n        <Timeline\n          currentTime={currentTime}\n          duration={2}\n          useFrameDisplay={true}\n          frameRange={[101, 148]}\n          onTimelineSeek={handleTimelineSeek}\n        />\n        {playDeck}\n      </div>\n    </div>\n  );\n}"}},Timeline_stories_WithPlayControls.parameters)},59:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return mediaSamples2})),__webpack_require__.d(__webpack_exports__,"a",(function(){return artUrls})),__webpack_require__.d(__webpack_exports__,"c",(function(){return mediaSamplesWithLabel}));__webpack_require__(67),__webpack_require__(14);var vimeo1={provider_name:"Vimeo",type:"video",url:"https://vimeo.com/channels/staffpicks/539430817",width:640,height:360,thumbnail_url:"https://i.vimeocdn.com/video/1116774666_640.jpg",title:"The Pitch Song",author_url:"https://vimeo.com/giantant",duration:94.59},video2={provider_name:"",type:"video",url:"https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/720/Big_Buck_Bunny_720_10s_2MB.mp4",title:"Big_Buck_Bunny_720_10s_2MB.mp4",width:1280,height:720,duration:10},soundCloud1={provider_name:"SoundCloud",type:"audio",url:"https://soundcloud.com/miami-nights-1984/accelerated",width:800,height:450,duration:236.43,title:"MIAMI NIGHTS 1984"},mediaSamples2=[video2,vimeo1,{provider_name:"YouTube",type:"video",url:"https://www.youtube.com/watch?v=o-YBDTqX_ZU",width:200,height:150,duration:212.041,thumbnail_url:"https://i.ytimg.com/vi/o-YBDTqX_ZU/hqdefault.jpg",title:"Rick Astley - Never Gonna Give You Up",author_url:"https://www.youtube.com/c/MusRest"},{provider_name:"",type:"image",url:"https://upload.wikimedia.org/wikipedia/commons/9/9c/Claude_Monet_-_Nymph%C3%A9as%2C_effet_du_soir_W1504_-_Mus%C3%A9e_Marmottan-Monet.jpg",width:1404,height:1024,duration:0},soundCloud1],artUrls=["https://upload.wikimedia.org/wikipedia/commons/9/9c/Claude_Monet_-_Nymph%C3%A9as%2C_effet_du_soir_W1504_-_Mus%C3%A9e_Marmottan-Monet.jpg","https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Tsunami_by_hokusai_19th_century.jpg/1024px-Tsunami_by_hokusai_19th_century.jpg"],mediaSamplesWithLabel=[vimeo1,{provider_name:"YouTube",type:"video",url:"https://www.youtube.com/watch?v=KMX_FuOLoCI",width:200,height:150,duration:56.121,thumbnail_url:"https://i.ytimg.com/vi/KMX_FuOLoCI/hqdefault.jpg",title:"Steve Jobs Makes Fun of DOS in 1992",author_name:"MusRest",author_url:"https://www.youtube.com/c/AriWeinstein"},video2,{provider_name:"",type:"video",url:"https://cdn.videvo.net/videvo_files/video/free/2019-02/small_watermarked/181004_10_LABORATORIES-SCIENCE_12_preview.webm",title:"181004_10_LABORATORIES-SCIENCE_12_preview.webm",width:428,height:240,duration:8.563},soundCloud1].reduce((function(a,c){return a.push(Object.assign({},c,{label:c.title})),a}),[])},617:function(module,exports,__webpack_require__){__webpack_require__(618),__webpack_require__(776),__webpack_require__(777),__webpack_require__(1044),__webpack_require__(1045),__webpack_require__(967),__webpack_require__(1051),__webpack_require__(1050),__webpack_require__(1047),__webpack_require__(1052),__webpack_require__(1048),__webpack_require__(1049),__webpack_require__(1053),module.exports=__webpack_require__(981)},66:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getContentFitSpec})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getAbsoluteCoords})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getDistance})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getMidPoint})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getTouchCoords})),__webpack_require__.d(__webpack_exports__,"f",(function(){return normalizeScale})),__webpack_require__.d(__webpack_exports__,"g",(function(){return normalizeSize}));__webpack_require__(30),__webpack_require__(22),__webpack_require__(12);var getContentFitSpec=function getContentFitSpec(content,container){var viewerAspect=container.width/container.height,contentAspect=content.width/content.height,ratioWidth=container.width/content.width,ratioHeight=container.height/content.height,scale=viewerAspect>contentAspect?ratioHeight:ratioWidth;return{x:Math.abs(container.width-content.width*scale)/2,y:Math.abs(container.height-content.height*scale)/2,scale:scale}},getAbsoluteCoords=function getAbsoluteCoords(coords,boundingRect){return{x:coords.clientX-boundingRect.left,y:coords.clientY-boundingRect.top}},getDistance=function getDistance(points){return Math.sqrt(Math.pow(points[0].x-points[1].x,2)+Math.pow(points[0].y-points[1].y,2))},getMidPoint=function getMidPoint(points){return[(points[0].x+points[1].x)/2,(points[0].y+points[1].y)/2]},getTouchCoords=function getTouchCoords(evt){return Array.from(evt.touches).map((function(t){return getAbsoluteCoords(t,evt.currentTarget.getBoundingClientRect())}))},normalizeScale=function normalizeScale(contentSize,scale,resolution){return Math.max(contentSize.width/resolution,contentSize.height/resolution)*scale},normalizeSize=function normalizeSize(contentSize,resolution){return contentSize.width/resolution>contentSize.height/resolution?{width:resolution,height:contentSize.height/contentSize.width*resolution}:{height:resolution,width:contentSize.width/contentSize.height*resolution}}},685:function(module,exports){},75:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return PanZoomContext})),__webpack_require__.d(__webpack_exports__,"c",(function(){return PanZoom_PanZoomOverlay})),__webpack_require__.d(__webpack_exports__,"a",(function(){return PanZoom_PanZoomContent}));__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(69),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22),__webpack_require__(14);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),utils=(__webpack_require__(470),__webpack_require__(178),__webpack_require__(66));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getNewPosition=function getNewPosition(posOri,pointerPosOri,scaleOri,pointerPosNow,scaleNow){return pointerPosNow-(pointerPosOri-posOri)/scaleOri*scaleNow},browser=(__webpack_require__(1010),__webpack_require__(143)),jsx_runtime=__webpack_require__(1),_excluded=["disabled","zoomBounds"],_excluded2=["inProgress"],_excluded3=["inProgress"];function PanZoom_slicedToArray(arr,i){return function PanZoom_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PanZoom_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PanZoom_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PanZoom_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PanZoom_arrayLikeToArray(o,minLen)}(arr,i)||function PanZoom_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PanZoom_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var PanZoomContext=react_default.a.createContext({inProgress:!1,contentSize:{width:10,height:10},setContentSize:function setContentSize(_s){},containerSize:{width:10,height:10},panZoom:{x:0,y:0,scale:1}}),PanZoom_PanZoomOverlay=function PanZoomOverlay(props){var ctx=Object(react.useContext)(PanZoomContext);return Object(jsx_runtime.jsx)("div",{className:"panzoom_overlay",style:{pointerEvents:props.pointerEventPassthrough?"none":void 0},children:props.render?props.render(ctx.panZoom,ctx.contentSize,ctx.containerSize,ctx.inProgress):props.children})};PanZoom_PanZoomOverlay.displayName="PanZoomOverlay";var PanZoom_PanZoomContent=function PanZoomContent(props){var ctx=Object(react.useContext)(PanZoomContext);return Object(jsx_runtime.jsx)("div",{style:Object.assign({transformOrigin:"left top",transform:"translate("+ctx.panZoom.x+"px, "+ctx.panZoom.y+"px) scale("+ctx.panZoom.scale+")",position:"relative"},ctx.contentSize),children:props.render?props.render(ctx.setContentSize):props.children})};PanZoom_PanZoomContent.displayName="PanZoomContent";var PanZoom_PanZoom=function PanZoom(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$zoomBounds=_ref.zoomBounds,zoomBounds=void 0===_ref$zoomBounds?{min:.5,max:5}:_ref$zoomBounds,props=_objectWithoutProperties(_ref,_excluded),_useState2=PanZoom_slicedToArray(Object(react.useState)({x:0,y:0,scale:1}),2),panZoomState=_useState2[0],setPanZoomState=_useState2[1],contentFitSpecRef=Object(react.useRef)({fitSpec:{x:0,y:0,scale:1},min:1,max:1}),topContainerRef=react_default.a.useRef(null);Object(browser.b)(topContainerRef),Object(browser.c)(topContainerRef);var containerSize=function useMonitorResizable(ref){var _React$useState2=_slicedToArray(react_default.a.useState({width:10,height:10}),2),containerSize=_React$useState2[0],setContainerSize=_React$useState2[1];return react_default.a.useEffect((function(){var ro=new ResizeObserver((function(entries){entries.length>0&&setContainerSize({width:entries[0].contentRect.width,height:entries[0].contentRect.height})})),element=ref.current;return element&&ro.observe(element),function(){return ro.disconnect()}}),[ref]),containerSize}(topContainerRef),_useState4=PanZoom_slicedToArray(Object(react.useState)({width:10,height:10}),2),contentSize=_useState4[0],setContentSize=_useState4[1];Object(react.useLayoutEffect)((function(){var fitSpec=Object(utils.b)(contentSize,containerSize);contentFitSpecRef.current=Object.assign({fitSpec:fitSpec},zoomBounds),setPanZoomState(fitSpec)}),[contentSize,containerSize]);var _useTouchPanZoom=function useTouchPanZoom(panZoomState,setPanZoomState,contentFitSpec,disabled){var touchState=Object(react.useRef)(),_useState2=_slicedToArray(Object(react.useState)(!1),2),inProgress=_useState2[0],setInProgress=_useState2[1];return{onTouchStart:function onTouchStart(evt){disabled||(touchState.current={start:Object(utils.e)(evt),oriPanZoom:Object.assign({},panZoomState)})},onTouchEnd:function onTouchEnd(evt){0===evt.touches.length&&(touchState.current=void 0,setInProgress(!1))},onTouchMove:function handleTouchMove(evt){if(2===evt.touches.length&&touchState.current){setInProgress(!0);var oriPanZoom=touchState.current.oriPanZoom,touchesStart=touchState.current.start,touchesNow=Object(utils.e)(evt),startMid=Object(utils.d)([touchesStart[0],touchesStart[1]]),nowMid=Object(utils.d)(touchesNow),distancePrev=Object(utils.c)([touchesStart[0],touchesStart[1]]),scale=Object(utils.c)(touchesNow)/distancePrev*oriPanZoom.scale;scale=Math.min(contentFitSpec.current.max*contentFitSpec.current.fitSpec.scale,Math.max(contentFitSpec.current.min*contentFitSpec.current.fitSpec.scale,scale));var x=getNewPosition(oriPanZoom.x,startMid[0],oriPanZoom.scale,nowMid[0],scale),y=getNewPosition(oriPanZoom.y,startMid[1],oriPanZoom.scale,nowMid[1],scale);setPanZoomState({x:x,y:y,scale:scale})}},inProgress:inProgress}}(panZoomState,setPanZoomState,contentFitSpecRef,disabled),touchCaptured=_useTouchPanZoom.inProgress,touchHandlers=_objectWithoutProperties(_useTouchPanZoom,_excluded2),wheelHandler=function useWheelZoom(panZoomState,setPanZoomState,contentFitSpec,disabled){return{onWheel:function handleWheel(evt){if(!disabled){var coords=Object(utils.a)(evt,evt.currentTarget.getBoundingClientRect()),scaleDelta=-.01*evt.deltaY,scale=panZoomState.scale+scaleDelta;scale=Math.min(contentFitSpec.current.max*contentFitSpec.current.fitSpec.scale,Math.max(contentFitSpec.current.min*contentFitSpec.current.fitSpec.scale,scale));var x=getNewPosition(panZoomState.x,coords.x,panZoomState.scale,coords.x,scale),y=getNewPosition(panZoomState.y,coords.y,panZoomState.scale,coords.y,scale);0!==evt.deltaX||Number.isInteger(evt.deltaY)||setPanZoomState({x:x,y:y,scale:scale})}}}}(panZoomState,setPanZoomState,contentFitSpecRef),_usePointerPan=function usePointerPan(panZoomState,setPanZoomState,disabled){var pointerState=Object(react.useRef)(),_useState4=_slicedToArray(Object(react.useState)(!1),2),inProgress=_useState4[0],setInProgress=_useState4[1];return{onPointerDown:function onPointerDown(evt){if(!(disabled&&0===evt.button||2===evt.button)){var coords=Object(utils.a)(evt,evt.currentTarget.getBoundingClientRect());setInProgress(!0),pointerState.current={start:coords,oriPanZoom:Object.assign({},panZoomState)}}},onPointerUp:function onPointerUp(){pointerState.current=void 0,setInProgress(!1)},onPointerMove:function onPointerMove(evt){if(!(disabled&&0===evt.button||2===evt.button)){var coords=Object(utils.a)(evt,evt.currentTarget.getBoundingClientRect());if(pointerState.current){var x=getNewPosition(pointerState.current.oriPanZoom.x,pointerState.current.start.x,pointerState.current.oriPanZoom.scale,coords.x,panZoomState.scale),y=getNewPosition(pointerState.current.oriPanZoom.y,pointerState.current.start.y,pointerState.current.oriPanZoom.scale,coords.y,panZoomState.scale);setPanZoomState({x:x,y:y,scale:panZoomState.scale})}}},inProgress:inProgress}}(panZoomState,setPanZoomState,disabled||touchCaptured),pointerHandler=(_usePointerPan.inProgress,_objectWithoutProperties(_usePointerPan,_excluded3));return Object(react.useEffect)((function(){props.onPanZoom&&props.onPanZoom(panZoomState)}),[panZoomState]),Object(jsx_runtime.jsx)("div",Object.assign({ref:topContainerRef,className:"panzoom_top_container"},touchHandlers,wheelHandler,pointerHandler,{children:Object(jsx_runtime.jsx)(PanZoomContext.Provider,{value:{panZoom:panZoomState,inProgress:touchCaptured,containerSize:containerSize,contentSize:contentSize,setContentSize:setContentSize},children:props.children})}))};__webpack_exports__.d=PanZoom_PanZoom;try{PanZoom_PanZoomOverlay.displayName="PanZoomOverlay",PanZoom_PanZoomOverlay.__docgenInfo={description:"",displayName:"PanZoomOverlay",props:{render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"((panZoom: PanZoomSpec, contentSize: RectSize, containerSize: RectSize, inProgress: boolean) => Element)"}},pointerEventPassthrough:{defaultValue:null,description:"",name:"pointerEventPassthrough",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoomOverlay"]={docgenInfo:PanZoom_PanZoomOverlay.__docgenInfo,name:"PanZoomOverlay",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoomOverlay"})}catch(__react_docgen_typescript_loader_error){}try{PanZoom_PanZoomContent.displayName="PanZoomContent",PanZoom_PanZoomContent.__docgenInfo={description:"",displayName:"PanZoomContent",props:{render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"((setContentSize: (s: RectSize) => void) => Element)"}},normalizeRes:{defaultValue:null,description:"",name:"normalizeRes",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoomContent"]={docgenInfo:PanZoom_PanZoomContent.__docgenInfo,name:"PanZoomContent",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoomContent"})}catch(__react_docgen_typescript_loader_error){}try{PanZoom_PanZoom.displayName="PanZoom",PanZoom_PanZoom.__docgenInfo={description:"",displayName:"PanZoom",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},zoomBounds:{defaultValue:{value:"{ min: 0.5, max: 5 }"},description:"",name:"zoomBounds",required:!1,type:{name:"{ min: number; max: number; }"}},onPanZoom:{defaultValue:null,description:"",name:"onPanZoom",required:!1,type:{name:"((p: PanZoomSpec) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/PanZoom/PanZoom.tsx#PanZoom"]={docgenInfo:PanZoom_PanZoom.__docgenInfo,name:"PanZoom",path:"src/component/core/PanZoom/PanZoom.tsx#PanZoom"})}catch(__react_docgen_typescript_loader_error){}},777:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(442)},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PlayerContext})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PlayerContextProvider}));__webpack_require__(25),__webpack_require__(97),__webpack_require__(4),__webpack_require__(69),__webpack_require__(11),__webpack_require__(9),__webpack_require__(18),__webpack_require__(12),__webpack_require__(13),__webpack_require__(15),__webpack_require__(17),__webpack_require__(7),__webpack_require__(22),__webpack_require__(191);var react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1),_excluded=["value"];function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var PlayerContext=react__WEBPACK_IMPORTED_MODULE_14___default.a.createContext({mediaList:[],mediaIndex:0,setMediaIndex:function setMediaIndex(){},playing:!1,setPlaying:function setPlaying(){},seeking:!1,setSeeking:function setSeeking(){},seekTime:void 0,setSeekTime:function setSeekTime(){},playerState:{played:0,loaded:0,duration:0},setPlayerState:function setPlayerState(){},seekTimeReady:!1}),PlayerContextProvider=function PlayerContextProvider(_ref){var _ref$value=_ref.value,_ref$value$mediaList=_ref$value.mediaList,mediaList=void 0===_ref$value$mediaList?[]:_ref$value$mediaList,_ref$value$mediaIndex=_ref$value.mediaIndex,mediaIndex=void 0===_ref$value$mediaIndex?0:_ref$value$mediaIndex,_ref$value$setMediaIn=_ref$value.setMediaIndex,setMediaIndex=void 0===_ref$value$setMediaIn?function(){}:_ref$value$setMediaIn,props=_objectWithoutProperties(_ref,_excluded),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)(),2),seekTime=_useState2[0],setSeekTime=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)(!1),2),playing=_useState4[0],setPlaying=_useState4[1],_useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)({played:0,loaded:0,duration:0}),2),playerState=_useState6[0],setPlayerState=_useState6[1];Object(react__WEBPACK_IMPORTED_MODULE_14__.useEffect)((function(){var to=window.setTimeout(setSeekTime,500,void 0);return function(){return window.clearTimeout(to)}}),[seekTime]);var seekTimeReady="number"==typeof playerState.loaded&&0!==playerState.loaded||"number"==typeof playerState.played&&0!==playerState.played;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(PlayerContext.Provider,{value:{seekTimeReady:seekTimeReady,mediaList:mediaList,mediaIndex:mediaIndex,setMediaIndex:setMediaIndex,playing:playing,setPlaying:setPlaying,seekTime:seekTime,setSeekTime:setSeekTime,playerState:playerState,setPlayerState:setPlayerState},children:props.children})};PlayerContextProvider.displayName="PlayerContextProvider";try{PlayerContextProvider.displayName="PlayerContextProvider",PlayerContextProvider.__docgenInfo={description:"",displayName:"PlayerContextProvider",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Partial<PlayerContextInteface>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/core/MediaPlayer/PlayerContext.tsx#PlayerContextProvider"]={docgenInfo:PlayerContextProvider.__docgenInfo,name:"PlayerContextProvider",path:"src/component/core/MediaPlayer/PlayerContext.tsx#PlayerContextProvider"})}catch(__react_docgen_typescript_loader_error){}},981:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(442).configure)([__webpack_require__(982),__webpack_require__(983),__webpack_require__(1042),__webpack_require__(1043)],module,!1)}).call(this,__webpack_require__(221)(module))},982:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=982},983:function(module,exports,__webpack_require__){var map={"./stories/component/AnnotateCanvas.stories.tsx":543,"./stories/component/CombinedPanzoomAnnotateImage.stories.tsx":534,"./stories/component/CombinedPanzoomAnnotateOembed.stories.tsx":544,"./stories/component/MediaPlayer.stories.tsx":537,"./stories/component/PanZoomPinch.stories.tsx":538,"./stories/component/StopWatch.stories.tsx":545,"./stories/component/Timeline.stories.tsx":546,"./stories/experiment/TestPassthrough.stories.tsx":1041};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=983},988:function(module,exports){},989:function(module,exports){},990:function(module,exports){},994:function(module,exports,__webpack_require__){(exports=__webpack_require__(269)(!1)).push([module.i,".brush_tools {\n  align-items: center;\n  bottom: 0;\n  display: flex;\n  left: 0;\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  width: 48px;\n}\n\n.brush_tools__display {\n  position: absolute;\n  transition: left 0.3s;\n\n  width: 100%;\n}\n\n.brush_tools__display-show {\n  left: 0px;\n}\n\n.brush_tools__display-hide {\n  left: -48px;\n  transition-delay: 0.5s;\n}\n\n.brush_tools_bar {\n  align-items: center;\n  -webkit-backdrop-filter: blur(3px);\n          backdrop-filter: blur(3px);\n  background-color: #2228;\n  border-radius: 0px 10px 10px 0px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  height: 250px;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  pointer-events: auto;\n  transition: background-color 0.5s, padding 0.5s, border 0.5s;\n  transition-delay: 1s;\n  width: 100%;\n}\n\n.brush_tools_bar:hover {\n  background-color: #222e;\n  transition-delay: 0s;\n}\n\n@media only screen and (max-height: 250px) {\n  .brush_tools_bar {\n    border-radius: 0px;\n    height: 100%;\n  }\n}\n\n.edit_tools {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  height: 48px;\n  overflow: hidden;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.edit_tools__display {\n  position: absolute;\n  transition: top 0.3s;\n  height: 100%;\n}\n\n.edit_tools__display-show {\n  top: 0px;\n}\n\n.edit_tools__display-hide {\n  top: -48px;\n  transition-delay: 0.5s;\n}\n\n.edit_tools_bar {\n  align-items: center;\n  -webkit-backdrop-filter: blur(3px);\n          backdrop-filter: blur(3px);\n  background-color: #2228;\n  border-radius: 0px 0px 10px 10px;\n  box-sizing: border-box;\n  display: flex;\n  pointer-events: auto;\n  position: relative;\n  /* opacity: 0.5; */\n  transition: background-color 0.5s, padding 0.5s, border 0.5s;\n  transition-delay: 1s;\n}\n\n.edit_tools_bar:hover {\n  transition-delay: 0s;\n  background-color: #222e;\n  /* opacity: 1; */\n}\n\n.icon_divider {\n  width: 1px;\n  height: 34px;\n  background: #9995;\n  margin: 0px 10px 0px 10px;\n}",""]),module.exports=exports}},[[617,2,3]]]);